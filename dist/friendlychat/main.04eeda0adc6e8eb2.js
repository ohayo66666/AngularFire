"use strict";(self.webpackChunkfriendlychat=self.webpackChunkfriendlychat||[]).push([[792],{391:()=>{function zc(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(u){zc(o,r,i,s,a,"next",u)}function a(u){zc(o,r,i,s,a,"throw",u)}s(void 0)})}}let wt=null,uf=1;const Xo=Symbol("SIGNAL");function ge(t){const e=wt;return wt=t,e}function cR(t){if((!Wc(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==uf)){if(!t.producerMustRecompute(t)&&!ey(t))return t.dirty=!1,void(t.lastCleanEpoch=uf);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=uf}}function ey(t){da(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(cR(n),r!==n.version))return!0}return!1}function cf(t,e){if(function _R(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),da(t),1===t.liveConsumerNode.length)for(let r=0;r<t.producerNode.length;r++)cf(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];da(i),i.producerIndexOfThis[r]=e}}function Wc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function da(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let yR=null;function Xe(t){return"function"==typeof t}function ny(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ry=ny(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function lf(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class bn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Xe(r))try{r()}catch(o){e=o instanceof ry?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{TR(o)}catch(s){e=e??[],s instanceof ry?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ry(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TR(e);else{if(e instanceof bn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&lf(n,e)}remove(e){const{_finalizers:n}=this;n&&lf(n,e),e instanceof bn&&e._removeParent(this)}}bn.EMPTY=(()=>{const t=new bn;return t.closed=!0,t})();const ER=bn.EMPTY;function wR(t){return t instanceof bn||t&&"closed"in t&&Xe(t.remove)&&Xe(t.add)&&Xe(t.unsubscribe)}function TR(t){Xe(t)?t():t.unsubscribe()}const Zo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},df={setTimeout(t,e,...n){const{delegate:r}=df;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=df;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function DR(t){df.setTimeout(()=>{const{onUnhandledError:e}=Zo;if(!e)throw t;e(t)})}function iy(){}const kq=oy("C",void 0,void 0);function oy(t,e,n){return{kind:t,value:e,error:n}}let es=null;function hf(t){if(Zo.useDeprecatedSynchronousErrorHandling){const e=!es;if(e&&(es={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=es;if(es=null,n)throw r}}else t()}class sy extends bn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wR(e)&&e.add(this)):this.destination=$q}static create(e,n,r){return new uy(e,n,r)}next(e){this.isStopped?cy(function Fq(t){return oy("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?cy(function Vq(t){return oy("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cy(kq,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Uq=Function.prototype.bind;function ay(t,e){return Uq.call(t,e)}class Bq{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ff(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ff(r)}else ff(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ff(n)}}}class uy extends sy{constructor(e,n,r){let i;if(super(),Xe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Zo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ay(e.next,o),error:e.error&&ay(e.error,o),complete:e.complete&&ay(e.complete,o)}):i=e}this.destination=new Bq(i)}}function ff(t){Zo.useDeprecatedSynchronousErrorHandling?function Lq(t){Zo.useDeprecatedSynchronousErrorHandling&&es&&(es.errorThrown=!0,es.error=t)}(t):DR(t)}function cy(t,e){const{onStoppedNotification:n}=Zo;n&&df.setTimeout(()=>n(t,e))}const $q={closed:!0,next:iy,error:function jq(t){throw t},complete:iy},ly="function"==typeof Symbol&&Symbol.observable||"@@observable";function ts(t){return t}function dy(...t){return CR(t)}function CR(t){return 0===t.length?ts:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let yt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function Gq(t){return t&&t instanceof sy||function Hq(t){return t&&Xe(t.next)&&Xe(t.error)&&Xe(t.complete)}(t)&&wR(t)}(n)?n:new uy(n,r,i);return hf(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=bR(r))((i,o)=>{const s=new uy({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ly](){return this}pipe(...n){return CR(n)(this)}toPromise(n){return new(n=bR(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bR(t){var e;return null!==(e=t??Zo.Promise)&&void 0!==e?e:Promise}const zq=ny(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let dr=(()=>{class t extends yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new AR(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new zq}next(n){hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){hf(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?ER:(this.currentObservers=null,o.push(n),new bn(()=>{this.currentObservers=null,lf(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new yt;return n.source=this,n}}return t.create=(e,n)=>new AR(e,n),t})();class AR extends dr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:ER}}class hr extends dr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function SR(t){return Xe(t?.lift)}function en(t){return e=>{if(SR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ut(t,e,n,r,i){return new qq(t,e,n,r,i)}class qq extends sy{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function De(t,e){return en((n,r)=>{let i=0;n.subscribe(Ut(r,o=>{r.next(t.call(e,o,i++))}))})}const RR="https://g.co/ng/security#xss";class L extends Error{constructor(e,n){super(function ha(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function yi(t){return{toString:t}.toString()}const pa="__parameters__";function ma(t,e,n){return yi(()=>{const r=function hy(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,d){const h=u.hasOwnProperty(pa)?u[pa]:Object.defineProperty(u,pa,{value:[]})[pa];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const Ne=globalThis;function Oe(t){for(let e in t)if(t[e]===Oe)return e;throw Error("Could not find renamed property on target object.")}function Wq(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function fy(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Kq=Oe({__forward_ref__:Oe});function ze(t){return t.__forward_ref__=ze,t.toString=function(){return Bt(this())},t}function ie(t){return gf(t)?t():t}function gf(t){return"function"==typeof t&&t.hasOwnProperty(Kq)&&t.__forward_ref__===ze}function Z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ns(t){return{providers:t.providers||[],imports:t.imports||[]}}function mf(t){return xR(t,yf)||xR(t,OR)}function xR(t,e){return t.hasOwnProperty(e)?t[e]:null}function _f(t){return t&&(t.hasOwnProperty(py)||t.hasOwnProperty(e4))?t[py]:null}const yf=Oe({\u0275prov:Oe}),py=Oe({\u0275inj:Oe}),OR=Oe({ngInjectableDef:Oe}),e4=Oe({ngInjectorDef:Oe});class Y{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vy(t){return t&&!!t.\u0275providers}const Kc=Oe({\u0275cmp:Oe}),Iy=Oe({\u0275dir:Oe}),Ey=Oe({\u0275pipe:Oe}),VR=Oe({\u0275mod:Oe}),vi=Oe({\u0275fac:Oe}),Qc=Oe({__NG_ELEMENT_ID__:Oe}),FR=Oe({__NG_ENV_ID__:Oe});function le(t){return"string"==typeof t?t:null==t?"":String(t)}function wy(t,e){throw new L(-201,!1)}var _e=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(_e||{});let Ty;function LR(){return Ty}function Un(t){const e=Ty;return Ty=t,e}function UR(t,e,n){const r=mf(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&_e.Optional?null:void 0!==e?e:void wy()}const Yc={},Dy="__NG_DI_FLAG__",vf="ngTempTokenPath",s4=/\n/gm,BR="__source";let _a;function uo(t){const e=_a;return _a=t,e}function c4(t,e=_e.Default){if(void 0===_a)throw new L(-203,!1);return null===_a?UR(t,void 0,e):_a.get(t,e&_e.Optional?null:void 0,e)}function re(t,e=_e.Default){return(LR()||c4)(ie(t),e)}function j(t,e=_e.Default){return re(t,If(e))}function If(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Cy(t){const e=[];for(let n=0;n<t.length;n++){const r=ie(t[n]);if(Array.isArray(r)){if(0===r.length)throw new L(900,!1);let i,o=_e.Default;for(let s=0;s<r.length;s++){const a=r[s],u=l4(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function Jc(t,e){return t[Dy]=e,t.prototype[Dy]=e,t}function l4(t){return t[Dy]}const ft=Jc(ma("Optional"),8),Ef=Jc(ma("SkipSelf"),4);function rs(t,e){return t.hasOwnProperty(vi)?t[vi]:null}function ya(t,e){t.forEach(n=>Array.isArray(n)?ya(n,e):e(n))}function $R(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function wf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Xn(t,e,n){let r=va(t,e);return r>=0?t[1|r]=n:(r=~r,function HR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Ay(t,e){const n=va(t,e);if(n>=0)return t[1|n]}function va(t,e){return function GR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const jr={},Ae=[],is=new Y(""),zR=new Y("",-1),Sy=new Y("");class Df{get(e,n=Yc){if(n===Yc){const r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return n}}var Cf=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Cf||{}),Tr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Tr||{}),Ze=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ze||{});function _4(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Ry(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];WR(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function qR(t){return 3===t||4===t||6===t}function WR(t){return 64===t.charCodeAt(0)}function Xc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||KR(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function KR(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}const QR="ng-template";function y4(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==_4(e[i+1].toLowerCase(),n,0))return!0}else if(Py(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===n)return!0}return!1}function Py(t){return 4===t.type&&t.value!==QR}function v4(t,e,n){return e===(4!==t.type||n?t.value:QR)}function I4(t,e,n){let r=4;const i=t.attrs,o=null!==i?function T4(t){for(let e=0;e<t.length;e++)if(qR(t[e]))return e;return t.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!v4(t,u,n)||""===u&&1===e.length){if(Dr(r))return!1;s=!0}}else if(8&r){if(null===i||!y4(t,i,u,n)){if(Dr(r))return!1;s=!0}}else{const c=e[++a],d=E4(u,i,Py(t),n);if(-1===d){if(Dr(r))return!1;s=!0;continue}if(""!==c){let h;if(h=d>o?"":i[d+1].toLowerCase(),2&r&&c!==h){if(Dr(r))return!1;s=!0}}}}else{if(!s&&!Dr(r)&&!Dr(u))return!1;if(s&&Dr(u))continue;s=!1,r=u|1&r}}return Dr(r)||s}function Dr(t){return!(1&t)}function E4(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function D4(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function YR(t,e,n=!1){for(let r=0;r<e.length;r++)if(I4(t,e[r],n))return!0;return!1}function JR(t,e){return t?":not("+e.trim()+")":e}function b4(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Dr(s)&&(e+=JR(o,i),i=""),r=s,o=o||!Dr(r);n++}return""!==i&&(e+=JR(o,i)),e}function Ia(t){return yi(()=>{const e=ZR(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Cf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Tr.Emulated,styles:t.styles||Ae,_:null,schemas:t.schemas||null,tView:null,id:""};eP(n);const r=t.dependencies;return n.directiveDefs=bf(r,!1),n.pipeDefs=bf(r,!0),n.id=function N4(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function R4(t){return me(t)||jt(t)}function P4(t){return null!==t}function Ea(t){return yi(()=>({type:t.type,bootstrap:t.bootstrap||Ae,declarations:t.declarations||Ae,imports:t.imports||Ae,exports:t.exports||Ae,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function XR(t,e){if(null==t)return jr;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let o,s,a=Ze.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ze.None?[r,a]:r,e[o]=s):n[o]=r}return n}function ae(t){return yi(()=>{const e=ZR(t);return eP(e),e})}function jn(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function me(t){return t[Kc]||null}function jt(t){return t[Iy]||null}function tn(t){return t[Ey]||null}function cn(t,e){const n=t[VR]||null;if(!n&&!0===e)throw new Error(`Type ${Bt(t)} does not have '\u0275mod' property.`);return n}function ZR(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||jr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ae,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:XR(t.inputs,e),outputs:XR(t.outputs),debugInfo:null}}function eP(t){t.features?.forEach(e=>e(t))}function bf(t,e){if(!t)return null;const n=e?tn:R4;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(P4)}function Cr(t){return{\u0275providers:t}}function x4(...t){return{\u0275providers:My(0,t),\u0275fromNgModule:!0}}function My(t,...e){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return ya(e,s=>{const a=s;Af(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&tP(i,o),n}function tP(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];Ny(i,o=>{e(o,r)})}}function Af(t,e,n,r){if(!(t=ie(t)))return!1;let i=null,o=_f(t);const s=!o&&me(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const u=t.ngModule;if(o=_f(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Af(c,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{ya(o.imports,d=>{Af(d,e,n,r)&&(c||=[],c.push(d))})}finally{}void 0!==c&&tP(c,e)}if(!a){const c=rs(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ae},i),e({provide:Sy,useValue:i,multi:!0},i),e({provide:is,useValue:()=>re(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=t;Ny(u,d=>{e(d,c)})}}}return i!==t&&void 0!==t.providers}function Ny(t,e){for(let n of t)vy(n)&&(n=n.\u0275providers),Array.isArray(n)?Ny(n,e):e(n)}const O4=Oe({provide:String,useValue:Oe});function xy(t){return null!==t&&"object"==typeof t&&O4 in t}function os(t){return"function"==typeof t}const Oy=new Y(""),Sf={},V4={};let ky;function Rf(){return void 0===ky&&(ky=new Df),ky}class $n{}class wa extends $n{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fy(e,s=>this.processProvider(s)),this.records.set(zR,Ta(void 0,this)),i.has("environment")&&this.records.set($n,Ta(void 0,this));const o=this.records.get(Oy);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Sy,Ae,_e.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=ge(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=uo(this),r=Un(void 0);try{return e()}finally{uo(n),Un(r)}}get(e,n=Yc,r=_e.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(FR))return e[FR](this);r=If(r);const o=uo(this),s=Un(void 0);try{if(!(r&_e.SkipSelf)){let u=this.records.get(e);if(void 0===u){const c=function j4(t){return"function"==typeof t||"object"==typeof t&&t instanceof Y}(e)&&mf(e);u=c&&this.injectableDefInScope(c)?Ta(Vy(e),Sf):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&_e.Self?Rf():this.parent).get(e,n=r&_e.Optional&&n===Yc?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[vf]=a[vf]||[]).unshift(Bt(e)),o)throw a;return function d4(t,e,n,r){const i=t[vf];throw e[BR]&&i.unshift(e[BR]),t.message=function h4(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Bt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(s4,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[vf]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Un(s),uo(o)}}resolveInjectorInitializers(){const e=ge(null),n=uo(this),r=Un(void 0);try{const o=this.get(is,Ae,_e.Self);for(const s of o)s()}finally{uo(n),Un(r),ge(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){let n=os(e=ie(e))?e:ie(e&&e.provide);const r=function L4(t){return xy(t)?Ta(void 0,t.useValue):Ta(iP(t),Sf)}(e);if(!os(e)&&!0===e.multi){let i=this.records.get(n);i||(i=Ta(void 0,Sf,!0),i.factory=()=>Cy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=ge(null);try{return n.value===Sf&&(n.value=V4,n.value=n.factory()),"object"==typeof n.value&&n.value&&function B4(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ge(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=ie(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Vy(t){const e=mf(t),n=null!==e?e.factory:rs(t);if(null!==n)return n;if(t instanceof Y)throw new L(204,!1);if(t instanceof Function)return function F4(t){if(t.length>0)throw new L(204,!1);const n=function Zq(t){return t&&(t[yf]||t[OR])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new L(204,!1)}function iP(t,e,n){let r;if(os(t)){const i=ie(t);return rs(i)||Vy(i)}if(xy(t))r=()=>ie(t.useValue);else if(function rP(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Cy(t.deps||[]));else if(function nP(t){return!(!t||!t.useExisting)}(t))r=()=>re(ie(t.useExisting));else{const i=ie(t&&(t.useClass||t.provide));if(!function U4(t){return!!t.deps}(t))return rs(i)||Vy(i);r=()=>new i(...Cy(t.deps))}return r}function Ta(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fy(t,e){for(const n of t)Array.isArray(n)?Fy(n,e):n&&vy(n)?Fy(n.\u0275providers,e):e(n)}function Ii(t,e){t instanceof wa&&t.assertNotDestroyed();const r=uo(t),i=Un(void 0);try{return e()}finally{uo(r),Un(i)}}function oP(){return void 0!==LR()||null!=function u4(){return _a}()}const st=0,H=1,te=2,Tt=3,br=4,ln=5,Zn=6,Ca=7,qe=8,Ot=9,Ar=10,oe=11,el=12,aP=13,ba=14,pt=15,tl=16,Aa=17,Ei=18,nl=19,uP=20,lo=21,Nf=22,ss=23,de=25,Uy=1,$r=7,Sa=9,Dt=10;var By=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(By||{});function dn(t){return Array.isArray(t)&&"object"==typeof t[Uy]}function hn(t){return Array.isArray(t)&&!0===t[Uy]}function jy(t){return!!(4&t.flags)}function as(t){return t.componentOffset>-1}function Of(t){return!(1&~t.flags)}function Sr(t){return!!t.template}function $y(t){return!!(512&t[te])}class eW{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function hP(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function fr(){return fP}function fP(t){return t.type.prototype.ngOnChanges&&(t.setInput=nW),tW}function tW(){const t=gP(this),e=t?.current;if(e){const n=t.previous;if(n===jr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function nW(t,e,n,r,i){const o=this.declaredInputs[r],s=gP(t)||function rW(t,e){return t[pP]=e}(t,{previous:jr,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new eW(c&&c.currentValue,n,u===jr),hP(t,e,i,n)}fr.ngInherit=!0;const pP="__ngSimpleChanges__";function gP(t){return t[pP]||null}const Hr=function(t,e,n){};let yP=!1;function Ue(t){for(;Array.isArray(t);)t=t[st];return t}function il(t,e){return Ue(e[t])}function An(t,e){return Ue(e[t.index])}function ol(t,e){return t.data[e]}function Ra(t,e){return t[e]}function er(t,e){const n=e[t];return dn(n)?n:n[st]}function Wy(t){return!(128&~t[te])}function Gr(t,e){return null==e?null:t[e]}function vP(t){t[Aa]=0}function cW(t){1024&t[te]||(t[te]|=1024,Wy(t)&&sl(t))}function Ky(t){return!!(9216&t[te]||t[ss]?.dirty)}function Qy(t){t[Ar].changeDetectionScheduler?.notify(1),Ky(t)?sl(t):64&t[te]&&(function oW(){return yP}()?(t[te]|=1024,sl(t)):t[Ar].changeDetectionScheduler?.notify())}function sl(t){t[Ar].changeDetectionScheduler?.notify();let e=us(t);for(;null!==e&&!(8192&e[te])&&(e[te]|=8192,Wy(e));)e=us(e)}function kf(t,e){if(!(256&~t[te]))throw new L(911,!1);null===t[lo]&&(t[lo]=[]),t[lo].push(e)}function us(t){const e=t[Tt];return hn(e)?e[Tt]:e}const se={lFrame:RP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wP(){return se.bindingsEnabled}function V(){return se.lFrame.lView}function ye(){return se.lFrame.tView}function Ma(t){return se.lFrame.contextLView=t,t[qe]}function Na(t){return se.lFrame.contextLView=null,t}function ke(){let t=TP();for(;null!==t&&64===t.type;)t=t.parent;return t}function TP(){return se.lFrame.currentTNode}function zr(t,e){const n=se.lFrame;n.currentTNode=t,n.isParent=e}function Jy(){return se.lFrame.isParent}function Rr(){return se.lFrame.bindingIndex++}function IW(t,e){const n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zy(e)}function Zy(t){se.lFrame.currentDirectiveIndex=t}function Vf(t){se.lFrame.currentQueryIndex=t}function wW(t){const e=t[H];return 2===e.type?e.declTNode:1===e.type?t[ln]:null}function AP(t,e,n){if(n&_e.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&_e.Host||(i=wW(o),null===i||(o=o[ba],10&i.type))););if(null===i)return!1;e=i,t=o}const r=se.lFrame=SP();return r.currentTNode=e,r.lView=t,!0}function nv(t){const e=SP(),n=t[H];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function SP(){const t=se.lFrame,e=null===t?null:t.child;return null===e?RP(t):e}function RP(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function PP(){const t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const MP=PP;function rv(){const t=PP();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fn(){return se.lFrame.selectedIndex}function cs(t){se.lFrame.selectedIndex=t}function We(){const t=se.lFrame;return ol(t.tView,t.selectedIndex)}let xP=!0;function ul(){return xP}function qr(t){xP=t}function Ff(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=d&&(t.destroyHooks??=[]).push(n,d)}}function Lf(t,e,n){OP(t,e,3,n)}function Uf(t,e,n,r){(3&t[te])===n&&OP(t,e,n,r)}function iv(t,e){let n=t[te];(3&n)===e&&(n&=16383,n+=1,t[te]=n)}function OP(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Aa]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Aa]+=65536),(a<o||-1==o)&&(RW(t,n,e,u),t[Aa]=(4294901760&t[Aa])+u+2),u++}function kP(t,e){Hr(4,t,e);const n=ge(null);try{e.call(t)}finally{ge(n),Hr(5,t,e)}}function RW(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];i?t[te]>>14<t[Aa]>>16&&(3&t[te])===e&&(t[te]+=16384,kP(a,o)):kP(a,o)}const xa=-1;class cl{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function sv(t){return t!==xa}function ll(t){return 32767&t}function dl(t,e){let n=function OW(t){return t>>16}(t),r=e;for(;n>0;)r=r[ba],n--;return r}let av=!0;function Bf(t){const e=av;return av=t,e}const VP=255,FP=5;let kW=0;const Wr={};function jf(t,e){const n=LP(t,e);if(-1!==n)return n;const r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,uv(r.data,t),uv(e,null),uv(r.blueprint,null));const i=$f(t,e),o=t.injectorIndex;if(sv(i)){const s=ll(i),a=dl(i,e),u=a[H].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function uv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LP(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function $f(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=zP(i),null===r)return xa;if(n++,i=i[ba],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return xa}function cv(t,e,n){!function VW(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qc)&&(r=n[Qc]),null==r&&(r=n[Qc]=kW++);const i=r&VP;e.data[t+(i>>FP)]|=1<<i}(t,e,n)}function UP(t,e,n){if(n&_e.Optional||void 0!==t)return t;wy()}function BP(t,e,n,r){if(n&_e.Optional&&void 0===r&&(r=null),!(n&(_e.Self|_e.Host))){const i=t[Ot],o=Un(void 0);try{return i?i.get(e,r,n&_e.Optional):UR(e,r,n&_e.Optional)}finally{Un(o)}}return UP(r,0,n)}function jP(t,e,n,r=_e.Default,i){if(null!==t){if(2048&e[te]&&!(r&_e.Self)){const s=function jW(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&2048&s[te]&&!(512&s[te]);){const a=$P(o,s,n,r|_e.Self,Wr);if(a!==Wr)return a;let u=o.parent;if(!u){const c=s[uP];if(c){const d=c.get(n,Wr,r);if(d!==Wr)return d}u=zP(s),s=s[ba]}o=u}return i}(t,e,n,r,Wr);if(s!==Wr)return s}const o=$P(t,e,n,r,Wr);if(o!==Wr)return o}return BP(e,n,r,i)}function $P(t,e,n,r,i){const o=function UW(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Qc)?t[Qc]:void 0;return"number"==typeof e?e>=0?e&VP:BW:e}(n);if("function"==typeof o){if(!AP(e,t,r))return r&_e.Host?UP(i,0,r):BP(e,n,r,i);try{let s;if(s=o(r),null!=s||r&_e.Optional)return s;wy()}finally{MP()}}else if("number"==typeof o){let s=null,a=LP(t,e),u=xa,c=r&_e.Host?e[pt][ln]:null;for((-1===a||r&_e.SkipSelf)&&(u=-1===a?$f(t,e):e[a+8],u!==xa&&GP(r,!1)?(s=e[H],a=ll(u),e=dl(u,e)):a=-1);-1!==a;){const d=e[H];if(HP(o,a,d.data)){const h=LW(a,e,n,s,r,c);if(h!==Wr)return h}u=e[a+8],u!==xa&&GP(r,e[H].data[a+8]===c)&&HP(o,a,e)?(s=d,a=ll(u),e=dl(u,e)):a=-1}}return i}function LW(t,e,n,r,i,o){const s=e[H],a=s.data[t+8],d=function Hf(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,d=o>>20,p=i?a+d:t.directiveEnd;for(let m=r?a:a+d;m<p;m++){const _=s[m];if(m<u&&n===_||m>=u&&_.type===n)return m}if(i){const m=s[u];if(m&&Sr(m)&&m.type===n)return u}return null}(a,s,n,null==r?as(a)&&av:r!=s&&!!(3&a.type),i&_e.Host&&o===a);return null!==d?ls(e,s,d,a):Wr}function ls(t,e,n,r){let i=t[n];const o=e.data;if(function PW(t){return t instanceof cl}(i)){const s=i;s.resolving&&function r4(t,e){throw e&&e.join(" > "),new L(-200,t)}(function Re(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():le(t)}(o[n]));const a=Bf(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?Un(s.injectImpl):null;AP(t,r,_e.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function SW(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=fP(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}(n,o[n],e)}finally{null!==c&&Un(c),Bf(a),s.resolving=!1,MP()}}return i}function HP(t,e,n){return!!(n[e+(t>>FP)]&1<<t)}function GP(t,e){return!(t&_e.Self||t&_e.Host&&e)}class Ht{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jP(this._tNode,this._lView,e,If(r),n)}}function BW(){return new Ht(ke(),V())}function Kt(t){return yi(()=>{const e=t.prototype.constructor,n=e[vi]||lv(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[vi]||lv(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function lv(t){return gf(t)?()=>{const e=lv(ie(t));return e&&e()}:rs(t)}function zP(t){const e=t[H],n=e.type;return 2===n?e.declTNode:1===n?t[ln]:null}function YP(t,e=null,n=null,r){const i=JP(t,e,n,r);return i.resolveInjectorInitializers(),i}function JP(t,e=null,n=null,r,i=new Set){const o=[n||Ae,x4(t)];return r=r||("object"==typeof t?void 0:Bt(t)),new wa(o,e||Rf(),r||null,i)}let Ct=(()=>{class t{static{this.THROW_IF_NOT_FOUND=Yc}static{this.NULL=new Df}static create(n,r){if(Array.isArray(n))return YP({name:""},r,n,"");{const i=n.name??"";return YP({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=Z({token:t,providedIn:"any",factory:()=>re(zR)})}static{this.__NG_ELEMENT_ID__=-1}}return t})();function hv(t){return t.ngOriginalError}class Kr{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&hv(e);for(;n&&hv(n);)n=hv(n);return n||null}}const ZP=new Y("",{providedIn:"root",factory:()=>j(Kr).handleError.bind(void 0)});let Va=(()=>{class t{static{this.__NG_ELEMENT_ID__=YW}static{this.__NG_ENV_ID__=n=>n}}return t})();class QW extends Va{constructor(e){super(),this._lView=e}onDestroy(e){return kf(this._lView,e),()=>function Yy(t,e){if(null===t[lo])return;const n=t[lo].indexOf(e);-1!==n&&t[lo].splice(n,1)}(this._lView,e)}}function YW(){return new QW(V())}function JW(){return Fa(ke(),V())}function Fa(t,e){return new tr(An(t,e))}let tr=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=JW}}return t})();function fv(t){return e=>{setTimeout(t,void 0,e)}}const vt=class XW extends dr{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,oP()&&(this.destroyRef=j(Va,{optional:!0})??void 0)}emit(e){const n=ge(null);try{super.next(e)}finally{ge(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=fv(o),i&&(i=fv(i)),s&&(s=fv(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof bn&&e.add(a),a}};function zf(t){return!(128&~t.flags)}const gv=new Map;let t3=0;const _v="__ngContext__";function pn(t,e){dn(e)?(t[_v]=e[nl],function r3(t){gv.set(t[nl],t)}(e)):t[_v]=e}function dM(t){return fM(t[el])}function hM(t){return fM(t[br])}function fM(t){for(;null!==t&&!hn(t);)t=t[br];return t}let yv;const vv=new Y("",{providedIn:"root",factory:()=>E3}),E3="ng",EM=new Y(""),fo=new Y("",{providedIn:"platform",factory:()=>"unknown"}),wM=new Y("",{providedIn:"root",factory:()=>function ho(){if(void 0!==yv)return yv;if(typeof document<"u")return document;throw new L(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let TM=()=>null;function Av(t,e,n=!1){return TM(t,e,n)}const SM=new Y("",{providedIn:"root",factory:()=>!1});class xM{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${RR})`}}function po(t){return t instanceof xM?t.changingThisBreaksApplicationSecurity:t}const G3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ja=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ja||{});function $a(t){const e=function El(){const t=V();return t&&t[Ar].sanitizer}();return e?e.sanitize(ja.URL,t)||"":function vl(t,e){const n=function B3(t){return t instanceof xM&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${RR})`)}return n===e}(t,"URL")?po(t):function xv(t){return(t=String(t)).match(G3)?t:"unsafe:"+t}(le(t))}function nr(t){return t instanceof Function?t():t}var go=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(go||{});let Bv;function jv(t,e){return Bv(t,e)}function Ga(t,e,n,r,i){if(null!=r){let o,s=!1;hn(r)?o=r:dn(r)&&(s=!0,r=r[st]);const a=Ue(r);0===t&&null!==n?null==i?tN(e,n,a):ds(e,n,a,i||null,!0):1===t&&null!==n?ds(e,n,a,i||null,!0):2===t?function Dl(t,e,n){const r=ap(t,e);r&&function A6(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function P6(t,e,n,r,i){const o=n[$r];o!==Ue(n)&&Ga(e,t,r,o,i);for(let a=Dt;a<n.length;a++){const u=n[a];cp(u[H],u,t,e,r,o)}}(e,t,o,n,i)}}function op(t,e,n){return t.createElement(e,n)}function XM(t,e){e[Ar].changeDetectionScheduler?.notify(1),cp(t,e,e[oe],2,null,null)}function ZM(t,e){const n=t[Sa],r=n.indexOf(e);n.splice(r,1)}function wl(t,e){if(t.length<=Dt)return;const n=Dt+e,r=t[n];if(r){const i=r[tl];null!==i&&i!==t&&ZM(i,r),e>0&&(t[n-1][br]=r[br]);const o=wf(t,Dt+e);!function I6(t,e){XM(t,e),e[st]=null,e[ln]=null}(r[H],r);const s=o[Ei];null!==s&&s.detachView(o[H]),r[Tt]=null,r[br]=null,r[te]&=-129}return r}function sp(t,e){if(!(256&e[te])){const n=e[oe];n.destroyNode&&cp(t,e,n,3,null,null),function w6(t){let e=t[el];if(!e)return Gv(t[H],t);for(;e;){let n=null;if(dn(e))n=e[el];else{const r=e[Dt];r&&(n=r)}if(!n){for(;e&&!e[br]&&e!==t;)dn(e)&&Gv(e[H],e),e=e[Tt];null===e&&(e=t),dn(e)&&Gv(e[H],e),n=e&&e[br]}e=n}}(e)}}function Gv(t,e){if(256&e[te])return;const n=ge(null);try{e[te]&=-129,e[te]|=256,e[ss]&&function gR(t){if(da(t),Wc(t))for(let e=0;e<t.producerNode.length;e++)cf(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(e[ss]),function b6(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof cl)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Hr(4,a,u);try{u.call(a)}finally{Hr(5,a,u)}}else{Hr(4,i,o);try{o.call(i)}finally{Hr(5,i,o)}}}}}(t,e),function C6(t,e){const n=t.cleanup,r=e[Ca];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[Ca]=null);const i=e[lo];if(null!==i){e[lo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(t,e),1===e[H].type&&e[oe].destroy();const r=e[tl];if(null!==r&&hn(e[Tt])){r!==e[Tt]&&ZM(r,e);const i=e[Ei];null!==i&&i.detachView(t)}!function i3(t){gv.delete(t[nl])}(e)}finally{ge(n)}}function zv(t,e,n){return function eN(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[st];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===Tr.None||o===Tr.Emulated)return null}return An(r,n)}}(t,e.parent,n)}function ds(t,e,n,r,i){t.insertBefore(e,n,r,i)}function tN(t,e,n){t.appendChild(e,n)}function nN(t,e,n,r,i){null!==r?ds(t,e,n,r,i):tN(t,e,n)}function ap(t,e){return t.parentNode(e)}let qv,oN=function iN(t,e,n){return 40&t.type?An(t,n):null};function up(t,e,n,r){const i=zv(t,r,e),o=e[oe],a=function rN(t,e,n){return oN(t,e,n)}(r.parent||e[ln],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)nN(o,i,n[u],a,!1);else nN(o,i,n,a,!1);void 0!==qv&&qv(o,r,e,n,i)}function Tl(t,e){if(null!==e){const n=e.type;if(3&n)return An(e,t);if(4&n)return Wv(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Tl(t,r);{const i=t[e.index];return hn(i)?Wv(-1,i):Ue(i)}}if(32&n)return jv(e,t)()||Ue(t[e.index]);{const r=aN(t,e);return null!==r?Array.isArray(r)?r[0]:Tl(us(t[pt]),r):Tl(t,e.next)}}return null}function aN(t,e){return null!==e?t[pt][ln].projection[e.projection]:null}function Wv(t,e){const n=Dt+t+1;if(n<e.length){const r=e[n],i=r[H].firstChild;if(null!==i)return Tl(r,i)}return e[$r]}function Kv(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&pn(Ue(a),r),n.flags|=2),32&~n.flags)if(8&u)Kv(t,e,n.child,r,i,o,!1),Ga(e,t,i,a,o);else if(32&u){const c=jv(n,r);let d;for(;d=c();)Ga(e,t,i,d,o);Ga(e,t,i,a,o)}else 16&u?cN(t,e,r,n,i,o):Ga(e,t,i,a,o);n=s?n.projectionNext:n.next}}function cp(t,e,n,r,i,o){Kv(n,r,t.firstChild,e,i,o,!1)}function cN(t,e,n,r,i,o){const s=n[pt],u=s[ln].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Ga(e,t,i,u[c],o);else{let c=u;const d=s[Tt];zf(r)&&(c.flags|=128),Kv(t,e,c,d,i,o,!0)}}function lN(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function dN(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Ry(t,e,r),null!==i&&lN(t,e,i),null!==o&&function N6(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}const he={};function Gt(t=1){hN(ye(),V(),fn()+t,!1)}function hN(t,e,n,r){if(!r)if(3&~e[te]){const o=t.preOrderHooks;null!==o&&Uf(e,o,0,n)}else{const o=t.preOrderCheckHooks;null!==o&&Lf(e,o,n)}cs(n)}function $(t,e=_e.Default){const n=V();return null===n?re(t,e):jP(ke(),n,ie(t),e)}function pN(t,e,n,r,i,o){const s=ge(null);try{let a=null;i&Ze.SignalBased&&(a=e[r][Xo]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&Ze.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),null!==t.setInput?t.setInput(e,a,o,n,r):hP(e,a,r,o)}finally{ge(s)}}function lp(t,e,n,r,i,o,s,a,u,c,d){const h=e.blueprint.slice();return h[st]=i,h[te]=204|r,(null!==c||t&&2048&t[te])&&(h[te]|=2048),vP(h),h[Tt]=h[ba]=t,h[qe]=n,h[Ar]=s||t&&t[Ar],h[oe]=a||t&&t[oe],h[Ot]=u||t&&t[Ot]||null,h[ln]=o,h[nl]=function n3(){return t3++}(),h[Zn]=d,h[uP]=c,h[pt]=2==e.type?t[pt]:h,h}function za(t,e,n,r,i){let o=t.data[e];if(null===o)o=function Qv(t,e,n,r,i){const o=TP(),s=Jy(),u=t.data[e]=function B6(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function Pa(){return null!==se.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(t,e,n,r,i),function vW(){return se.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function al(){const t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return zr(o,!0),o}function Cl(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gN(t,e,n,r,i){const o=fn(),s=2&r;try{cs(-1),s&&e.length>de&&hN(t,e,de,!1),Hr(s?2:0,i),n(r,i)}finally{cs(o),Hr(s?3:1,i)}}function Yv(t,e,n){if(jy(e)){const r=ge(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{ge(r)}}}function Jv(t,e,n){wP()&&(function W6(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;as(n)&&function e9(t,e,n){const r=An(e,t),i=mN(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=dp(t,lp(t,i,null,s,r,e,null,t[Ar].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||jf(n,e),pn(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const u=t.data[a],c=ls(e,t,a,n);pn(c,e),null!==s&&t9(0,a-i,c,u,0,s),Sr(u)&&(er(n.index,e)[qe]=ls(e,t,a,n))}}(t,e,n,An(n,e)),!(64&~n.flags)&&EN(t,e,n))}function Xv(t,e,n=An){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function mN(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Zv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Zv(t,e,n,r,i,o,s,a,u,c,d){const h=de+r,p=h+i,m=function O6(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:he);return n}(h,p),_="function"==typeof c?c():c;return m[H]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}let _N=()=>null;function yN(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,u=Ze.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(null!==i){if(!i.hasOwnProperty(o))continue;c=i[o]}0===t?vN(r,n,c,a,u):vN(r,n,c,a)}return r}function vN(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],void 0!==i&&o.push(i)}function Gn(t,e,n,r,i,o,s,a){const u=An(e,n);let d,c=e.inputs;!a&&null!=c&&(d=c[r])?(iI(t,n,d,r,i),as(e)&&function H6(t,e){const n=er(e,t);16&n[te]||(n[te]|=64)}(n,e.index)):3&e.type&&(r=function $6(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}function eI(t,e,n,r){if(wP()){const i=null===r?null:{"":-1},o=function Q6(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(YR(e,s.selectors,!1))if(r||(r=[]),Sr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),tI(t,e,a.length)}else r.unshift(s),tI(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&IN(t,e,n,s,i,a),i&&function Y6(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new L(-301,!1);r.push(e[i],o)}}}(n,r,i)}n.mergedAttrs=Xc(n.mergedAttrs,n.attrs)}function IN(t,e,n,r,i,o){for(let c=0;c<r.length;c++)cv(jf(n,e),t,r[c].type);!function X6(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const d=r[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=Cl(t,e,r.length,null);for(let c=0;c<r.length;c++){const d=r[c];n.mergedAttrs=Xc(n.mergedAttrs,d.hostAttrs),Z6(t,n,e,u,d),J6(u,d,i),null!==d.contentQueries&&(n.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=64);const h=d.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function j6(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let u=null,c=null;for(let d=e.directiveStart;d<i;d++){const h=o[d],p=n?n.get(h):null,_=p?p.outputs:null;u=yN(0,h.inputs,d,u,p?p.inputs:null),c=yN(1,h.outputs,d,c,_);const I=null===u||null===s||Py(e)?null:n9(u,d,s);a.push(I)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,o)}function EN(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function EW(){return se.lFrame.currentDirectiveIndex}();try{cs(o);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];Zy(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&K6(u,c)}}finally{cs(-1),Zy(s)}}function K6(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function tI(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function J6(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sr(e)&&(n[""]=t)}}function Z6(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=rs(i.type)),s=new cl(o,Sr(i),$);t.blueprint[r]=s,n[r]=s,function z6(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function q6(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Cl(t,n,i.hostVars,he),i)}function t9(t,e,n,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)pN(r,n,s[a++],s[a++],s[a++],s[a++])}function n9(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function wN(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function TN(t,e){const n=t.contentQueries;if(null!==n){const r=ge(null);try{for(let i=0;i<n.length;i+=2){const s=n[i+1];if(-1!==s){const a=t.data[s];Vf(n[i]),a.contentQueries(2,e[s],s)}}}finally{ge(r)}}}function dp(t,e){return t[el]?t[aP][br]=e:t[el]=e,t[aP]=e,e}function rI(t,e,n){Vf(0);const r=ge(null);try{e(t,n)}finally{ge(r)}}function hp(t,e){const n=t[Ot],r=n?n.get(Kr,null):null;r&&r.handleError(e)}function iI(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=n[o++];pN(t.data[s],e[s],r,a,u,i)}}function r9(t,e){const n=er(e,t),r=n[H];!function i9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[st];null!==i&&null===n[Zn]&&(n[Zn]=Av(i,n[Ot])),oI(r,n,n[qe])}function oI(t,e,n){nv(e);try{const r=t.viewQuery;null!==r&&rI(1,r,n);const i=t.template;null!==i&&gN(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ei]?.finishViewCreation(t),t.staticContentQueries&&TN(t,e),t.staticViewQueries&&rI(2,t.viewQuery,n);const o=t.components;null!==o&&function o9(t,e){for(let n=0;n<e.length;n++)r9(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,rv()}}function bl(t,e,n,r){const i=ge(null);try{const o=e.tView,u=lp(t,o,n,4096&t[te]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[tl]=t[e.index];const d=t[Ei];return null!==d&&(u[Ei]=d.createEmbeddedView(o)),oI(o,u,n),u}finally{ge(i)}}function AN(t,e){const n=Dt+e;if(n<t.length)return t[n]}function qa(t,e){return!e||null===e.firstChild||zf(t)}function Al(t,e,n,r=!0){const i=e[H];if(function T6(t,e,n,r){const i=Dt+r,o=n.length;r>0&&(n[i-1][br]=e),r<o-Dt?(e[br]=n[i],$R(n,Dt+r,e)):(n.push(e),e[br]=null),e[Tt]=n;const s=e[tl];null!==s&&n!==s&&function D6(t,e){const n=t[Sa];e[pt]!==e[Tt][Tt][pt]&&(t[te]|=By.HasTransplantedViews),null===n?t[Sa]=[e]:n.push(e)}(s,e);const a=e[Ei];null!==a&&a.insertView(t),Qy(e),e[te]|=128}(i,e,t,n),r){const s=Wv(n,t),a=e[oe],u=ap(a,t[$r]);null!==u&&function E6(t,e,n,r,i,o){r[st]=i,r[ln]=e,cp(t,r,n,1,i,o)}(i,t[ln],a,e,u,s)}const o=e[Zn];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function sI(t,e){const n=wl(t,e);return void 0!==n&&sp(n[H],n),n}function Sl(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];null!==o&&r.push(Ue(o)),hn(o)&&SN(o,r);const s=n.type;if(8&s)Sl(t,e,n.child,r);else if(32&s){const a=jv(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=aN(e,n);if(Array.isArray(a))r.push(...a);else{const u=us(e[pt]);Sl(u[H],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function SN(t,e){for(let n=Dt;n<t.length;n++){const r=t[n],i=r[H].firstChild;null!==i&&Sl(r[H],r,i,e)}t[$r]!==t[st]&&e.push(t[$r])}let RN=[];const c9={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{sl(t.lView)},consumerOnSignalRead(){this.lView[ss]=this}},PN=100;function fp(t,e=!0,n=0){const r=t[Ar],i=r.rendererFactory;i.begin?.();try{!function l9(t,e){aI(t,e);let n=0;for(;Ky(t);){if(n===PN)throw new L(103,!1);n++,aI(t,1)}}(t,n)}catch(s){throw e&&hp(t,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function d9(t,e,n,r){const i=e[te];if(!(256&~i))return;e[Ar].inlineEffectRunner?.flush(),nv(e);let s=null,a=null;(function h9(t){return 2!==t.type})(t)&&(a=function s9(t){return t[ss]??function a9(t){const e=RN.pop()??Object.create(c9);return e.lView=t,e}(t)}(e),s=function fR(t){return t&&(t.nextProducerIndex=0),ge(t)}(a));try{vP(e),function CP(t){return se.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&gN(t,e,n,2,r);const u=!(3&~i);if(u){const h=t.preOrderCheckHooks;null!==h&&Lf(e,h,null)}else{const h=t.preOrderHooks;null!==h&&Uf(e,h,0,null),iv(e,0)}if(function f9(t){for(let e=dM(t);null!==e;e=hM(e)){if(!(e[te]&By.HasTransplantedViews))continue;const n=e[Sa];for(let r=0;r<n.length;r++){cW(n[r])}}}(e),MN(e,0),null!==t.contentQueries&&TN(t,e),u){const h=t.contentCheckHooks;null!==h&&Lf(e,h)}else{const h=t.contentHooks;null!==h&&Uf(e,h,1),iv(e,1)}!function x6(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)cs(~i);else{const o=i,s=n[++r],a=n[++r];IW(s,o),a(2,e[o])}}}finally{cs(-1)}}(t,e);const c=t.components;null!==c&&xN(e,c,0);const d=t.viewQuery;if(null!==d&&rI(2,d,r),u){const h=t.viewCheckHooks;null!==h&&Lf(e,h)}else{const h=t.viewHooks;null!==h&&Uf(e,h,2),iv(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Nf]){for(const h of e[Nf])h();e[Nf]=null}e[te]&=-73}catch(u){throw sl(e),u}finally{null!==a&&(function pR(t,e){if(ge(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Wc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cf(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(a,s),function u9(t){t.lView[ss]!==t&&(t.lView=null,RN.push(t))}(a)),rv()}}function MN(t,e){for(let n=dM(t);null!==n;n=hM(n))for(let r=Dt;r<n.length;r++)NN(n[r],e)}function p9(t,e,n){NN(er(e,t),n)}function NN(t,e){Wy(t)&&aI(t,e)}function aI(t,e){const r=t[H],i=t[te],o=t[ss];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!ey(o)),o&&(o.dirty=!1),t[te]&=-9217,s)d9(r,t,r.template,t[qe]);else if(8192&i){MN(t,1);const a=r.components;null!==a&&xN(t,a,1)}}function xN(t,e,n){for(let r=0;r<e.length;r++)p9(t,e[r],n)}function Rl(t){for(t[Ar].changeDetectionScheduler?.notify();t;){t[te]|=64;const e=us(t);if($y(t)&&!e)return t;t=e}return null}class Pl{get rootNodes(){const e=this._lView,n=e[H];return Sl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qe]}set context(e){this._lView[qe]=e}get destroyed(){return!(256&~this._lView[te])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Tt];if(hn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(wl(e,r),wf(n,r))}this._attachedToViewContainer=!1}sp(this._lView[H],this._lView)}onDestroy(e){kf(this._lView,e)}markForCheck(){Rl(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Qy(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,fp(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,XM(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e,Qy(this._lView)}}let UN=()=>null;function Wa(t,e){return UN(t,e)}class fI{}class j9{}class BN{}class H9{resolveComponentFactory(e){throw function $9(t){const e=Error(`No component factory found for ${Bt(t)}.`);return e.ngComponent=t,e}(e)}}let vp=(()=>{class t{static{this.NULL=new H9}}return t})();class $N{}let Ai=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function G9(){const t=V(),n=er(ke().index,t);return(dn(n)?n:t)[oe]}()}}return t})(),z9=(()=>{class t{static{this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>null})}}return t})();const pI={},HN=new Set;function Yr(t){HN.has(t)||(HN.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function GN(...t){}class Ie{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vt(!1),this.onMicrotaskEmpty=new vt(!1),this.onStable=new vt(!1),this.onError=new vt(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function q9(){const t="function"==typeof Ne.requestAnimationFrame;let e=Ne[t?"requestAnimationFrame":"setTimeout"],n=Ne[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function Q9(t){const e=()=>{!function K9(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ne,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mI(t),t.isCheckStableRunning=!0,gI(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mI(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function Y9(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return zN(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),qN(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return zN(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),qN(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,mI(t),gI(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ie.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(Ie.isInAngularZone())throw new L(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,W9,GN,GN);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const W9={};function gI(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mI(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function zN(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function qN(t){t._nesting--,gI(t)}var hs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(hs||{});const KN={destroy(){}};function yI(t,e){!e&&function Pf(t){if(!oP())throw new L(-203,!1)}();const n=e?.injector??j(Ct);if(!function Pr(t){return"browser"===(t??j(Ct)).get(fo)}(n))return KN;Yr("NgAfterNextRender");const r=n.get(kl),i=r.handler??=new YN,o=e?.phase??hs.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Va).onDestroy(s),u=Ii(n,()=>new QN(o,()=>{s(),t()}));return i.register(u),{destroy:s}}class QN{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=j(Ie),this.errorHandler=j(Kr,{optional:!0}),j(fI,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class YN{constructor(){this.executingCallbacks=!1,this.buckets={[hs.EarlyRead]:new Set,[hs.Write]:new Set,[hs.MixedReadWrite]:new Set,[hs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let kl=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>new t})}}return t})();function Ep(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=fy(i,a):2==o&&(r=fy(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class ZN extends vp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=me(e);return new Ll(n,this.ngModule)}}function ex(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}class wp{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=If(r);const i=this.injector.get(e,pI,r);return i!==pI||n===pI?i:this.parentInjector.get(e,n,r)}}class Ll extends BN{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=ex(e.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ex(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function A4(t){return t.map(b4).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const o=ge(null);try{let s=(i=i||this.ngModule)instanceof $n?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new wp(e,s):e,u=a.get($N,null);if(null===u)throw new L(407,!1);const c=a.get(z9,null),p={rendererFactory:u,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(kl,null),changeDetectionScheduler:a.get(fI,null)},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",I=r?function k6(t,e,n,r){const o=r.get(SM,!1)||n===Tr.ShadowDom,s=t.selectRootElement(e,o);return function V6(t){_N(t)}(s),s}(m,r,this.componentDef.encapsulation,a):op(m,_,function t5(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_));let E=512;this.componentDef.signals?E|=4096:this.componentDef.onPush||(E|=16);let b=null;null!==I&&(b=Av(I,a,!0));const A=Zv(0,null,null,1,0,null,null,null,null,null,null),O=lp(null,A,null,E,null,null,p,m,a,null,b);let F,K;nv(O);try{const Q=this.componentDef;let C,w=null;Q.findHostDirectiveDefs?(C=[],w=new Map,Q.findHostDirectiveDefs(Q,C,w),C.push(Q)):C=[Q];const T=function r5(t,e){const n=t[H],r=de;return t[r]=e,za(n,r,2,"#host",null)}(O,I),S=function i5(t,e,n,r,i,o,s){const a=i[H];!function o5(t,e,n,r){for(const i of t)e.mergedAttrs=Xc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Ep(e,e.mergedAttrs,!0),null!==n&&dN(r,n,e))}(r,t,e,s);let u=null;null!==e&&(u=Av(e,i[Ot]));const c=o.rendererFactory.createRenderer(e,n);let d=16;n.signals?d=4096:n.onPush&&(d=64);const h=lp(i,mN(n),null,d,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&tI(a,t,r.length-1),dp(i,h),i[t.index]=h}(T,I,Q,C,O,p,m);K=ol(A,de),I&&function a5(t,e,n,r){if(r)Ry(t,n,["ng-version","17.3.12"]);else{const{attrs:i,classes:o}=function S4(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Dr(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Ry(t,n,i),o&&o.length>0&&lN(t,n,o.join(" "))}}(m,Q,I,r),void 0!==n&&function u5(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(K,this.ngContentSelectors,n),F=function s5(t,e,n,r,i,o){const s=ke(),a=i[H],u=An(s,i);IN(a,i,s,n,null,r);for(let d=0;d<n.length;d++)pn(ls(i,a,s.directiveStart+d,s),i);EN(a,i,s),u&&pn(u,i);const c=ls(i,a,s.directiveStart+s.componentOffset,s);if(t[qe]=i[qe]=c,null!==o)for(const d of o)d(c,e);return Yv(a,s,i),c}(S,Q,C,w,O,[c5]),oI(A,O,null)}finally{rv()}return new n5(this.componentType,F,Fa(K,O),O,K)}finally{ge(o)}}}class n5 extends j9{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Pl(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;iI(o[H],o,i,e,n),this.previousInputValues.set(e,n),Rl(er(this._tNode.index,o))}}get injector(){return new Ht(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function c5(){const t=ke();Ff(V()[H],t)}let Mr=(()=>{class t{static{this.__NG_ELEMENT_ID__=l5}}return t})();function l5(){return function rx(t,e){let n;const r=e[t.index];return hn(r)?n=r:(n=wN(r,e,null,t),e[t.index]=n,dp(e,n)),ix(n,e,t,r),new tx(n,t,e)}(ke(),V())}const d5=Mr,tx=class extends d5{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Fa(this._hostTNode,this._hostLView)}get injector(){return new Ht(this._hostTNode,this._hostLView)}get parentInjector(){const e=$f(this._hostTNode,this._hostLView);if(sv(e)){const n=dl(e,this._hostLView),r=ll(e);return new Ht(n[H].data[r+8],n)}return new Ht(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=nx(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Dt}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=Wa(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,qa(this._hostTNode,s)),a}createComponent(e,n,r,i,o){const s=e&&!function Zc(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}const u=s?e:new Ll(me(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const I=(s?c:this.parentInjector).get($n,null);I&&(o=I)}const d=me(u.componentType??{}),h=Wa(this._lContainer,d?.id??null),m=u.create(c,i,h?.firstChild??null,o);return this.insertImpl(m.hostView,a,qa(this._hostTNode,h)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function uW(t){return hn(t[Tt])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[Tt],c=new tx(u,u[ln],u[Tt]);c.detach(c.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;return Al(s,i,o,r),e.attachToViewContainerRef(),$R(EI(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=nx(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=wl(this._lContainer,n);r&&(wf(EI(this._lContainer),n),sp(r[H],r))}detach(e){const n=this._adjustIndex(e,-1),r=wl(this._lContainer,n);return r&&null!=wf(EI(this._lContainer),n)?new Pl(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nx(t){return t[8]}function EI(t){return t[8]||(t[8]=[])}let ix=function sx(t,e,n,r){if(t[$r])return;let i;i=8&n.type?Ue(r):function h5(t,e){const n=t[oe],r=n.createComment(""),i=An(e,t);return ds(n,ap(n,i),r,function S6(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[$r]=i},wI=()=>!1;function mx(t){return function px(t){return"function"==typeof t&&void 0!==t[Xo]}(t)&&"function"==typeof t.set}function Ve(t){let e=function Ax(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Sr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=Dp(t.inputs),s.inputTransforms=Dp(t.inputTransforms),s.declaredInputs=Dp(t.declaredInputs),s.outputs=Dp(t.outputs);const a=i.hostBindings;a&&V5(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&O5(t,u),c&&k5(t,c),N5(t,i),Wq(t.outputs,i.outputs),Sr(i)&&i.data.animation){const d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===Ve&&(n=!1)}}e=Object.getPrototypeOf(e)}!function x5(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xc(i.hostAttrs,n=Xc(n,i.hostAttrs))}}(r)}function N5(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Dp(t){return t===jr?{}:t===Ae?[]:t}function O5(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function k5(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function V5(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}class fs{}class Nx{}class MI extends fs{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZN(this);const i=cn(e);this._bootstrapComponents=nr(i.bootstrap),this._r3Injector=JP(e,n,[{provide:fs,useValue:this},{provide:vp,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class NI extends Nx{constructor(e){super(),this.moduleType=e}create(e){return new MI(this.moduleType,e,[])}}class xx extends fs{constructor(e){super(),this.componentFactoryResolver=new ZN(this),this.instance=null;const n=new wa([...e.providers,{provide:fs,useValue:this},{provide:vp,useValue:this.componentFactoryResolver}],e.parent||Rf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Cp(t,e,n=null){return new xx({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Qa=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new hr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function bt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Si(t,e,n,r,i,o,s,a){const u=V(),c=ye(),d=t+de,h=c.firstCreatePass?function Q5(t,e,n,r,i,o,s,a,u){const c=e.consts,d=za(e,t,4,s||null,Gr(c,a));eI(e,n,d,Gr(c,u)),Ff(e,d);const h=d.tView=Zv(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}(d,c,u,e,n,r,i,o,s):c.data[d];zr(h,!1);const p=Ox(c,u,h,t);ul()&&up(c,u,p,h),pn(p,u);const m=wN(p,u,p,h);return u[d]=m,dp(u,m),function ox(t,e,n){return wI(t,e,n)}(m,h,u),Of(h)&&Jv(c,u,h),null!=s&&Xv(u,h,a),Si}let Ox=function kx(t,e,n,r){return qr(!0),e[oe].createComment("")};function Op(t,e){return t<<17|e<<2}function vo(t){return t>>17&32767}function HI(t){return 2|t}function ms(t){return(131068&t)>>2}function GI(t,e){return-131069&t|e<<2}function zI(t){return 1|t}function hO(t,e,n,r){const i=t[n+1],o=null===e;let s=r?vo(i):ms(i),a=!1;for(;0!==s&&(!1===a||o);){const c=t[s+1];k8(t[s],e)&&(a=!0,t[s+1]=r?zI(c):HI(c)),s=r?vo(c):ms(c)}a&&(t[n+1]=r?HI(i):zI(i))}function k8(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&va(t,e)>=0}function hu(t,e,n){const r=V();return bt(r,Rr(),e)&&Gn(ye(),We(),r,t,e,r[oe],n,!1),hu}function qI(t,e,n,r,i){const s=i?"class":"style";iI(t,n,e.inputs[s],s,r)}function _s(t,e){return function Nr(t,e,n,r){const i=V(),o=ye(),s=function Ti(t){const e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function EO(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fn()],s=function IO(t,e){return e>=t.expandoStartIndex}(t,n);(function CO(t,e){return!!(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function G8(t,e,n,r){const i=function ev(t){const e=se.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=zl(n=WI(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=WI(i,t,e,n,r),null===o){let u=function z8(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ms(r))return t[vo(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=WI(null,t,e,u[1],r),u=zl(u,e.attrs,r),function q8(t,e,n,r){t[vo(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else o=function W8(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=zl(r,t[o].hostAttrs,n);return zl(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function x8(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=vo(s),u=ms(s);t[r]=n;let d,c=!1;if(Array.isArray(n)?(d=n[1],(null===d||va(n,d)>0)&&(c=!0)):d=n,i)if(0!==u){const p=vo(t[a+1]);t[r+1]=Op(p,a),0!==p&&(t[p+1]=GI(t[p+1],r)),t[a+1]=function M8(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Op(a,0),0!==a&&(t[a+1]=GI(t[a+1],r)),a=r;else t[r+1]=Op(u,0),0===a?a=r:t[u+1]=GI(t[u+1],r),u=r;c&&(t[r+1]=HI(t[r+1])),hO(t,d,r,!0),hO(t,d,r,!1),function O8(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&va(o,e)>=0&&(n[r+1]=zI(n[r+1]))}(e,d,t,r,o),s=Op(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==he&&bt(i,s,e)&&function TO(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],d=function N8(t){return!(1&~t)}(c)?DO(u,e,n,i,ms(c),s):void 0;kp(d)||(kp(o)||function P8(t){return!(2&~t)}(c)&&(o=DO(u,null,n,i,a,s)),function M6(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:go.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=go.Important),t.setStyle(n,r,i,o))}}(r,s,il(fn(),n),i,o))}(o,o.data[fn()],i,i[oe],t,i[s+1]=function J8(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Bt(po(t)))),t}(e,n),r,s)}(t,e,null,!0),_s}function WI(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=zl(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function zl(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xn(t,s,!!n||e[++o]))}return void 0===t?null:t}function DO(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),d=c?u[1]:u,h=null===d;let p=n[i+1];p===he&&(p=h?Ae:void 0);let m=h?Ay(p,r):d===r?p:void 0;if(c&&!kp(m)&&(m=Ay(u,r)),kp(m)&&(a=m,s))return a;const _=t[i+1];i=s?vo(_):ms(_)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=Ay(u,r))}return a}function kp(t){return void 0!==t}class u7{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){const s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}}function KI(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function QI(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function bO(t,e,n,r,i){if(QI(t,e,r,n(r,i)))t.updateValue(r,i);else{const o=t.create(r,i);t.attach(r,o)}}function AO(t,e,n,r){const i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}class SO{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}}function fu(t,e,n){Yr("NgControlFlow");const r=V(),i=Rr(),o=YI(r,de+t);if(bt(r,i,e)){const a=ge(null);try{if(sI(o,0),-1!==e){const u=JI(r[H],de+e),c=Wa(o,u.tView.ssrId);Al(o,bl(r,u,n,{dehydratedView:c}),0,qa(u,c))}}finally{ge(a)}}else{const a=AN(o,0);void 0!==a&&(a[qe]=n)}}class l7{constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Dt}}function RO(t,e){return e}class h7{constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}class f7 extends u7{constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Dt}at(e){return this.getLView(e)[qe].$implicit}attach(e,n){const r=n[Zn];this.needsIndexUpdate||=e!==this.length,Al(this.lContainer,n,e,qa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function p7(t,e){return wl(t,e)}(this.lContainer,e)}create(e,n){const r=Wa(this.lContainer,this.templateTNode.tView.ssrId);return bl(this.hostLView,this.templateTNode,new l7(this.lContainer,n,e),{dehydratedView:r})}destroy(e){sp(e[H],e)}updateValue(e,n){this.getLView(e)[qe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[qe].$index=e}getLView(e){return function g7(t,e){return AN(t,e)}(this.lContainer,e)}}function YI(t,e){return t[e]}function JI(t,e){return ol(t,e)}function xe(t,e,n,r){const i=V(),o=ye(),s=de+t,a=i[oe],u=o.firstCreatePass?function m7(t,e,n,r,i,o){const s=e.consts,u=za(e,t,2,r,Gr(s,i));return eI(e,n,u,Gr(s,o)),null!==u.attrs&&Ep(u,u.attrs,!1),null!==u.mergedAttrs&&Ep(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,e,n,r):o.data[s],c=NO(o,i,u,a,e,t);i[s]=c;const d=Of(u);return zr(u,!0),dN(a,c,u),!function jl(t){return!(32&~t.flags)}(u)&&ul()&&up(o,i,c,u),0===function lW(){return se.lFrame.elementDepthCount}()&&pn(c,i),function dW(){se.lFrame.elementDepthCount++}(),d&&(Jv(o,i,u),Yv(o,u,i)),null!==r&&Xv(i,u),xe}function et(){let t=ke();Jy()?function Xy(){se.lFrame.isParent=!1}():(t=t.parent,zr(t,!1));const e=t;(function fW(t){return se.skipHydrationRootTNode===t})(e)&&function _W(){se.skipHydrationRootTNode=null}(),function hW(){se.lFrame.elementDepthCount--}();const n=ye();return n.firstCreatePass&&(Ff(n,t),jy(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function NW(t){return!!(8&t.flags)}(e)&&qI(n,e,V(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function xW(t){return!!(16&t.flags)}(e)&&qI(n,e,V(),e.stylesWithoutHost,!1),et}function Rn(t,e,n,r){return xe(t,e,n,r),et(),Rn}let NO=(t,e,n,r,i,o)=>(qr(!0),op(r,i,function NP(){return se.lFrame.currentNamespace}()));function eE(){return V()}const gu="en-US";let UO=gu;function nn(t,e,n,r){const i=V(),o=ye(),s=ke();return rE(o,i,i[oe],s,t,e,r),nn}function rE(t,e,n,r,i,o,s){const a=Of(r),c=t.firstCreatePass&&function CN(t){return t.cleanup||(t.cleanup=[])}(t),d=e[qe],h=function DN(t){return t[Ca]||(t[Ca]=[])}(e);let p=!0;if(3&r.type||s){const I=An(r,e),E=s?s(I):I,b=h.length,A=s?F=>s(Ue(F[r.index])):r.index;let O=null;if(!s&&a&&(O=function IK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[Ca],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==O)(O.__ngLastListenerFn__||O).__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,p=!1;else{o=fk(r,e,d,o,!1);const F=n.listen(E,i,o);h.push(o,F),c&&c.push(i,A,b,b+1)}}else o=fk(r,e,d,o,!1);const m=r.outputs;let _;if(p&&null!==m&&(_=m[i])){const I=_.length;if(I)for(let E=0;E<I;E+=2){const K=e[_[E]][_[E+1]].subscribe(o),Q=h.length;h.push(o,K),c&&c.push(i,r.index,Q,-(Q+1))}}}function hk(t,e,n,r){const i=ge(null);try{return Hr(6,e,n),!1!==n(r)}catch(o){return hp(t,o),!1}finally{Hr(7,e,n),ge(i)}}function fk(t,e,n,r,i){return function o(s){if(s===Function)return r;Rl(t.componentOffset>-1?er(t.index,e):e);let u=hk(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=hk(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function vs(t=1){return function TW(t){return(se.lFrame.contextLView=function IP(t,e){for(;t>0;)e=e[ba],t--;return e}(t,se.lFrame.contextLView))[qe]}(t)}function Or(t,e=""){const n=V(),r=ye(),i=t+de,o=r.firstCreatePass?za(r,i,1,e,null):r.data[i],s=Vk(r,n,o,e,t);n[i]=s,ul()&&up(r,n,s,o),zr(o,!1)}let Vk=(t,e,n,r,i)=>(qr(!0),function $v(t,e){return t.createText(e)}(e[oe],r));function Io(t,e,n){const r=V(),i=function ru(t,e,n,r){return bt(t,Rr(),n)?e+le(n)+r:he}(r,t,e,n);return i!==he&&function Ci(t,e,n){const r=il(e,t);!function JM(t,e,n){t.setValue(e,n)}(t[oe],r,n)}(r,fn(),i),Io}function oE(t,e,n){mx(e)&&(e=e());const r=V();return bt(r,Rr(),e)&&Gn(ye(),We(),r,t,e,r[oe],n,!1),oE}function sE(t,e){const n=V(),r=ye(),i=ke();return rE(r,n,n[oe],i,t,e),sE}function aE(t,e,n,r,i){if(t=ie(t),Array.isArray(t))for(let o=0;o<t.length;o++)aE(t[o],e,n,r,i);else{const o=ye(),s=V(),a=ke();let u=os(t)?t:ie(t.provide);const c=iP(t),d=1048575&a.providerIndexes,h=a.directiveStart,p=a.providerIndexes>>20;if(os(t)||!t.multi){const m=new cl(c,i,$),_=cE(u,e,i?d:d+p,h);-1===_?(cv(jf(a,s),o,u),uE(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)):(n[_]=m,s[_]=m)}else{const m=cE(u,e,d+p,h),_=cE(u,e,d,d+p),E=_>=0&&n[_];if(i&&!E||!i&&!(m>=0&&n[m])){cv(jf(a,s),o,u);const b=function HK(t,e,n,r,i){const o=new cl(t,n,$);return o.multi=[],o.index=e,o.componentProviders=0,Wk(o,i,r&&!n),o}(i?$K:jK,n.length,i,r,c);!i&&E&&(n[_].providerFactory=b),uE(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(b),s.push(b)}else uE(o,t,m>-1?m:_,Wk(n[i?_:m],c,!i&&r));!i&&r&&E&&n[_].componentProviders++}}}function uE(t,e,n,r){const i=os(e),o=function k4(t){return!!t.useClass}(e);if(i||o){const u=(o?ie(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const d=c.indexOf(n);-1===d?c.push(n,[r,u]):c[d+1].push(r,u)}else c.push(n,u)}}}function Wk(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function cE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function jK(t,e,n,r){return lE(this.multi,[])}function $K(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=ls(n,n[H],this.providerFactory.index,r);o=a.slice(0,s),lE(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],lE(i,o);return o}function lE(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function at(t,e=[]){return n=>{n.providersResolver=(r,i)=>function BK(t,e,n){const r=ye();if(r.firstCreatePass){const i=Sr(t);aE(n,r.data,r.blueprint,i,!0),aE(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let GK=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=My(0,n.type),i=r.length>0?Cp([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Z({token:t,providedIn:"environment",factory:()=>new t(re($n))})}}return t})();function mu(t){Yr("NgStandalone"),t.getStandaloneInjector=e=>e.get(GK).getOrCreateStandaloneInjector(t)}function Qk(t,e,n,r,i,o){const s=e+n;return bt(t,s,i)?function Jr(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function Xl(t,e){const n=t[e];return n===he?void 0:n}(t,s+1)}function jp(t,e){const n=ye();let r;const i=t+de;n.firstCreatePass?(r=function rQ(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=rs(r.type)),a=Un($);try{const u=Bf(!1),c=o();return Bf(u),function SK(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,V(),i,c),c}finally{Un(a)}}function $p(t,e,n){const r=t+de,i=V(),o=Ra(i,r);return function Zl(t,e){return t[H].data[e].pure}(i,r)?Qk(i,function Sn(){const t=se.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}class vu{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const PQ=new vu("17.3.12");let g1=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const I1=new Y("");function nd(t){return!!t&&"function"==typeof t.then}function E1(t){return!!t&&"function"==typeof t.subscribe}const qp=new Y("");let vE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=j(qp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(nd(o))n.push(o);else if(E1(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Wp=new Y("");let Eo=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(ZP),this.afterRenderEffectManager=j(kl),this.externalTestViews=new Set,this.beforeRender=new dr,this.afterTick=new dr,this.componentTypes=[],this.components=[],this.isStable=j(Qa).hasPendingTasks.pipe(De(n=>!n)),this._injector=j($n)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof BN;if(!this._injector.get(vE).done)throw!i&&function co(t){const e=me(t)||jt(t)||tn(t);return null!==e&&e.standalone}(n),new L(405,!1);let s;s=i?n:this._injector.get(vp).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function rY(t){return t.isBoundToModule}(s)?void 0:this._injector.get(fs),c=s.create(Ct.NULL,[],r||s.selector,a),d=c.location.nativeElement,h=c.injector.get(I1,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Kp(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new L(101,!1);const r=ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,ge(r)}}detectChangesInAttachedViews(n){let r=0;const i=this.afterRenderEffectManager;for(;;){if(r===PN)throw new L(103,!1);if(n){const o=0===r;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)oY(s,o,a)}if(r++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>IE(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>IE(o))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Kp(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Wp,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Kp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new L(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Kp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function oY(t,e,n){!e&&!IE(t)||function sY(t,e,n){let r;n?(r=0,t[te]|=1024):r=64&t[te]?0:1,fp(t,e,r)}(t,n,e)}function IE(t){return Ky(t)}class aY{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let C1=(()=>{class t{compileModuleSync(n){return new NI(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=nr(cn(n).declarations).reduce((s,a)=>{const u=me(a);return u&&s.push(new Ll(u)),s},[]);return new aY(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),lY=(()=>{class t{constructor(){this.zone=j(Ie),this.applicationRef=j(Eo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function A1(t){return[{provide:Ie,useFactory:t},{provide:is,multi:!0,useFactory:()=>{const e=j(lY,{optional:!0});return()=>e.initialize()}},{provide:is,multi:!0,useFactory:()=>{const e=j(fY);return()=>{e.initialize()}}},{provide:ZP,useFactory:dY}]}function dY(){const t=j(Ie),e=j(Kr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function hY(t){return Cr([[],A1(()=>new Ie(function S1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}(t)))])}let fY=(()=>{class t{constructor(){this.subscription=new bn,this.initialized=!1,this.zone=j(Ie),this.pendingTasks=j(Qa)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Ri=new Y("",{providedIn:"root",factory:()=>j(Ri,_e.Optional|_e.SkipSelf)||function pY(){return typeof $localize<"u"&&$localize.locale||gu}()}),EE=new Y("");let wo=null;let rd=(()=>{class t{static{this.__NG_ELEMENT_ID__=IY}}return t})();function IY(t){return function EY(t,e,n){if(as(t)&&!n){const r=er(t.index,e);return new Pl(r,r)}return 47&t.type?new Pl(e[pt],e):null}(ke(),V(),!(16&~t))}function WY(t){try{const{rootComponent:e,appProviders:n,platformProviders:r}=t,i=function vY(t=[]){if(wo)return wo;const e=function M1(t=[],e){return Ct.create({name:e,providers:[{provide:Oy,useValue:"platform"},{provide:EE,useValue:new Set([()=>wo=null])},...t]})}(t);return wo=e,function w1(){!function Pq(t){yR=t}(()=>{throw new L(600,!1)})}(),function N1(t){t.get(EM,null)?.forEach(n=>n())}(e),e}(r),o=[hY(),...n||[]],a=new xx({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(Ie);return u.run(()=>{a.resolveInjectorInitializers();const c=a.get(Kr,null);let d;u.runOutsideAngular(()=>{d=u.onError.subscribe({next:m=>{c.handleError(m)}})});const h=()=>a.destroy(),p=i.get(EE);return p.add(h),a.onDestroy(()=>{d.unsubscribe(),p.delete(h)}),function T1(t,e,n){try{const r=n();return nd(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(c,u,()=>{const m=a.get(vE);return m.runInitializers(),m.donePromise.then(()=>{!function BO(t){"string"==typeof t&&(UO=t.toLowerCase().replace(/_/g,"-"))}(a.get(Ri,gu)||gu);const I=a.get(Eo);return void 0!==e&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}function lV(t){const e=ge(null);try{return t()}finally{ge(e)}}let dV=null;function To(){return dV}class mJ{}const gr=new Y("");let PE=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(yJ),providedIn:"platform"})}}return t})();const _J=new Y("");let yJ=(()=>{class t extends PE{constructor(){super(),this._doc=j(gr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return To().getBaseHref(this._doc)}onPopState(n){const r=To().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=To().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function ME(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function hV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Pi(t){return t&&"?"!==t[0]?"?"+t:t}let Es=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(pV),providedIn:"root"})}}return t})();const fV=new Y("");let pV=(()=>{class t extends Es{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ME(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Pi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Pi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Pi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(re(PE),re(fV,8))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),vJ=(()=>{class t extends Es{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=ME(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Pi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Pi(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(re(PE),re(fV,8))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})(),sd=(()=>{class t{constructor(n){this._subject=new vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function wJ(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(hV(gV(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Pi(r))}normalize(n){return t.stripTrailingSlash(function EJ(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,gV(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Pi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Pi}static{this.joinWithSlash=ME}static{this.stripTrailingSlash=hV}static{this.\u0275fac=function(r){return new(r||t)(re(Es))}}static{this.\u0275prov=Z({token:t,factory:()=>function IJ(){return new sd(re(Es))}(),providedIn:"root"})}}return t})();function gV(t){return t.replace(/\/index.html$/,"")}class mX{createSubscription(e,n){return lV(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){lV(()=>e.unsubscribe())}}class _X{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const yX=new _X,vX=new mX;let GE=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(nd(n))return yX;if(E1(n))return vX;throw function Vr(t,e){return new L(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||t)($(rd,16))}}static{this.\u0275pipe=jn({name:"async",type:t,pure:!1,standalone:!0})}}return t})(),FX=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ea({type:t})}static{this.\u0275inj=ns({})}}return t})();const PV="browser";function MV(t){return"server"===t}let $X=(()=>{class t{static{this.\u0275prov=Z({token:t,providedIn:"root",factory:()=>function jX(t){return t===PV}(j(fo))?new HX(j(gr),window):new zX})}}return t})();class HX{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function GX(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class zX{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class IZ extends mJ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class KE extends IZ{static makeCurrent(){!function gJ(t){dV??=t}(new KE)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function EZ(){return ld=ld||document.querySelector("base"),ld?ld.getAttribute("href"):null}();return null==n?null:function wZ(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){ld=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sX(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let ld=null,DZ=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();const QE=new Y("");let BV=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(re(QE),re(Ie))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();class jV{constructor(e){this._doc=e}}const YE="ng-app-id";let $V=(()=>{class t{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=MV(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${YE}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(YE),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(YE,this.appId),n.appendChild(s),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(re(gr),re(vv),re(wM,8),re(fo))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();const JE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XE=/%COMP%/g,SZ=new Y("",{providedIn:"root",factory:()=>!0});function GV(t,e){return e.map(n=>n.replace(XE,t))}let zV=(()=>{class t{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=MV(a),this.defaultRenderer=new ZE(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tr.ShadowDom&&(r={...r,encapsulation:Tr.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof WV?i.applyToHost(n):i instanceof ew&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Tr.Emulated:o=new WV(u,c,r,this.appId,d,s,a,h);break;case Tr.ShadowDom:return new NZ(u,c,n,r,s,a,this.nonce,h);default:o=new ew(u,c,r,d,s,a,h)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(re(BV),re($V),re(vv),re(SZ),re(gr),re(fo),re(Ie),re(wM))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();class ZE{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(JE[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qV(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qV(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=JE[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=JE[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(go.DashCase|go.Important)?e.style.setProperty(n,r,i&go.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&go.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=To().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function qV(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class NZ extends ZE{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=GV(i.id,i.styles);for(const d of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ew extends ZE{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?GV(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class WV extends ew{constructor(e,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=function RZ(t){return"_ngcontent-%COMP%".replace(XE,t)}(c),this.hostAttr=function PZ(t){return"_nghost-%COMP%".replace(XE,t)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}const KV=["alt","control","meta","shift"],OZ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kZ={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};function QV(t){return{appProviders:[...HZ,...t?.providers??[]],platformProviders:jZ}}const jZ=[{provide:fo,useValue:PV},{provide:EM,useValue:function LZ(){KE.makeCurrent()},multi:!0},{provide:gr,useFactory:function BZ(){return function I3(t){yv=t}(document),document},deps:[]}],HZ=[{provide:Oy,useValue:"root"},{provide:Kr,useFactory:function UZ(){return new Kr},deps:[]},{provide:QE,useClass:(()=>{class t extends jV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(re(gr))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[gr,Ie,fo]},{provide:QE,useClass:(()=>{class t extends jV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),KV.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=OZ[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),KV.forEach(s=>{s!==i&&(0,kZ[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(re(gr))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})(),multi:!0,deps:[gr]},zV,$V,BV,{provide:$N,useExisting:zV},{provide:class qX{},useClass:DZ,deps:[]},[]];let GZ=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(re(gr))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const ZV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},eF={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let p=(15&a)<<2|c>>6,m=63&c;u||(m=64,s||(p=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==h)throw new JZ;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==h&&r.push(c<<6&192|h))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yg=function(t){return function(t){const e=ZV(t);return eF.encodeByteArray(e,!0)}(t).replace(/\./g,"")},vg=function(t){try{return eF.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Ig=()=>{try{return function eee(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vg(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},nF=t=>{var e,n;return null===(n=null===(e=Ig())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},nw=t=>{const e=nF(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rF=()=>{var t;return null===(t=Ig())||void 0===t?void 0:t.config},iF=t=>{var e;return null===(e=Ig())||void 0===e?void 0:e[`_${t}`]};class oF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function sF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yg(JSON.stringify({alg:"none",type:"JWT"})),yg(JSON.stringify(s)),""].join(".")}function Rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function rw(){try{return"object"==typeof indexedDB}catch{return!1}}function uF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ws.prototype.create)}}class ws{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function fee(t,e){return t.replace(pee,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new yr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const pee=/\{\$([^}]+)}/g;function Tu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(lF(o)&&lF(s)){if(!Tu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lF(t){return null!==t&&"object"==typeof t}function hd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class _ee{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function yee(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=iw),void 0===i.error&&(i.error=iw),void 0===i.complete&&(i.complete=iw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iw(){}function Fe(t){return t&&t._delegate?t._delegate:t}class or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ts="[DEFAULT]";class Dee{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function bee(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ts?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Aee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Dee(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const sw=[];var Ee=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Ee||{});const dF={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},See=Ee.INFO,Ree={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},Pee=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=Ree[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class aw{constructor(e){this.name=e,this._logLevel=See,this._logHandler=Pee,this._userLogHandler=null,sw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?dF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const Mee=(t,e)=>e.some(n=>t instanceof n);let hF,fF;const pF=new WeakMap,uw=new WeakMap,gF=new WeakMap,cw=new WeakMap,lw=new WeakMap;let dw={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return uw.get(t);if("objectStoreNames"===e)return t.objectStoreNames||gF.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Lee(t){return"function"==typeof t?function Fee(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function xee(){return fF||(fF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(hw(this),e),xi(pF.get(this))}:function(...e){return xi(t.apply(hw(this),e))}:function(e,...n){const r=t.call(hw(this),e,...n);return gF.set(r,e.sort?e.sort():[e]),xi(r)}}(t):(t instanceof IDBTransaction&&function kee(t){if(uw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});uw.set(t,e)}(t),Mee(t,function Nee(){return hF||(hF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,dw):t)}function xi(t){if(t instanceof IDBRequest)return function Oee(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(xi(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&pF.set(n,t)}).catch(()=>{}),lw.set(e,t),e}(t);if(cw.has(t))return cw.get(t);const e=Lee(t);return e!==t&&(cw.set(t,e),lw.set(e,t)),e}const hw=t=>lw.get(t);function wg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=xi(s);return r&&s.addEventListener("upgradeneeded",u=>{r(xi(s.result),u.oldVersion,u.newVersion,xi(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function fw(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),xi(n).then(()=>{})}const Uee=["get","getKey","getAll","getAllKeys","count"],Bee=["put","add","delete","clear"],pw=new Map;function mF(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(pw.get(e))return pw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Bee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Uee.includes(n))return;const o=function(){var s=v(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[n](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return pw.set(e,o),o}!function Vee(t){dw=t(dw)}(t=>({...t,get:(e,n,r)=>mF(e,n)||t.get(e,n,r),has:(e,n)=>!!mF(e,n)||t.has(e,n)}));class jee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function $ee(t){const e=t.getComponent();return"VERSION"===e?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Tg="@firebase/app",gw="0.10.13",Oi=new aw("@firebase/app"),Dg="[DEFAULT]",mte={[Tg]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ds=new Map,fd=new Map,pd=new Map;function _F(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vr(t){const e=t.name;if(pd.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;pd.set(e,t);for(const n of Ds.values())_F(n,t);for(const n of fd.values())_F(n,t);return!0}function ki(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vi(t){return void 0!==t.settings}const Ir=new ws("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class yF{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const Cs="10.14.1";function vF(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Dg,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ir.create("bad-app-name",{appName:String(i)});if(n||(n=rF()),!n)throw Ir.create("no-options");const o=Ds.get(i);if(o){if(Tu(n,o.options)&&Tu(r,o.config))return o;throw Ir.create("duplicate-app",{appName:i})}const s=new Aee(i);for(const u of pd.values())s.addComponent(u);const a=new yF(n,r,s);return Ds.set(i,a),a}function Du(t=Dg){const e=Ds.get(t);if(!e&&t===Dg&&rF())return vF();if(!e)throw Ir.create("no-app",{appName:t});return e}function IF(){return Array.from(Ds.values())}function tt(t,e,n){var r;let i=null!==(r=mte[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Oi.warn(a.join(" "))}vr(new or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ete="firebase-heartbeat-database",wte=1,gd="firebase-heartbeat-store";let _w=null;function EF(){return _w||(_w=wg(Ete,wte,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(gd)}catch(n){console.warn(n)}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),_w}function yw(){return(yw=v(function*(t){try{const n=(yield EF()).transaction(gd),r=yield n.objectStore(gd).get(TF(t));return yield n.done,r}catch(e){if(e instanceof yr)Oi.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(n.message)}}})).apply(this,arguments)}function wF(t,e){return vw.apply(this,arguments)}function vw(){return(vw=v(function*(t,e){try{const r=(yield EF()).transaction(gd,"readwrite");yield r.objectStore(gd).put(e,TF(t)),yield r.done}catch(n){if(n instanceof yr)Oi.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n?.message});Oi.warn(r.message)}}})).apply(this,arguments)}function TF(t){return`${t.name}!${t.options.appId}`}class bte{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ste(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return v(function*(){var n,r;try{const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=DF();return null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===s||e._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Oi.warn(i)}})()}getHeartbeatsHeader(){var e=this;return v(function*(){var n;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(n=e._heartbeatsCache)||void 0===n?void 0:n.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=DF(),{heartbeatsToSend:i,unsentEntries:o}=function Ate(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),CF(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),CF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=yg(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s}catch(r){return Oi.warn(r),""}})()}}function DF(){return(new Date).toISOString().substring(0,10)}class Ste{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!rw()&&uF().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Tte(t){return yw.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return wF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return v(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return wF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function CF(t){return yg(JSON.stringify({version:2,heartbeats:t})).length}!function Rte(t){vr(new or("platform-logger",e=>new jee(e),"PRIVATE")),vr(new or("heartbeat",e=>new bte(e),"PRIVATE")),tt(Tg,gw,t),tt(Tg,gw,"esm2017"),tt("fire-js","")}(""),tt("firebase","10.14.1","app");class Nte extends bn{constructor(e,n){super()}schedule(e,n=0){return this}}const Cg={setInterval(t,e,...n){const{delegate:r}=Cg;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Cg;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class bF extends Nte{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Cg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Cg.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,lf(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const AF={now:()=>(AF.delegate||Date).now(),delegate:void 0};class md{constructor(e,n=md.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}md.now=AF.now;class SF extends md{constructor(e,n=md.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const kte=new class Ote extends SF{}(class xte extends bF{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),Vte=new SF(bF);function gn(t,e,n){const r=Xe(t)||e||n?{next:t,error:e,complete:n}:t;return r?en((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ut(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):ts}function bg(t,e=0){return en((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Fi(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ag(t,e=0){return en((n,r)=>{n.subscribe(Ut(r,i=>Fi(r,t,()=>r.next(i),e),()=>Fi(r,t,()=>r.complete(),e),i=>Fi(r,t,()=>r.error(i),e)))})}const bs=new vu("ANGULARFIRE2_VERSION");function _d(t,e,n){if(e){if(1===e.length)return e[0];const o=e.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const Cu=(t,e)=>{const n=e?[e]:IF(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};class Sg{constructor(){return Cu(Lte)}}const Lte="app-check";function bu(){}class RF{zone;delegate;constructor(e,n=kte){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},n,r)}}class Ute{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bu,{},bu,bu)),n.pipe(gn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Au=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new RF(Zone.current)),this.insideAngular=n.run(()=>new RF(Zone.current,Vte)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(re(Ie))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Su(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function As(t){return Su().ngZone.run(()=>t())}function jte(t){return function $te(t){return function(n){return(n=n.lift(new Ute(t.ngZone))).pipe(bg(t.outsideAngular),Ag(t.insideAngular))}}(Su())(t)}const Hte=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),As(()=>t.apply(void 0,r))},ut=(t,e)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(e&&(n||=As(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bu,{},bu,bu))),r[o]=Hte(r[o],n));const i=function Bte(t){return Su().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof yt){const o=Su();return i.pipe(bg(o.outsideAngular),Ag(o.insideAngular))}return As(()=>i)}return i instanceof yt?i.pipe(jte):i instanceof Promise?As(()=>new Promise((o,s)=>i.then(a=>As(()=>o(a)),a=>As(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:As(()=>i)};class Do{constructor(e){return e}}class Ru{constructor(){return IF()}}const Iw=new Y("angularfire2._apps"),zte={provide:Do,useFactory:function Gte(t){return t&&1===t.length?t[0]:new Do(Du())},deps:[[new ft,Iw]]},qte={provide:Ru,deps:[[new ft,Iw]]};function Wte(t){return(e,n)=>{const r=n.get(fo);tt("angularfire",bs.full,"core"),tt("angularfire",bs.full,"app"),tt("angular",PQ.full,r.toString());const i=e.runOutsideAngular(()=>t(n));return new Do(i)}}const Qte=ut(vF,!0);function Rg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function Co(t){return this instanceof Co?(this.v=t,this):new Co(t)}function xF(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Dw(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=t[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Ene=function OF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},kF=new ws("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pg=new aw("@firebase/auth");function Mg(t,...e){Pg.logLevel<=Ee.ERROR&&Pg.error(`Auth (${Cs}): ${t}`,...e)}function qn(t,...e){throw Aw(t,...e)}function xn(t,...e){return Aw(t,...e)}function bw(t,e,n){const r=Object.assign(Object.assign({},Ene()),{[e]:n});return new ws("auth","Firebase",r).create(e,{appName:t.name})}function Qt(t){return bw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Aw(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kF.create(t,...e)}function G(t,e,...n){if(!t)throw Aw(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mg(e),new Error(e)}function Li(t,e){t||ti(e)}function yd(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function VF(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function Tne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Sw(){return"http:"===VF()||"https:"===VF()}()||function uee(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class vd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=function iee(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}()||function cee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Tne()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rw(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class FF{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},bne=new vd(3e4,6e4);function nt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function rt(t,e,n,r){return Pw.apply(this,arguments)}function Pw(){return(Pw=v(function*(t,e,n,r,i={}){return LF(t,i,v(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=hd(Object.assign({key:t.config.apiKey},s)).slice(1),u=yield t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return function aee(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}()||(c.referrerPolicy="no-referrer"),FF.fetch()(UF(t,t.config.apiHost,n,a),c)}))})).apply(this,arguments)}function LF(t,e,n){return Mw.apply(this,arguments)}function Mw(){return(Mw=v(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Cne),e);try{const i=new Sne(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Id(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Id(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===u)throw Id(t,"email-already-in-use",s);if("USER_DISABLED"===u)throw Id(t,"user-disabled",s);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bw(t,d,c);qn(t,d)}}catch(i){if(i instanceof yr)throw i;qn(t,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function Nw(){return(Nw=v(function*(t,e,n,r,i={}){const o=yield rt(t,e,n,r,i);return"mfaPendingCredential"in o&&qn(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function UF(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Rw(t.config,i):`${t.config.apiScheme}://${i}`}class Sne{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),bne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xn(t,e,r);return i.customData._tokenResponse=n,i}function kw(){return(kw=v(function*(t,e){return rt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function GF(t,e){return Fw.apply(this,arguments)}function Fw(){return(Fw=v(function*(t,e){return rt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Ed(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Lw(){return(Lw=v(function*(t,e=!1){const n=Fe(t),r=yield n.getIdToken(e),i=Ng(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ed(Uw(i.auth_time)),issuedAtTime:Ed(Uw(i.iat)),expirationTime:Ed(Uw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function Uw(t){return 1e3*Number(t)}function Ng(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Mg("JWT malformed, contained fewer than 3 sections"),null;try{const i=vg(n);return i?JSON.parse(i):(Mg("Failed to decode base64 JWT payload"),null)}catch(i){return Mg("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zF(t){const e=Ng(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Bi(t,e){return Bw.apply(this,arguments)}function Bw(){return(Bw=v(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof yr&&function xne({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class One{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield n.iteration()}),r)}iteration(){var e=this;return v(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class jw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ed(this.lastLoginAt),this.creationTime=Ed(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wd(t){return $w.apply(this,arguments)}function $w(){return($w=v(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Bi(t,GF(n,{idToken:r}));G(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?qF(o.providerUserInfo):[],a=function Vne(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,s),d=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new jw(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,h)})).apply(this,arguments)}function Hw(){return(Hw=v(function*(t){const e=Fe(t);yield wd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function qF(t){return t.map(e=>{var{providerId:n}=e,r=Rg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Gw(){return(Gw=v(function*(t,e){const n=yield LF(t,{},v(function*(){const r=hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=UF(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FF.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}function zw(){return(zw=v(function*(t,e){return rt(t,"POST","/v2/accounts:revokeToken",nt(t,e))})).apply(this,arguments)}class Mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(0!==e.length,"internal-error");const n=zF(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){var r=this;return v(function*(){return n||!r.accessToken||r.isExpired?(G(r.refreshToken,e,"user-token-expired"),r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null):r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return v(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function Fne(t,e){return Gw.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Mu;return r&&(G("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(G("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(G("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mu,this.toJSON())}_performRefresh(){return ti("not implemented")}}function bo(t,e){G("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class ji{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new One(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jw(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return v(function*(){const r=yield Bi(n,n.stsTokenManager.getToken(n.auth,e));return G(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function Nne(t){return Lw.apply(this,arguments)}(this,e)}reload(){return function kne(t){return Hw.apply(this,arguments)}(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return v(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield wd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return v(function*(){if(Vi(e.auth.app))return Promise.reject(Qt(e.auth));const n=yield e.getIdToken();return yield Bi(e,function Pne(t,e){return kw.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,c,d;const h=null!==(r=n.displayName)&&void 0!==r?r:void 0,p=null!==(i=n.email)&&void 0!==i?i:void 0,m=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,_=null!==(s=n.photoURL)&&void 0!==s?s:void 0,I=null!==(a=n.tenantId)&&void 0!==a?a:void 0,E=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,b=null!==(c=n.createdAt)&&void 0!==c?c:void 0,A=null!==(d=n.lastLoginAt)&&void 0!==d?d:void 0,{uid:O,emailVerified:F,isAnonymous:K,providerData:Q,stsTokenManager:C}=n;G(O&&C,e,"internal-error");const w=Mu.fromJSON(this.name,C);G("string"==typeof O,e,"internal-error"),bo(h,e.name),bo(p,e.name),G("boolean"==typeof F,e,"internal-error"),G("boolean"==typeof K,e,"internal-error"),bo(m,e.name),bo(_,e.name),bo(I,e.name),bo(E,e.name),bo(b,e.name),bo(A,e.name);const T=new ji({uid:O,auth:e,email:p,emailVerified:F,displayName:h,isAnonymous:K,photoURL:_,phoneNumber:m,tenantId:I,stsTokenManager:w,createdAt:b,lastLoginAt:A});return Q&&Array.isArray(Q)&&(T.providerData=Q.map(S=>Object.assign({},S))),E&&(T._redirectEventId=E),T}static _fromIdTokenResponse(e,n,r=!1){return v(function*(){const i=new Mu;i.updateFromServerResponse(n);const o=new ji({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield wd(o),o})()}static _fromGetAccountInfoResponse(e,n,r){return v(function*(){const i=n.users[0];G(void 0!==i.localId,"internal-error");const o=void 0!==i.providerUserInfo?qF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash||o?.length),a=new Mu;a.updateFromIdToken(r);const u=new ji({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new jw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash||o?.length)};return Object.assign(u,c),u})()}}const WF=new Map;function $i(t){Li(t instanceof Function,"Expected a class definition");let e=WF.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WF.set(t,e),e)}const KF=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(n,r){var i=this;return v(function*(){i.storage[n]=r})()}_get(n){var r=this;return v(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return v(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function xg(t,e,n){return`firebase:${t}:${e}:${n}`}class Nu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=xg(this.userKey,i.apiKey,o),this.fullPersistenceKey=xg("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?ji._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return v(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return v(function*(){if(!n.length)return new Nu($i(KF),e,r);const i=(yield Promise.all(n.map(function(){var c=v(function*(d){if(yield d._isAvailable())return d});return function(d){return c.apply(this,arguments)}}()))).filter(c=>c);let o=i[0]||$i(KF);const s=xg(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=yield c._get(s);if(d){const h=ji._fromJSON(e,d);c!==o&&(a=h),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&u.length?(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(function(){var c=v(function*(d){if(d!==o)try{yield d._remove(s)}catch{}});return function(d){return c.apply(this,arguments)}}())),new Nu(o,e,r)):new Nu(o,e,r)})()}}function QF(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tL(e))return"Blackberry";if(nL(e))return"Webos";if(JF(e))return"Safari";if((e.includes("chrome/")||XF(e))&&!e.includes("edge/"))return"Chrome";if(eL(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function YF(t=Rt()){return/firefox\//i.test(t)}function JF(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XF(t=Rt()){return/crios\//i.test(t)}function ZF(t=Rt()){return/iemobile/i.test(t)}function eL(t=Rt()){return/android/i.test(t)}function tL(t=Rt()){return/blackberry/i.test(t)}function nL(t=Rt()){return/webos/i.test(t)}function qw(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rL(t=Rt()){return qw(t)||eL(t)||nL(t)||tL(t)||/windows phone/i.test(t)||ZF(t)}function iL(t,e=[]){let n;switch(t){case"Browser":n=QF(Rt());break;case"Worker":n=`${QF(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cs}/${r}`}class jne{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return v(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function Ww(){return(Ww=v(function*(t,e={}){return rt(t,"GET","/v2/passwordPolicy",nt(t,e))})).apply(this,arguments)}class Gne{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=s.minPasswordLength)&&void 0!==n?n:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(n=u.meetsMinPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(o=u.containsUppercaseLetter)||void 0===o||o),u.isValid&&(u.isValid=null===(s=u.containsNumericCharacter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){let r;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class zne{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oL(this),this.idTokenSubscription=new oL(this),this.beforeStateQueue=new jne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(v(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Nu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUserFromIdToken(e){var n=this;return v(function*(){try{const r=yield GF(n,{idToken:e}),i=yield ji._fromGetAccountInfoResponse(n,r,e);yield n.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),yield n.directlySetCurrentUser(null)}})()}initializeCurrentUser(e){var n=this;return v(function*(){var r;if(Vi(n.app)){const a=n.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>n.initializeCurrentUserFromIdToken(a).then(u,u))}):n.directlySetCurrentUser(null)}const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=o?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(o=c.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return G(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return v(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return v(function*(){try{yield wd(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Dne(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return v(function*(){if(Vi(n.app))return Promise.reject(Qt(n));const r=e?Fe(e):null;return r&&G(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return v(function*(){if(!r._deleted)return e&&G(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(v(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return v(function*(){return Vi(e.app)?Promise.reject(Qt(e)):(yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0))})()}setPersistence(e){var n=this;return Vi(this.app)?Promise.reject(Qt(this)):this.queue(v(function*(){yield n.assertedPersistence.setPersistence($i(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return v(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const r=n._getPasswordPolicyInternal();return r.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return v(function*(){const n=yield function $ne(t){return Ww.apply(this,arguments)}(e),r=new Gne(n);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ws("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){var n=this;return v(function*(){if(n.currentUser){const r=yield n.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=n.tenantId&&(i.tenantId=n.tenantId),yield function Lne(t,e){return zw.apply(this,arguments)}(n,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return v(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return v(function*(){if(!n.redirectPersistenceManager){const r=e&&$i(e)||n._popupRedirectResolver;G(r,n,"argument-error"),n.redirectPersistenceManager=yield Nu.create(n,[$i(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return v(function*(){var r,i;return n._isInitialized&&(yield n.queue(v(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return v(function*(){if(e===n.currentUser)return n.queue(v(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof n){const u=e.addObserver(n,r,i);return()=>{s=!0,u()}}{const u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){var n=this;return v(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return v(function*(){var n;const r=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return r?.error&&function wne(t,...e){Pg.logLevel<=Ee.WARN&&Pg.warn(`Auth (${Cs}): ${t}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function Pt(t){return Fe(t)}class oL{constructor(e){this.auth=e,this.observer=null,this.addObserver=function mee(t,e){const n=new _ee(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Td={loadJS:()=>v(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sL(t){return`__${t}${Math.floor(1e6*Math.random())}`}function cL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Cd{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}function Hi(t,e){return dT.apply(this,arguments)}function dT(){return(dT=v(function*(t,e){return function Ui(t,e,n,r){return Nw.apply(this,arguments)}(t,"POST","/v1/accounts:signInWithIdp",nt(t,e))})).apply(this,arguments)}class xu extends Cd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Rg(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new xu(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Hi(e,this.buildRequest())}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hi(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hd(n)}return e}}class Gi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fL extends Gi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let wre=(()=>{class t extends fL{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return xu._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})();class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return v(function*(){const o=yield ji._fromIdTokenResponse(e,r,i),s=gL(r);return new Er({user:o,providerId:s,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return v(function*(){yield e._updateTokensIfNecessary(r,!0);const i=gL(r);return new Er({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function gL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Fg extends yr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fg.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fg(e,n,r,i)}}function mL(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Fg._fromErrorAndOperation(t,o,e,r):o})}function ET(){return(ET=v(function*(t,e,n=!1){const r=yield Bi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Er._forOperation(t,"link",r)})).apply(this,arguments)}function TT(){return(TT=v(function*(t,e,n=!1){const{auth:r}=t;if(Vi(r.app))return Promise.reject(Qt(r));const i="reauthenticate";try{const o=yield Bi(t,mL(r,i,e,t),n);G(o.idToken,r,"internal-error");const s=Ng(o.idToken);G(s,r,"internal-error");const{sub:a}=s;return G(t.uid===a,r,"user-mismatch"),Er._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&qn(r,"user-mismatch"),o}})).apply(this,arguments)}function DT(){return(DT=v(function*(t,e,n=!1){if(Vi(t.app))return Promise.reject(Qt(t));const r="signIn",i=yield mL(t,r,e),o=yield Er._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}function wL(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function Fre(t){return Fe(t).signOut()}const Bg="__sak";class TL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bg,"1"),this.storage.removeItem(Bg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Gre=(()=>{class t extends TL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rL(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=n.key;r?this.detachListener():this.stopPolling();const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function Bne(){return function lee(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return v(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return v(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return v(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),DL=(()=>{class t extends TL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let qre=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return v(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,u=r.handlersMap[s];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(u).map(function(){var h=v(function*(p){return p(i.origin,a)});return function(p){return h.apply(this,arguments)}}()),d=yield function zre(t){return Promise.all(t.map(function(){var e=v(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:d})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function jg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Wre{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return v(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const d=jg("",20);o.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(m.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:d,data:n},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Ft(){return window}function tD(){return typeof Ft().WorkerGlobalScope<"u"&&"function"==typeof Ft().importScripts}function nD(){return(nD=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const CL="firebaseLocalStorageDb",$g="firebaseLocalStorage",bL="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hg(t,e){return t.transaction([$g],e?"readwrite":"readonly").objectStore($g)}function rD(){const t=indexedDB.open(CL,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($g,{keyPath:bL})}catch(i){n(i)}}),t.addEventListener("success",v(function*(){const r=t.result;r.objectStoreNames.contains($g)?e(r):(r.close(),yield function Zre(){const t=indexedDB.deleteDatabase(CL);return new Rd(t).toPromise()}(),e(yield rD()))}))})}function AL(t,e,n){return iD.apply(this,arguments)}function iD(){return(iD=v(function*(t,e,n){const r=Hg(t,!0).put({[bL]:e,value:n});return new Rd(r).toPromise()})).apply(this,arguments)}function oD(){return(oD=v(function*(t,e){const n=Hg(t,!1).get(e),r=yield new Rd(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function SL(t,e){const n=Hg(t,!0).delete(e);return new Rd(n).toPromise()}const rie=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return v(function*(){return n.db||(n.db=yield rD()),n.db})()}_withRetries(n){var r=this;return v(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return v(function*(){return tD()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return v(function*(){n.receiver=qre._getInstance(function Jre(){return tD()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=v(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=v(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return v(function*(){var r,i;if(n.activeServiceWorker=yield function Qre(){return nD.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new Wre(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return v(function*(){if(r.sender&&r.activeServiceWorker&&function Yre(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const n=yield rD();return yield AL(n,Bg,"1"),yield SL(n,Bg),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return v(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(o=>AL(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return v(function*(){const i=yield r._withRetries(o=>function eie(t,e){return oD.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(i=>SL(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return v(function*(){const r=yield n._withRetries(s=>{const a=Hg(s,!1).getAll();return new Rd(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Rs(t,e){return e?$i(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}sL("rcb"),new vd(3e4,6e4);class pD extends Cd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yie(t){return function vL(t,e){return DT.apply(this,arguments)}(t.auth,new pD(t),t.bypassAuthState)}function vie(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),function yL(t,e){return TT.apply(this,arguments)}(n,new pD(t),t.bypassAuthState)}function Iie(t){return gD.apply(this,arguments)}function gD(){return(gD=v(function*(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),function IT(t,e){return ET.apply(this,arguments)}(n,new pD(t),t.bypassAuthState)})).apply(this,arguments)}class PL{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=v(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return v(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:u}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(c))}catch(d){n.reject(d)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yie;case"linkViaPopup":case"linkViaRedirect":return Iie;case"reauthViaPopup":case"reauthViaRedirect":return vie;default:qn(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Eie=new vd(2e3,1e4);function wie(t,e,n){return mD.apply(this,arguments)}function mD(){return(mD=v(function*(t,e,n){if(Vi(t.app))return Promise.reject(xn(t,"operation-not-supported-in-this-environment"));const r=Pt(t);!function Pu(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&qn(t,"argument-error"),bw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(t,e,Gi);const i=Rs(r,n);return new vD(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let vD=(()=>{class t extends PL{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var n=this;return v(function*(){const r=yield n.execute();return G(r,n.auth,"internal-error"),r})()}onExecution(){var n=this;return v(function*(){Li(1===n.filter.length,"Popup operations only handle one event");const r=jg();n.authWindow=yield n.resolver._openPopup(n.auth,n.provider,n.filter[0],r),n.authWindow.associatedEvent=r,n.resolver._originValidation(n.auth).catch(i=>{n.reject(i)}),n.resolver._isIframeWebStorageSupported(n.auth,i=>{i||n.reject(xn(n.auth,"web-storage-unsupported"))}),n.pollUserCancellation()})()}get eventId(){var n;return(null===(n=this.authWindow)||void 0===n?void 0:n.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const n=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(n,Eie.get())};n()}}return t.currentPopupAction=null,t})();const Tie="pendingRedirect",Pd=new Map;class Die extends PL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return v(function*(){let r=Pd.get(n.auth._key());if(!r){try{const o=(yield function Cie(t,e){return ID.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Pd.set(n.auth._key(),r)}return n.bypassAuthState||Pd.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return v(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function ID(){return(ID=v(function*(t,e){const n=function NL(t){return xg(Tie,t.config.apiKey,t.name)}(e),r=function ML(t){return $i(t._redirectPersistence)}(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function bie(t,e){Pd.set(t._key(),e)}function xL(t,e){return AD.apply(this,arguments)}function AD(){return(AD=v(function*(t,e,n=!1){if(Vi(t.app))return Promise.reject(Qt(t));const r=Pt(t),i=Rs(r,e),s=yield new Die(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Mie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Nie(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VL(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VL(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kL(e))}saveEventToCache(e){this.cachedEventUids.add(kL(e)),this.lastProcessedEventTime=Date.now()}}function kL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VL({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function RD(){return(RD=v(function*(t,e={}){return rt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Oie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kie=/^https?/;function PD(){return PD=v(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield function xie(t){return RD.apply(this,arguments)}(t);for(const n of e)try{if(Fie(n))return}catch{}qn(t,"unauthorized-domain")}),PD.apply(this,arguments)}function Fie(t){const e=yd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!kie.test(n))return!1;if(Oie.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Lie=new vd(3e4,6e4);function FL(){const t=Ft().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function Uie(t){return new Promise((e,n)=>{var r,i,o;function s(){FL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FL(),n(xn(t,"network-request-failed"))},timeout:Lie.get()})}if(null!==(i=null===(r=Ft().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Ft().gapi)||void 0===o||!o.load){const a=sL("iframefcb");return Ft()[a]=()=>{gapi.load?s():n(xn(t,"network-request-failed"))},function Kw(t){return Td.loadJS(t)}(`${function Qne(){return Td.gapiScript}()}?onload=${a}`).catch(u=>n(u))}s()}}).catch(e=>{throw zg=null,e})}let zg=null;const jie=new vd(5e3,15e3),$ie="__/auth/iframe",Hie="emulator/auth/iframe",Gie={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zie=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qie(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rw(e,Hie):`https://${t.config.authDomain}/${$ie}`,r={apiKey:e.apiKey,appName:t.name,v:Cs},i=zie.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${hd(r).slice(1)}`}function MD(){return MD=v(function*(t){const e=yield function Bie(t){return zg=zg||Uie(t),zg}(t),n=Ft().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:qie(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gie,dontclear:!0},r=>new Promise(function(){var i=v(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=xn(t,"network-request-failed"),u=Ft().setTimeout(()=>{s(a)},jie.get());function c(){Ft().clearTimeout(u),o(r)}r.ping(c).then(c,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),MD.apply(this,arguments)}const Kie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class LL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const toe="__/auth/handler",noe="emulator/auth/handler",roe=encodeURIComponent("fac");function UL(t,e,n,r,i,o){return ND.apply(this,arguments)}function ND(){return(ND=v(function*(t,e,n,r,i,o){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Cs,eventId:i};if(e instanceof Gi){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",function gee(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(o||{}))s[d]=h}if(e instanceof fL){const d=e.getScopes().filter(h=>""!==h);d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))void 0===a[d]&&delete a[d];const u=yield t._getAppCheckToken(),c=u?`#${roe}=${encodeURIComponent(u)}`:"";return`${function ioe({config:t}){return t.emulator?Rw(t,noe):`https://${t.authDomain}/${toe}`}(t)}?${hd(a).slice(1)}${c}`})).apply(this,arguments)}const xD="webStorageSupport",soe=class ooe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DL,this._completeRedirectFn=xL,this._overrideRedirectResult=bie}_openPopup(e,n,r,i){var o=this;return v(function*(){var s;Li(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield UL(e,n,r,yd(),i);return function Zie(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Kie),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Rt().toLowerCase();n&&(a=XF(c)?"_blank":n),YF(c)&&(e=e||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(function Une(t=Rt()){var e;return qw(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function eoe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new LL(null);const h=window.open(e||"",a,d);G(h,t,"popup-blocked");try{h.focus()}catch{}return new LL(h)}(e,a,jg())})()}_openRedirect(e,n,r,i){var o=this;return v(function*(){return yield o._originValidation(e),function Kre(t){Ft().location.href=t}(yield UL(e,n,r,yd(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Li(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return v(function*(){const r=yield function Wie(t){return MD.apply(this,arguments)}(e),i=new Mie(e);return r.register("authEvent",o=>(G(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xD,{type:xD},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[xD];void 0!==s&&n(!!s),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Vie(t){return PD.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rL()||JF()||qw()}};var HL="@firebase/auth";class aoe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return v(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const doe=iF("authIdTokenMaxAge")||300;let zL=null;const hoe=t=>function(){var e=v(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>doe)return;const o=r?.token;zL!==o&&(zL=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function foe(t=Du()){const e=ki(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Zne(t,e){const n=ki(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(Tu(n.getOptions(),e??{}))return i;qn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:soe,persistence:[rie,Gre,DL]}),r=iF("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=hoe(o.toString());(function Vre(t,e,n){Fe(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),wL(n,a=>s(a))}}const i=nF("auth");return i&&function tre(t,e,n){const r=Pt(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=cL(e),{host:s,port:a}=function nre(t){const e=cL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:lL(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:lL(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function rre(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}function qL(t){return new yt(function(e){return{unsubscribe:wL(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}(function qne(t){Td=t})({loadJS:t=>new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=xn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function poe(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function coe(t){vr(new or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iL(t)},c=new zne(r,i,o,u);return function ere(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map($i);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vr(new or("auth-internal",e=>{const n=Pt(e.getProvider("auth").getImmediate());return new aoe(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),tt(HL,"1.7.9",function uoe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(t)),tt(HL,"1.7.9","esm2017")}("Browser");class Md{constructor(e){return e}}class Wg{constructor(){return Cu("auth")}}const kD=new Y("angularfire2.auth-instances");function moe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Md(r)}}const _oe={provide:Wg,deps:[[new ft,kD]]},yoe={provide:Md,useFactory:function goe(t,e){const n=_d("auth",t,e);return n&&new Md(n)},deps:[[new ft,kD],Do]},KL=ut(qL,!0),Ioe=ut(foe,!0),Eoe=ut(wie,!0),woe=ut(Fre,!0);var Ps,JL,QL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YL={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(C,w,T){T||(T=0);var S=Array(16);if("string"==typeof w)for(var R=0;16>R;++R)S[R]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(R=0;16>R;++R)S[R]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;var N=C.g[3],D=(w=C.g[0])+(N^(T=C.g[1])&((R=C.g[2])^N))+S[0]+3614090360&4294967295;D=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=(T=(R=(N=(w=T+(D<<7&4294967295|D>>>25))+((D=N+(R^w&(T^R))+S[1]+3905402710&4294967295)<<12&4294967295|D>>>20))+((D=R+(T^N&(w^T))+S[2]+606105819&4294967295)<<17&4294967295|D>>>15))+((D=T+(w^R&(N^w))+S[3]+3250441966&4294967295)<<22&4294967295|D>>>10))+((D=w+(N^T&(R^N))+S[4]+4118548399&4294967295)<<7&4294967295|D>>>25))+((D=N+(R^w&(T^R))+S[5]+1200080426&4294967295)<<12&4294967295|D>>>20))+((D=R+(T^N&(w^T))+S[6]+2821735955&4294967295)<<17&4294967295|D>>>15))+((D=T+(w^R&(N^w))+S[7]+4249261313&4294967295)<<22&4294967295|D>>>10))+((D=w+(N^T&(R^N))+S[8]+1770035416&4294967295)<<7&4294967295|D>>>25))+((D=N+(R^w&(T^R))+S[9]+2336552879&4294967295)<<12&4294967295|D>>>20))+((D=R+(T^N&(w^T))+S[10]+4294925233&4294967295)<<17&4294967295|D>>>15))+((D=T+(w^R&(N^w))+S[11]+2304563134&4294967295)<<22&4294967295|D>>>10))+((D=w+(N^T&(R^N))+S[12]+1804603682&4294967295)<<7&4294967295|D>>>25))+((D=N+(R^w&(T^R))+S[13]+4254626195&4294967295)<<12&4294967295|D>>>20))+((D=R+(T^N&(w^T))+S[14]+2792965006&4294967295)<<17&4294967295|D>>>15))+((D=T+(w^R&(N^w))+S[15]+1236535329&4294967295)<<22&4294967295|D>>>10))+((D=w+(R^N&(T^R))+S[1]+4129170786&4294967295)<<5&4294967295|D>>>27))+((D=N+(T^R&(w^T))+S[6]+3225465664&4294967295)<<9&4294967295|D>>>23))+((D=R+(w^T&(N^w))+S[11]+643717713&4294967295)<<14&4294967295|D>>>18))+((D=T+(N^w&(R^N))+S[0]+3921069994&4294967295)<<20&4294967295|D>>>12))+((D=w+(R^N&(T^R))+S[5]+3593408605&4294967295)<<5&4294967295|D>>>27))+((D=N+(T^R&(w^T))+S[10]+38016083&4294967295)<<9&4294967295|D>>>23))+((D=R+(w^T&(N^w))+S[15]+3634488961&4294967295)<<14&4294967295|D>>>18))+((D=T+(N^w&(R^N))+S[4]+3889429448&4294967295)<<20&4294967295|D>>>12))+((D=w+(R^N&(T^R))+S[9]+568446438&4294967295)<<5&4294967295|D>>>27))+((D=N+(T^R&(w^T))+S[14]+3275163606&4294967295)<<9&4294967295|D>>>23))+((D=R+(w^T&(N^w))+S[3]+4107603335&4294967295)<<14&4294967295|D>>>18))+((D=T+(N^w&(R^N))+S[8]+1163531501&4294967295)<<20&4294967295|D>>>12))+((D=w+(R^N&(T^R))+S[13]+2850285829&4294967295)<<5&4294967295|D>>>27))+((D=N+(T^R&(w^T))+S[2]+4243563512&4294967295)<<9&4294967295|D>>>23))+((D=R+(w^T&(N^w))+S[7]+1735328473&4294967295)<<14&4294967295|D>>>18))+((D=T+(N^w&(R^N))+S[12]+2368359562&4294967295)<<20&4294967295|D>>>12))+((D=w+(T^R^N)+S[5]+4294588738&4294967295)<<4&4294967295|D>>>28))+((D=N+(w^T^R)+S[8]+2272392833&4294967295)<<11&4294967295|D>>>21))+((D=R+(N^w^T)+S[11]+1839030562&4294967295)<<16&4294967295|D>>>16))+((D=T+(R^N^w)+S[14]+4259657740&4294967295)<<23&4294967295|D>>>9))+((D=w+(T^R^N)+S[1]+2763975236&4294967295)<<4&4294967295|D>>>28))+((D=N+(w^T^R)+S[4]+1272893353&4294967295)<<11&4294967295|D>>>21))+((D=R+(N^w^T)+S[7]+4139469664&4294967295)<<16&4294967295|D>>>16))+((D=T+(R^N^w)+S[10]+3200236656&4294967295)<<23&4294967295|D>>>9))+((D=w+(T^R^N)+S[13]+681279174&4294967295)<<4&4294967295|D>>>28))+((D=N+(w^T^R)+S[0]+3936430074&4294967295)<<11&4294967295|D>>>21))+((D=R+(N^w^T)+S[3]+3572445317&4294967295)<<16&4294967295|D>>>16))+((D=T+(R^N^w)+S[6]+76029189&4294967295)<<23&4294967295|D>>>9))+((D=w+(T^R^N)+S[9]+3654602809&4294967295)<<4&4294967295|D>>>28))+((D=N+(w^T^R)+S[12]+3873151461&4294967295)<<11&4294967295|D>>>21))+((D=R+(N^w^T)+S[15]+530742520&4294967295)<<16&4294967295|D>>>16))+((D=T+(R^N^w)+S[2]+3299628645&4294967295)<<23&4294967295|D>>>9))+((D=w+(R^(T|~N))+S[0]+4096336452&4294967295)<<6&4294967295|D>>>26))+((D=N+(T^(w|~R))+S[7]+1126891415&4294967295)<<10&4294967295|D>>>22))+((D=R+(w^(N|~T))+S[14]+2878612391&4294967295)<<15&4294967295|D>>>17))+((D=T+(N^(R|~w))+S[5]+4237533241&4294967295)<<21&4294967295|D>>>11))+((D=w+(R^(T|~N))+S[12]+1700485571&4294967295)<<6&4294967295|D>>>26))+((D=N+(T^(w|~R))+S[3]+2399980690&4294967295)<<10&4294967295|D>>>22))+((D=R+(w^(N|~T))+S[10]+4293915773&4294967295)<<15&4294967295|D>>>17))+((D=T+(N^(R|~w))+S[1]+2240044497&4294967295)<<21&4294967295|D>>>11))+((D=w+(R^(T|~N))+S[8]+1873313359&4294967295)<<6&4294967295|D>>>26))+((D=N+(T^(w|~R))+S[15]+4264355552&4294967295)<<10&4294967295|D>>>22))+((D=R+(w^(N|~T))+S[6]+2734768916&4294967295)<<15&4294967295|D>>>17))+((D=T+(N^(R|~w))+S[13]+1309151649&4294967295)<<21&4294967295|D>>>11))+((N=(w=T+((D=w+(R^(T|~N))+S[4]+4149444226&4294967295)<<6&4294967295|D>>>26))+((D=N+(T^(w|~R))+S[11]+3174756917&4294967295)<<10&4294967295|D>>>22))^((R=N+((D=R+(w^(N|~T))+S[2]+718787259&4294967295)<<15&4294967295|D>>>17))|~w))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(R+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+N&4294967295}function s(C,w){this.h=w;for(var T=[],S=!0,R=C.length-1;0<=R;R--){var N=0|C[R];S&&N==w||(T[R]=N,S=!1)}this.g=T}(function e(C,w){function T(){}T.prototype=w.prototype,C.D=w.prototype,C.prototype=new T,C.prototype.constructor=C,C.C=function(S,R,N){for(var D=Array(arguments.length-2),io=2;io<arguments.length;io++)D[io-2]=arguments[io];return w.prototype[R].apply(S,D)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(C,w){void 0===w&&(w=C.length);for(var T=w-this.blockSize,S=this.B,R=this.h,N=0;N<w;){if(0==R)for(;N<=T;)i(this,C,N),N+=this.blockSize;if("string"==typeof C){for(;N<w;)if(S[R++]=C.charCodeAt(N++),R==this.blockSize){i(this,S),R=0;break}}else for(;N<w;)if(S[R++]=C[N++],R==this.blockSize){i(this,S),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var T=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=255&T,T/=256;for(this.u(C),C=Array(16),w=T=0;4>w;++w)for(var S=0;32>S;S+=8)C[T++]=this.g[w]>>>S&255;return C};var a={};function u(C){return-128<=C&&128>C?function o(C,w){var T=a;return Object.prototype.hasOwnProperty.call(T,C)?T[C]:T[C]=w(C)}(C,function(w){return new s([0|w],0>w?-1:0)}):new s([0|C],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(c(-C));for(var w=[],T=1,S=0;C>=T;S++)w[S]=C/T|0,T*=4294967296;return new s(w,0)}var h=u(0),p=u(1),m=u(16777216);function _(C){if(0!=C.h)return!1;for(var w=0;w<C.g.length;w++)if(0!=C.g[w])return!1;return!0}function I(C){return-1==C.h}function E(C){for(var w=C.g.length,T=[],S=0;S<w;S++)T[S]=~C.g[S];return new s(T,~C.h).add(p)}function b(C,w){return C.add(E(w))}function A(C,w){for(;(65535&C[w])!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function O(C,w){this.g=C,this.h=w}function F(C,w){if(_(w))throw Error("division by zero");if(_(C))return new O(h,h);if(I(C))return w=F(E(C),w),new O(E(w.g),E(w.h));if(I(w))return w=F(C,E(w)),new O(E(w.g),w.h);if(30<C.g.length){if(I(C)||I(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,S=w;0>=S.l(C);)T=K(T),S=K(S);var R=Q(T,1),N=Q(S,1);for(S=Q(S,2),T=Q(T,2);!_(S);){var D=N.add(S);0>=D.l(C)&&(R=R.add(T),N=D),S=Q(S,1),T=Q(T,1)}return w=b(C,R.j(w)),new O(R,w)}for(R=h;0<=C.l(w);){for(T=Math.max(1,Math.floor(C.m()/w.m())),S=48>=(S=Math.ceil(Math.log(T)/Math.LN2))?1:Math.pow(2,S-48),D=(N=c(T)).j(w);I(D)||0<D.l(C);)D=(N=c(T-=S)).j(w);_(N)&&(N=p),R=R.add(N),C=b(C,D)}return new O(R,C)}function K(C){for(var w=C.g.length+1,T=[],S=0;S<w;S++)T[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(T,C.h)}function Q(C,w){var T=w>>5;w%=32;for(var S=C.g.length-T,R=[],N=0;N<S;N++)R[N]=0<w?C.i(N+T)>>>w|C.i(N+T+1)<<32-w:C.i(N+T);return new s(R,C.h)}(t=s.prototype).m=function(){if(I(this))return-E(this).m();for(var C=0,w=1,T=0;T<this.g.length;T++){var S=this.i(T);C+=(0<=S?S:4294967296+S)*w,w*=4294967296}return C},t.toString=function(C){if(2>(C=C||10)||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(I(this))return"-"+E(this).toString(C);for(var w=c(Math.pow(C,6)),T=this,S="";;){var R=F(T,w).g,N=((0<(T=b(T,R.j(w))).g.length?T.g[0]:T.h)>>>0).toString(C);if(_(T=R))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h},t.l=function(C){return I(C=b(this,C))?-1:_(C)?0:1},t.abs=function(){return I(this)?E(this):this},t.add=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0,R=0;R<=w;R++){var N=S+(65535&this.i(R))+(65535&C.i(R)),D=(N>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);S=D>>>16,T[R]=(D&=65535)<<16|(N&=65535)}return new s(T,-2147483648&T[T.length-1]?-1:0)},t.j=function(C){if(_(this)||_(C))return h;if(I(this))return I(C)?E(this).j(E(C)):E(E(this).j(C));if(I(C))return E(this.j(E(C)));if(0>this.l(m)&&0>C.l(m))return c(this.m()*C.m());for(var w=this.g.length+C.g.length,T=[],S=0;S<2*w;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var R=0;R<C.g.length;R++){var N=this.i(S)>>>16,D=65535&this.i(S),io=C.i(R)>>>16,jh=65535&C.i(R);T[2*S+2*R]+=D*jh,A(T,2*S+2*R),T[2*S+2*R+1]+=N*jh,A(T,2*S+2*R+1),T[2*S+2*R+1]+=D*io,A(T,2*S+2*R+1),T[2*S+2*R+2]+=N*io,A(T,2*S+2*R+2)}for(S=0;S<w;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=w;S<2*w;S++)T[S]=0;return new s(T,0)},t.A=function(C){return F(this,C).h},t.and=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)&C.i(S);return new s(T,this.h&C.h)},t.or=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)|C.i(S);return new s(T,this.h|C.h)},t.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),T=[],S=0;S<w;S++)T[S]=this.i(S)^C.i(S);return new s(T,this.h^C.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JL=YL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=function d(C,w){if(0==C.length)throw Error("number format error: empty string");if(2>(w=w||10)||36<w)throw Error("radix out of range: "+w);if("-"==C.charAt(0))return E(d(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(w,8)),S=h,R=0;R<C.length;R+=8){var N=Math.min(8,C.length-R),D=parseInt(C.substring(R,R+N),w);8>N?(N=c(Math.pow(w,N)),S=S.j(N).add(c(D))):S=(S=S.j(T)).add(c(D))}return S},Ps=YL.Integer=s}).apply(typeof QL<"u"?QL:typeof self<"u"?self:typeof window<"u"?window:{});var XL,Nd,ZL,Qg,VD,eU,tU,nU,Kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l},r=function n(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Kg&&Kg];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}(this);!function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var P=l[y];if(!(P in g))break e;g=g[P]}(f=f(y=g[l=l[l.length-1]]))!=y&&null!=f&&e(g,l,{configurable:!0,writable:!0,value:f})}}("Array.prototype.values",function(l){return l||function(){return function o(l,f){l instanceof String&&(l+="");var g=0,y=!1,P={next:function(){if(!y&&g<l.length){var k=g++;return{value:f(k,l[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}(this,function(f,g){return g})}});var s=s||{},a=this||self;function u(l){var f=typeof l;return"array"==(f="object"!=f?f:l?Array.isArray(l)?"array":f:"null")||"object"==f&&"number"==typeof l.length}function c(l){var f=typeof l;return"object"==f&&null!=l||"function"==f}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),l.apply(f,P)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:h).apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(y,P,k){for(var q=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)q[Ge-2]=arguments[Ge];return f.prototype[P].apply(y,q)}}function I(l){const f=l.length;if(0<f){const g=Array(f);for(let y=0;y<f;y++)g[y]=l[y];return g}return[]}function E(l,f){for(let g=1;g<arguments.length;g++){const y=arguments[g];if(u(y)){const P=l.length||0,k=y.length||0;l.length=P+k;for(let q=0;q<k;q++)l[P+q]=y[q]}else l.push(y)}}function A(l){return/^[\s\xa0]*$/.test(l)}function O(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function F(l){return F[" "](l),l}F[" "]=function(){};var K=!(-1==O().indexOf("Gecko")||-1!=O().toLowerCase().indexOf("webkit")&&-1==O().indexOf("Edge")||-1!=O().indexOf("Trident")||-1!=O().indexOf("MSIE")||-1!=O().indexOf("Edge"));function Q(l,f,g){for(const y in l)f.call(g,l[y],y,l)}function w(l){const f={};for(const g in l)f[g]=l[g];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,f){let g,y;for(let P=1;P<arguments.length;P++){for(g in y=arguments[P],y)l[g]=y[g];for(let k=0;k<T.length;k++)g=T[k],Object.prototype.hasOwnProperty.call(y,g)&&(l[g]=y[g])}}function R(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function N(l){a.setTimeout(()=>{throw l},0)}function D(){var l=L0;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}var jh=new class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}(()=>new G_e,l=>l.reset());class G_e{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let $h,Hh=!1,L0=new class io{constructor(){this.h=this.g=null}add(f,g){const y=jh.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}},wz=()=>{const l=a.Promise.resolve(void 0);$h=()=>{l.then(z_e)}};var z_e=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){N(g)}var f=jh;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Hh=!1};function Ko(){this.s=this.s,this.C=this.C}function wn(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Ko.prototype.s=!1,Ko.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ko.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},wn.prototype.h=function(){this.defaultPrevented=!0};var q_e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Gh(l,f){if(wn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(K){e:{try{F(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else"mouseover"==g?f=l.fromElement:"mouseout"==g&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType="string"==typeof l.pointerType?l.pointerType:W_e[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Gh.aa.h.call(this)}}_(Gh,wn);var W_e={2:"touch",3:"pen",4:"mouse"};Gh.prototype.h=function(){Gh.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var zh="closure_listenable_"+(1e6*Math.random()|0),K_e=0;function Q_e(l,f,g,y,P){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=P,this.key=++K_e,this.da=this.fa=!1}function V_(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function F_(l){this.src=l,this.g={},this.h=0}function U0(l,f){var g=f.type;if(g in l.g){var k,y=l.g[g],P=Array.prototype.indexOf.call(y,f,void 0);(k=0<=P)&&Array.prototype.splice.call(y,P,1),k&&(V_(f),0==l.g[g].length&&(delete l.g[g],l.h--))}}function B0(l,f,g,y){for(var P=0;P<l.length;++P){var k=l[P];if(!k.da&&k.listener==f&&k.capture==!!g&&k.ha==y)return P}return-1}F_.prototype.add=function(l,f,g,y,P){var k=l.toString();(l=this.g[k])||(l=this.g[k]=[],this.h++);var q=B0(l,f,y,P);return-1<q?(f=l[q],g||(f.fa=!1)):((f=new Q_e(f,this.src,k,!!y,P)).fa=g,l.push(f)),f};var j0="closure_lm_"+(1e6*Math.random()|0),$0={};function Tz(l,f,g,y,P){if(y&&y.once)return Cz(l,f,g,y,P);if(Array.isArray(f)){for(var k=0;k<f.length;k++)Tz(l,f[k],g,y,P);return null}return g=q0(g),l&&l[zh]?l.K(f,g,c(y)?!!y.capture:!!y,P):Dz(l,f,g,!1,y,P)}function Dz(l,f,g,y,P,k){if(!f)throw Error("Invalid event type");var q=c(P)?!!P.capture:!!P,Ge=G0(l);if(Ge||(l[j0]=Ge=new F_(l)),(g=Ge.add(f,g,y,q,k)).proxy)return g;if(y=function Y_e(){const f=J_e;return function l(g){return f.call(l.src,l.listener,g)}}(),g.proxy=y,y.src=l,y.listener=g,l.addEventListener)q_e||(P=q),void 0===P&&(P=!1),l.addEventListener(f.toString(),y,P);else if(l.attachEvent)l.attachEvent(Az(f.toString()),y);else{if(!l.addListener||!l.removeListener)throw Error("addEventListener and attachEvent are unavailable.");l.addListener(y)}return g}function Cz(l,f,g,y,P){if(Array.isArray(f)){for(var k=0;k<f.length;k++)Cz(l,f[k],g,y,P);return null}return g=q0(g),l&&l[zh]?l.L(f,g,c(y)?!!y.capture:!!y,P):Dz(l,f,g,!0,y,P)}function bz(l,f,g,y,P){if(Array.isArray(f))for(var k=0;k<f.length;k++)bz(l,f[k],g,y,P);else y=c(y)?!!y.capture:!!y,g=q0(g),l&&l[zh]?(l=l.i,(f=String(f).toString())in l.g&&-1<(g=B0(k=l.g[f],g,y,P))&&(V_(k[g]),Array.prototype.splice.call(k,g,1),0==k.length&&(delete l.g[f],l.h--))):l&&(l=G0(l))&&(f=l.g[f.toString()],l=-1,f&&(l=B0(f,g,y,P)),(g=-1<l?f[l]:null)&&H0(g))}function H0(l){if("number"!=typeof l&&l&&!l.da){var f=l.src;if(f&&f[zh])U0(f.i,l);else{var g=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(g,y,l.capture):f.detachEvent?f.detachEvent(Az(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=G0(f))?(U0(g,l),0==g.h&&(g.src=null,f[j0]=null)):V_(l)}}}function Az(l){return l in $0?$0[l]:$0[l]="on"+l}function J_e(l,f){if(l.da)l=!0;else{f=new Gh(f,this);var g=l.listener,y=l.ha||l.src;l.fa&&H0(l),l=g.call(y,f)}return l}function G0(l){return(l=l[j0])instanceof F_?l:null}var z0="__closure_events_fn_"+(1e9*Math.random()>>>0);function q0(l){return"function"==typeof l?l:(l[z0]||(l[z0]=function(f){return l.handleEvent(f)}),l[z0])}function Tn(){Ko.call(this),this.i=new F_(this),this.M=this,this.F=null}function Fn(l,f){var g,y=l.F;if(y)for(g=[];y;y=y.F)g.push(y);if(l=l.M,y=f.type||f,"string"==typeof f)f=new wn(f,l);else if(f instanceof wn)f.target=f.target||l;else{var P=f;S(f=new wn(y,l),P)}if(P=!0,g)for(var k=g.length-1;0<=k;k--){var q=f.g=g[k];P=L_(q,y,!0,f)&&P}if(P=L_(q=f.g=l,y,!0,f)&&P,P=L_(q,y,!1,f)&&P,g)for(k=0;k<g.length;k++)P=L_(q=f.g=g[k],y,!1,f)&&P}function L_(l,f,g,y){if(!(f=l.i.g[String(f)]))return!0;f=f.concat();for(var P=!0,k=0;k<f.length;++k){var q=f[k];if(q&&!q.da&&q.capture==g){var Ge=q.listener,un=q.ha||q.src;q.fa&&U0(l.i,q),P=!1!==Ge.call(un,y)&&P}}return P&&!y.defaultPrevented}function Sz(l,f,g){if("function"==typeof l)g&&(l=p(l,g));else{if(!l||"function"!=typeof l.handleEvent)throw Error("Invalid listener argument");l=p(l.handleEvent,l)}return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Rz(l){l.g=Sz(()=>{l.g=null,l.i&&(l.i=!1,Rz(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}_(Tn,Ko),Tn.prototype[zh]=!0,Tn.prototype.removeEventListener=function(l,f,g,y){bz(this,l,f,g,y)},Tn.prototype.N=function(){if(Tn.aa.N.call(this),this.i){var f,l=this.i;for(f in l.g){for(var g=l.g[f],y=0;y<g.length;y++)V_(g[y]);delete l.g[f],l.h--}}this.F=null},Tn.prototype.K=function(l,f,g,y){return this.i.add(String(l),f,!1,g,y)},Tn.prototype.L=function(l,f,g,y){return this.i.add(String(l),f,!0,g,y)};class X_e extends Ko{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Rz(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qh(l){Ko.call(this),this.h=l,this.g={}}_(qh,Ko);var Pz=[];function Mz(l){Q(l.g,function(f,g){this.g.hasOwnProperty(g)&&H0(f)},l),l.g={}}qh.prototype.N=function(){qh.aa.N.call(this),Mz(this)},qh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W0=a.JSON.stringify,Z_e=a.JSON.parse,eye=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function K0(){}function xz(){}K0.prototype.h=null;var Wh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Q0(){wn.call(this,"d")}function Y0(){wn.call(this,"c")}_(Q0,wn),_(Y0,wn);var aa={},Oz=null;function U_(){return Oz=Oz||new Tn}function kz(l){wn.call(this,aa.La,l)}function Kh(l){const f=U_();Fn(f,new kz(f))}function Vz(l,f){wn.call(this,aa.STAT_EVENT,l),this.stat=f}function Ln(l){const f=U_();Fn(f,new Vz(f,l))}function Fz(l,f){wn.call(this,aa.Ma,l),this.size=f}function Qh(l,f){if("function"!=typeof l)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Yh(){this.g=!0}function jc(l,f,g,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+function iye(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g)for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var y=g[l];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var k=P[0];if("noop"!=k&&"stop"!=k&&"close"!=k)for(var q=1;q<P.length;q++)P[q]=""}}}return W0(g)}catch{return f}}(l,g)+(y?" "+y:"")})}aa.La="serverreachability",_(kz,wn),aa.STAT_EVENT="statevent",_(Vz,wn),aa.Ma="timingevent",_(Fz,wn),Yh.prototype.xa=function(){this.g=!1},Yh.prototype.info=function(){};var J0,B_={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lz={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function j_(){}function Qo(l,f,g,y){this.j=l,this.i=f,this.l=g,this.R=y||1,this.U=new qh(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uz}function Uz(){this.i=null,this.g="",this.h=!1}_(j_,K0),j_.prototype.g=function(){return new XMLHttpRequest},j_.prototype.i=function(){return{}},J0=new j_;var Bz={},X0={};function Z0(l,f,g){l.L=1,l.v=z_(oo(f)),l.m=g,l.P=!0,jz(l,null)}function jz(l,f){l.F=Date.now(),$_(l),l.A=oo(l.v);var g=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),tq(g.i,"t",y),l.C=0,g=l.j.J,l.h=new Uz,l.g=vq(l.j,g?f:null,!l.m),0<l.O&&(l.M=new X_e(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,y=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(Pz[0]=P.toString()),P=Pz);for(var k=0;k<P.length;k++){var q=Tz(g,P[k],y||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Kh(),function tye(l,f,g,y,P,k){l.info(function(){if(l.g)if(k)for(var q="",Ge=k.split("&"),un=0;un<Ge.length;un++){var Se=Ge[un].split("=");if(1<Se.length){var Dn=Se[0];Se=Se[1];var Cn=Dn.split("_");q=2<=Cn.length&&"type"==Cn[1]?q+(Dn+"=")+Se+"&":q+(Dn+"=redacted&")}}else q=null;else q=k;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+f+"\n"+g+"\n"+q})}(l.i,l.u,l.A,l.l,l.R,l.m)}function $z(l){return!!l.g&&"GET"==l.u&&2!=l.L&&l.j.Ca}function oye(l,f){var g=l.C,y=f.indexOf("\n",g);return-1==y?X0:(g=Number(f.substring(g,y)),isNaN(g)?Bz:(y+=1)+g>f.length?X0:(f=f.slice(y,y+g),l.C=y+g,f))}function $_(l){l.S=Date.now()+l.I,Hz(l,l.I)}function Hz(l,f){if(null!=l.B)throw Error("WatchDog timer not null");l.B=Qh(p(l.ba,l),f)}function eR(l){l.B&&(a.clearTimeout(l.B),l.B=null)}function Jh(l){0==l.j.G||l.J||gq(l.j,l)}function ua(l){eR(l);var f=l.M;f&&"function"==typeof f.ma&&f.ma(),l.M=null,Mz(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function tR(l,f){try{var g=l.j;if(0!=g.G&&(g.g==l||nR(g.h,l)))if(!l.K&&nR(g.h,l)&&3==g.G){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&3==y.length){var P=y;if(0==P[0]){e:if(!g.u){if(g.g){if(!(g.g.F+3e3<l.F))break e;Y_(g),K_(g)}sR(g),Ln(18)}}else g.za=P[1],0<g.za-g.T&&37500>P[2]&&g.F&&0==g.v&&!g.C&&(g.C=Qh(p(g.Za,g),6e3));if(1>=qz(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else la(g,11)}else if((l.K||g.g==l)&&Y_(g),!A(f))for(P=g.Da.g.parse(f),f=0;f<P.length;f++){let Se=P[f];if(g.T=Se[0],Se=Se[1],2==g.G)if("c"==Se[0]){g.K=Se[1],g.ia=Se[2];const Dn=Se[3];null!=Dn&&(g.la=Dn,g.j.info("VER="+g.la));const Cn=Se[4];null!=Cn&&(g.Aa=Cn,g.j.info("SVER="+g.Aa));const Gc=Se[5];null!=Gc&&"number"==typeof Gc&&0<Gc&&(g.L=y=1.5*Gc,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const Br=l.g;if(Br){const X_=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X_){var k=y.h;k.g||-1==X_.indexOf("spdy")&&-1==X_.indexOf("quic")&&-1==X_.indexOf("h2")||(k.j=k.l,k.g=new Set,k.h&&(rR(k,k.h),k.h=null))}if(y.D){const uR=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;uR&&(y.ya=uR,ot(y.I,y.D,uR))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms"));var q=l;if((y=g).qa=yq(y,y.J?y.ia:null,y.W),q.K){Wz(y.h,q);var Ge=q,un=y.L;un&&(Ge.I=un),Ge.B&&(eR(Ge),$_(Ge)),y.g=q}else fq(y);0<g.i.length&&Q_(g)}else"stop"!=Se[0]&&"close"!=Se[0]||la(g,7);else 3==g.G&&("stop"==Se[0]||"close"==Se[0]?"stop"==Se[0]?la(g,7):oR(g):"noop"!=Se[0]&&g.l&&g.l.ta(Se),g.v=0)}Kh()}catch{}}Qo.prototype.ca=function(l){l=l.target;const f=this.M;f&&3==so(l)?f.j():this.Y(l)},Qo.prototype.Y=function(l){try{if(l==this.g)e:{const Cn=so(this.g);var f=this.g.Ba();if(this.g.Z(),!(3>Cn)&&(3!=Cn||this.g&&(this.h.h||this.g.oa()||uq(this.g)))){this.J||4!=Cn||7==f||Kh(),eR(this);var g=this.g.Z();this.X=g;t:if($z(this)){var y=uq(this.g);l="";var P=y.length,k=4==so(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ua(this),Jh(this);var q="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(k&&f==P-1)});y.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=200==g,function nye(l,f,g,y,P,k,q){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+f+"\n"+g+"\n"+k+" "+q})}(this.i,this.u,this.A,this.l,this.R,Cn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,un=this.g;if((Ge=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Ge)){var Se=Ge;break t}}Se=null}if(!(g=Se)){this.o=!1,this.s=3,Ln(12),ua(this),Jh(this);break e}jc(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tR(this,g)}if(this.P){let Br;for(g=!0;!this.J&&this.C<q.length;){if(Br=oye(this,q),Br==X0){4==Cn&&(this.s=4,Ln(14),g=!1),jc(this.i,this.l,null,"[Incomplete Response]");break}if(Br==Bz){this.s=4,Ln(15),jc(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}jc(this.i,this.l,Br,null),tR(this,Br)}if($z(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Cn||0!=q.length||this.h.h||(this.s=1,Ln(16),g=!1),this.o=this.o&&g,g){if(0<q.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),aR(Dn),Dn.M=!0,Ln(11))}}else jc(this.i,this.l,q,"[Invalid Chunked Response]"),ua(this),Jh(this)}else jc(this.i,this.l,q,null),tR(this,q);4==Cn&&ua(this),this.o&&!this.J&&(4==Cn?gq(this.j,this):(this.o=!1,$_(this)))}else(function wye(l){const f={};l=(l.g&&2<=so(l)&&l.g.getAllResponseHeaders()||"").split("\r\n");for(let y=0;y<l.length;y++){if(A(l[y]))continue;var g=R(l[y]);const P=g[0];if("string"!=typeof(g=g[1]))continue;g=g.trim();const k=f[P]||[];f[P]=k,k.push(g)}!function C(l,f){for(const g in l)f.call(void 0,l[g],g,l)}(f,function(y){return y.join(", ")})})(this.g),400==g&&0<q.indexOf("Unknown SID")?(this.s=3,Ln(12)):(this.s=0,Ln(13)),ua(this),Jh(this)}}}catch{}},Qo.prototype.cancel=function(){this.J=!0,ua(this)},Qo.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(function rye(l,f){l.info(function(){return"TIMEOUT: "+f})}(this.i,this.A),2!=this.L&&(Kh(),Ln(17)),ua(this),this.s=2,Jh(this)):Hz(this,this.S-l)};var sye=class{constructor(l,f){this.g=l,this.map=f}};function Gz(l){this.l=l||10,l=a.PerformanceNavigationTiming?0<(l=a.performance.getEntriesByType("navigation")).length&&("hq"==l[0].nextHopProtocol||"h2"==l[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zz(l){return!!l.h||!!l.g&&l.g.size>=l.j}function qz(l){return l.h?1:l.g?l.g.size:0}function nR(l,f){return l.h?l.h==f:!!l.g&&l.g.has(f)}function rR(l,f){l.g?l.g.add(f):l.h=f}function Wz(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}function Kz(l){if(null!=l.h)return l.i.concat(l.h.D);if(null!=l.g&&0!==l.g.size){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return I(l.i)}function Qz(l,f){if(l.forEach&&"function"==typeof l.forEach)l.forEach(f,void 0);else if(u(l)||"string"==typeof l)Array.prototype.forEach.call(l,f,void 0);else for(var g=function uye(l){if(l.na&&"function"==typeof l.na)return l.na();if(!l.V||"function"!=typeof l.V){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||"string"==typeof l){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const y in l)f[g++]=y;return f}}}(l),y=function aye(l){if(l.V&&"function"==typeof l.V)return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if("string"==typeof l)return l.split("");if(u(l)){for(var f=[],g=l.length,y=0;y<g;y++)f.push(l[y]);return f}for(y in f=[],g=0,l)f[g++]=l[y];return f}(l),P=y.length,k=0;k<P;k++)f.call(void 0,y[k],g&&g[k],l)}Gz.prototype.cancel=function(){if(this.i=Kz(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const l of this.g.values())l.cancel();this.g.clear()}};var Yz=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ca(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ca){this.h=l.h,H_(this,l.j),this.o=l.o,this.g=l.g,G_(this,l.s),this.l=l.l;var f=l.i,g=new ef;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Jz(this,g),this.m=l.m}else l&&(f=String(l).match(Yz))?(this.h=!1,H_(this,f[1]||"",!0),this.o=Xh(f[2]||""),this.g=Xh(f[3]||"",!0),G_(this,f[4]),this.l=Xh(f[5]||"",!0),Jz(this,f[6]||"",!0),this.m=Xh(f[7]||"")):(this.h=!1,this.i=new ef(null,this.h))}function oo(l){return new ca(l)}function H_(l,f,g){l.j=g?Xh(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function G_(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Jz(l,f,g){f instanceof ef?(l.i=f,function gye(l,f){f&&!l.j&&(Yo(l),l.i=null,l.g.forEach(function(g,y){var P=y.toLowerCase();y!=P&&(Zz(this,y),tq(this,P,g))},l)),l.j=f}(l.i,l.h)):(g||(f=Zh(f,fye)),l.i=new ef(f,l.h))}function ot(l,f,g){l.i.set(f,g)}function z_(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Xh(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Zh(l,f,g){return"string"==typeof l?(l=encodeURI(l).replace(f,lye),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function lye(l){return"%"+((l=l.charCodeAt(0))>>4&15).toString(16)+(15&l).toString(16)}ca.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Zh(f,Xz,!0),":");var g=this.g;return(g||"file"==f)&&(l.push("//"),(f=this.o)&&l.push(Zh(f,Xz,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(g=this.s)&&l.push(":",String(g))),(g=this.l)&&(this.g&&"/"!=g.charAt(0)&&l.push("/"),l.push(Zh(g,"/"==g.charAt(0)?hye:dye,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Zh(g,pye)),l.join("")};var Xz=/[#\/\?@]/g,dye=/[#\?:]/g,hye=/[#\?]/g,fye=/[#\?@]/g,pye=/#/g;function ef(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Yo(l){l.g||(l.g=new Map,l.h=0,l.i&&function cye(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var y=l[g].indexOf("="),P=null;if(0<=y){var k=l[g].substring(0,y);P=l[g].substring(y+1)}else k=l[g];f(k,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}function Zz(l,f){Yo(l),f=$c(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function eq(l,f){return Yo(l),f=$c(l,f),l.g.has(f)}function tq(l,f,g){Zz(l,f),0<g.length&&(l.i=null,l.g.set($c(l,f),I(g)),l.h+=g.length)}function $c(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Jo(l,f,g,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(g)}catch{}}function yye(){this.g=new eye}function vye(l,f,g){const y=g||"";try{Qz(l,function(P,k){let q=P;c(P)&&(q=W0(P)),f.push(y+k+"="+encodeURIComponent(q))})}catch(P){throw f.push(y+"type="+encodeURIComponent("_badmap")),P}}function tf(l){this.l=l.Ub||null,this.j=l.eb||!1}function q_(l,f){Tn.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function nq(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}function nf(l){l.readyState=4,l.l=null,l.j=null,l.v=null,rf(l)}function rf(l){l.onreadystatechange&&l.onreadystatechange.call(l)}function rq(l){let f="";return Q(l,function(g,y){f+=y,f+=":",f+=g,f+="\r\n"}),f}function iR(l,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=rq(g),"string"==typeof l?null!=g&&encodeURIComponent(String(g)):ot(l,f,g))}function Et(l){Tn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=ef.prototype).add=function(l,f){Yo(this),this.i=null,l=$c(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this},t.forEach=function(l,f){Yo(this),this.g.forEach(function(g,y){g.forEach(function(P){l.call(f,P,y,this)},this)},this)},t.na=function(){Yo(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){const P=l[y];for(let k=0;k<P.length;k++)g.push(f[y])}return g},t.V=function(l){Yo(this);let f=[];if("string"==typeof l)eq(this,l)&&(f=f.concat(this.g.get($c(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return Yo(this),this.i=null,eq(this,l=$c(this,l))&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l&&0<(l=this.V(l)).length?String(l[0]):f},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];const k=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var P=k;""!==q[y]&&(P+="="+encodeURIComponent(String(q[y]))),l.push(P)}}return this.i=l.join("&")},_(tf,K0),tf.prototype.g=function(){return new q_(this.l,this.j)},tf.prototype.i=function(l){return function(){return l}}({}),_(q_,Tn),(t=q_.prototype).open=function(l,f){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,rf(this)},t.send=function(l){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nf(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,rf(this)),this.g&&(this.readyState=3,rf(this),this.g)))if("arraybuffer"===this.responseType)l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nq(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?nf(this):rf(this),3==this.readyState&&nq(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,nf(this))},t.Qa=function(l){this.g&&(this.response=l,nf(this))},t.ga=function(){this.g&&nf(this)},t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)l.push((g=g.value)[0]+": "+g[1]),g=f.next();return l.join("\r\n")},Object.defineProperty(q_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(l){this.m=l?"include":"same-origin"}}),_(Et,Tn);var Iye=/^https?$/i,Eye=["POST","PUT"];function iq(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,oq(l),W_(l)}function oq(l){l.A||(l.A=!0,Fn(l,"complete"),Fn(l,"error"))}function sq(l){if(l.h&&typeof s<"u"&&(!l.v[1]||4!=so(l)||2!=l.Z()))if(l.u&&4==so(l))Sz(l.Ea,0,l);else if(Fn(l,"readystatechange"),4==so(l)){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=0===q){var P=String(l.D).match(Yz)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!Iye.test(P?P.toLowerCase():"")}g=y}if(g)Fn(l,"complete"),Fn(l,"success");else{l.m=6;try{var k=2<so(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",oq(l)}}finally{W_(l)}}}function W_(l,f){if(l.g){aq(l);const g=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Fn(l,"ready");try{g.onreadystatechange=y}catch{}}}function aq(l){l.I&&(a.clearTimeout(l.I),l.I=null)}function so(l){return l.g?l.g.readyState:0}function uq(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function sf(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function cq(l){this.Aa=0,this.i=[],this.j=new Yh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sf("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sf("baseRetryDelayMs",5e3,l),this.cb=sf("retryDelaySeedMs",1e4,l),this.Wa=sf("forwardChannelMaxRetries",2,l),this.wa=sf("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Gz(l&&l.concurrentRequestLimit),this.Da=new yye,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function oR(l){if(lq(l),3==l.G){var f=l.U++,g=oo(l.I);if(ot(g,"SID",l.K),ot(g,"RID",f),ot(g,"TYPE","terminate"),af(l,g),(f=new Qo(l,l.j,f)).L=2,f.v=z_(oo(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&((new Image).src=f.v,g=!0),g||(f.g=vq(f.j,null),f.g.ea(f.v)),f.F=Date.now(),$_(f)}_q(l)}function K_(l){l.g&&(aR(l),l.g.cancel(),l.g=null)}function lq(l){K_(l),l.u&&(a.clearTimeout(l.u),l.u=null),Y_(l),l.h.cancel(),l.s&&("number"==typeof l.s&&a.clearTimeout(l.s),l.s=null)}function Q_(l){if(!zz(l.h)&&!l.s){l.s=!0;var f=l.Ga;$h||wz(),Hh||($h(),Hh=!0),L0.add(f,l),l.B=0}}function dq(l,f){var g;g=f?f.l:l.U++;const y=oo(l.I);ot(y,"SID",l.K),ot(y,"RID",g),ot(y,"AID",l.T),af(l,y),l.m&&l.o&&iR(y,l.m,l.o),g=new Qo(l,l.j,g,l.B+1),null===l.m&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=hq(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),rR(l.h,g),Z0(g,y,f)}function af(l,f){l.H&&Q(l.H,function(g,y){ot(f,y,g)}),l.l&&Qz({},function(g,y){ot(f,y,g)})}function hq(l,f,g){g=Math.min(l.i.length,g);var y=l.l?p(l.l.Na,l.l,l):null;e:{var P=l.i;let k=-1;for(;;){const q=["count="+g];-1==k?0<g?(k=P[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let Ge=!0;for(let un=0;un<g;un++){let Se=P[un].g;const Dn=P[un].map;if(Se-=k,0>Se)k=Math.max(0,P[un].g-100),Ge=!1;else try{vye(Dn,q,"req"+Se+"_")}catch{y&&y(Dn)}}if(Ge){y=q.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,y}function fq(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;$h||wz(),Hh||($h(),Hh=!0),L0.add(f,l),l.v=0}}function sR(l){return!(l.g||l.u||3<=l.v||(l.Y++,l.u=Qh(p(l.Fa,l),mq(l,l.v)),l.v++,0))}function aR(l){null!=l.A&&(a.clearTimeout(l.A),l.A=null)}function pq(l){l.g=new Qo(l,l.j,"rpc",l.Y),null===l.m&&(l.g.H=l.o),l.g.O=0;var f=oo(l.qa);ot(f,"RID","rpc"),ot(f,"SID",l.K),ot(f,"AID",l.T),ot(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(f,"TO",l.ja),ot(f,"TYPE","xmlhttp"),af(l,f),l.m&&l.o&&iR(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=z_(oo(f)),g.m=null,g.P=!0,jz(g,l)}function Y_(l){null!=l.C&&(a.clearTimeout(l.C),l.C=null)}function gq(l,f){var g=null;if(l.g==f){Y_(l),aR(l),l.g=null;var y=2}else{if(!nR(l.h,f))return;g=f.D,Wz(l.h,f),y=1}if(0!=l.G)if(f.o)if(1==y){g=f.m?f.m.length:0,f=Date.now()-f.F;var P=l.B;Fn(y=U_(),new Fz(y,g)),Q_(l)}else fq(l);else if(3==(P=f.s)||0==P&&0<f.X||!(1==y&&function Tye(l,f){return!(qz(l.h)>=l.h.j-(l.s?1:0)||(l.s?(l.i=f.D.concat(l.i),0):1==l.G||2==l.G||l.B>=(l.Va?0:l.Wa)||(l.s=Qh(p(l.Ga,l,f),mq(l,l.B)),l.B++,0)))}(l,f)||2==y&&sR(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),P){case 1:la(l,5);break;case 4:la(l,10);break;case 3:la(l,6);break;default:la(l,2)}}function mq(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function la(l,f){if(l.j.info("Error code "+f),2==f){var g=p(l.fb,l),y=l.Xa;const P=!y;y=new ca(y||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||H_(y,"https"),z_(y),P?function mye(l,f){const g=new Yh;if(a.Image){const y=new Image;y.onload=m(Jo,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(Jo,g,"TestLoadImage: error",!1,f,y),y.onabort=m(Jo,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(Jo,g,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}(y.toString(),g):function _ye(l,f){new Yh;const y=new AbortController,P=setTimeout(()=>{y.abort(),Jo(0,0,!1,f)},1e4);fetch(l,{signal:y.signal}).then(k=>{clearTimeout(P),Jo(0,0,!!k.ok,f)}).catch(()=>{clearTimeout(P),Jo(0,0,!1,f)})}(y.toString(),g)}else Ln(2);l.G=0,l.l&&l.l.sa(f),_q(l),lq(l)}function _q(l){if(l.G=0,l.ka=[],l.l){const f=Kz(l.h);(0!=f.length||0!=l.i.length)&&(E(l.ka,f),E(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function yq(l,f,g){var y=g instanceof ca?oo(g):new ca(g);if(""!=y.g)f&&(y.g=f+"."+y.g),G_(y,y.s);else{var P=a.location;y=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var k=new ca(null);y&&H_(k,y),f&&(k.g=f),P&&G_(k,P),g&&(k.l=g),y=k}return f=l.ya,(g=l.D)&&f&&ot(y,g,f),ot(y,"VER",l.la),af(l,y),y}function vq(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return(f=new Et(l.Ca&&!l.pa?new tf({eb:g}):l.pa)).Ha(l.J),f}function Iq(){}function J_(){}function lr(l,f){Tn.call(this),this.g=new cq(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!A(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.D=f,null!==(l=this.h)&&f in l&&f in(l=this.h)&&delete l[f]),this.j=new Hc(this)}function Eq(l){Q0.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=null!==f&&l in f?f[l]:void 0),this.data=f}else this.data=l}function wq(){Y0.call(this),this.status=1}function Hc(l){this.g=l}(t=Et.prototype).Ha=function(l){this.J=l},t.ea=function(l,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():J0.g(),this.v=function Nz(l){return l.h||(l.h=l.i())}(this.o?this.o:J0),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(k){return void iq(this,k)}if(l=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)g.set(P,y[P]);else{if("function"!=typeof y.keys||"function"!=typeof y.get)throw Error("Unknown input type for opt_headers: "+String(y));for(const k of y.keys())g.set(k,y.get(k))}y=Array.from(g.keys()).find(k=>"content-type"==k.toLowerCase()),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Eye,f,void 0))||y||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,q]of g)this.g.setRequestHeader(k,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aq(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){iq(this,k)}},t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Fn(this,"complete"),Fn(this,"abort"),W_(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),W_(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sq(this):this.bb())},t.bb=function(){sq(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&0==f.indexOf(l)&&(f=f.substring(l.length)),Z_e(f)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=cq.prototype).la=8,t.G=1,t.connect=function(l,f,g,y){Ln(0),this.W=l,this.H=f||{},g&&void 0!==y&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=yq(this,null,this.W),Q_(this)},t.Ga=function(l){if(this.s)if(this.s=null,1==this.G){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const P=new Qo(this,this.j,l);let k=this.o;if(this.S&&(k?(k=w(k),S(k,this.S)):k=this.S),null!==this.m||this.O||(P.H=k,k=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){var y=this.i[g];if(void 0===(y="__data__"in y.map&&"string"==typeof(y=y.map.__data__)?y.length:void 0))break;if(4096<(f+=y)){f=g;break e}if(4096===f||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=hq(this,P,f),ot(g=oo(this.I),"RID",l),ot(g,"CVER",22),this.D&&ot(g,"X-HTTP-Session-Id",this.D),af(this,g),k&&(this.O?f="headers="+encodeURIComponent(String(rq(k)))+"&"+f:this.m&&iR(g,this.m,k)),rR(this.h,P),this.Ua&&ot(g,"TYPE","init"),this.P?(ot(g,"$req",f),ot(g,"SID","null"),P.T=!0,Z0(P,g,null)):Z0(P,g,f),this.G=2}}else 3==this.G&&(l?dq(this,l):0==this.i.length||zz(this.h)||dq(this))},t.Fa=function(){if(this.u=null,pq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Qh(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ln(10),K_(this),pq(this))},t.Za=function(){null!=this.C&&(this.C=null,K_(this),sR(this),Ln(19))},t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ln(2)):(this.j.info("Failed to ping google.com"),Ln(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Iq.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},J_.prototype.g=function(l,f){return new lr(l,f)},_(lr,Tn),lr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lr.prototype.close=function(){oR(this.g)},lr.prototype.o=function(l){var f=this.g;if("string"==typeof l){var g={};g.__data__=l,l=g}else this.u&&((g={}).__data__=W0(l),l=g);f.i.push(new sye(f.Ya++,l)),3==f.G&&Q_(f)},lr.prototype.N=function(){this.g.l=null,delete this.j,oR(this.g),delete this.g,lr.aa.N.call(this)},_(Eq,Q0),_(wq,Y0),_(Hc,Iq),Hc.prototype.ua=function(){Fn(this.g,"a")},Hc.prototype.ta=function(l){Fn(this.g,new Eq(l))},Hc.prototype.sa=function(l){Fn(this.g,new wq)},Hc.prototype.ra=function(){Fn(this.g,"b")},J_.prototype.createWebChannel=J_.prototype.g,lr.prototype.send=lr.prototype.o,lr.prototype.open=lr.prototype.m,lr.prototype.close=lr.prototype.close,nU=zi.createWebChannelTransport=function(){return new J_},tU=zi.getStatEventTarget=function(){return U_()},eU=zi.Event=aa,VD=zi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},B_.NO_ERROR=0,B_.TIMEOUT=8,B_.HTTP_ERROR=6,Qg=zi.ErrorCode=B_,Lz.COMPLETE="complete",ZL=zi.EventType=Lz,xz.EventType=Wh,Wh.OPEN="a",Wh.CLOSE="b",Wh.ERROR="c",Wh.MESSAGE="d",Tn.prototype.listen=Tn.prototype.K,Nd=zi.WebChannel=xz,zi.FetchXmlHttpFactory=tf,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,XL=zi.XhrIo=Et}).apply(typeof Kg<"u"?Kg:typeof self<"u"?self:typeof window<"u"?window:{});const rU="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let ku="10.14.0";const Ao=new aw("@firebase/firestore");function Vu(){return Ao.logLevel}function U(t,...e){if(Ao.logLevel<=Ee.DEBUG){const n=e.map(FD);Ao.debug(`Firestore (${ku}): ${t}`,...n)}}function Mt(t,...e){if(Ao.logLevel<=Ee.ERROR){const n=e.map(FD);Ao.error(`Firestore (${ku}): ${t}`,...n)}}function wr(t,...e){if(Ao.logLevel<=Ee.WARN){const n=e.map(FD);Ao.warn(`Firestore (${ku}): ${t}`,...n)}}function FD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function J(t="Unexpected state"){const e=`FIRESTORE (${ku}) INTERNAL ASSERTION FAILED: `+t;throw Mt(e),new Error(e)}function X(t,e){t||J()}function z(t,e){return t}const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class iU{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Doe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class Coe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class boe{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;X(void 0===this.o);let i=this.i;const o=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Jt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jt,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(v(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jt)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X("string"==typeof r.accessToken),new iU(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return X(null===e||"string"==typeof e),new Yt(e)}}class Aoe{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Soe{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Aoe(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Roe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){X(void 0===this.o);const r=o=>{null!=o.error&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,U("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(X("string"==typeof n.token),this.R=n.token,new oU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Poe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class sU{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Poe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Fu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new gt(0,0))}static max(){return new ee(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xd{constructor(e,n,r){void 0===n?n=0:n>e.length&&J(),void 0===r?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===xd.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends xd{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Moe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends xd{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return Moe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(0===r.length)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}class W{constructor(e){this.path=e}static fromPath(e){return new W(we.fromString(e))}static fromName(e){return new W(we.fromString(e).popFirst(5))}static empty(){return new W(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===we.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new we(e.slice()))}}class sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new sr(ee.min(),W.empty(),-1)}static max(){return new sr(ee.max(),W.empty(),-1)}}function UD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=W.comparator(t.documentKey,e.documentKey),0!==n?n:ue(t.largestBatchId,e.largestBatchId))}const lU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function So(t){return BD.apply(this,arguments)}function BD(){return(BD=v(function*(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==lU)throw t;U("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next(d=>{s[c]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new M((r,i)=>{const o=()=>{!0===e()?n().next(()=>{o()},i):r()};o()})}}function Ro(t){return"IndexedDbTransactionError"===t.name}let ar=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function kd(t){return null==t}function Vd(t){return 0===t&&1/t==-1/0}function EU(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Je{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xg(this.root,e,this.comparator,!0)}}class Xg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??rn.RED,this.left=i??rn.EMPTY,this.right=o??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new rn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===o?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return rn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1,rn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,o){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Be{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new DU(this.data.getIterator())}getIteratorFrom(e){return new DU(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class DU{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new Be(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class CU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CU("Invalid base64 string: "+o):o}}(e);return new It(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const rse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(t){if(X(!!t),"string"==typeof t){let e=0;const n=rse.exec(t);if(X(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Wi(t){return"string"==typeof t?It.fromBase64String(t):It.fromUint8Array(t)}function Zg(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function em(t){const e=t.mapValue.fields.__previous_value__;return Zg(e)?em(e):e}function Fd(t){const e=qi(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}class ise{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Os{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Os("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Os&&e.projectId===this.projectId&&e.database===this.database}}const Mo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function No(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zg(t)?4:PU(t)?9007199254740991:im(t)?10:11:J()}function ii(t,e){if(t===e)return!0;const n=No(t);if(n!==No(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fd(t).isEqual(Fd(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=qi(i.timestampValue),a=qi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return o=e,Wi(t.bytesValue).isEqual(Wi(o.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return lt(i.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return lt(i.integerValue)===lt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=lt(i.doubleValue),a=lt(o.doubleValue);return s===a?Vd(s)===Vd(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Fu(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(EU(s)!==EU(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!ii(s[u],a[u])))return!1;return!0}(t,e);default:return J()}var o}function Ld(t,e){return void 0!==(t.values||[]).find(n=>ii(n,e))}function xo(t,e){if(t===e)return 0;const n=No(t),r=No(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=lt(o.integerValue||o.doubleValue),u=lt(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return bU(t.timestampValue,e.timestampValue);case 4:return bU(Fd(t),Fd(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(o,s){const a=Wi(o),u=Wi(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=ue(a[c],u[c]);if(0!==d)return d}return ue(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ue(lt(o.latitude),lt(s.latitude));return 0!==a?a:ue(lt(o.longitude),lt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return AU(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,c,d;const m=null===(a=(o.fields||{}).value)||void 0===a?void 0:a.arrayValue,_=null===(u=(s.fields||{}).value)||void 0===u?void 0:u.arrayValue,I=ue((null===(c=m?.values)||void 0===c?void 0:c.length)||0,(null===(d=_?.values)||void 0===d?void 0:d.length)||0);return 0!==I?I:AU(m,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Mo.mapValue&&s===Mo.mapValue)return 0;if(o===Mo.mapValue)return 1;if(s===Mo.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const p=ue(u[h],d[h]);if(0!==p)return p;const m=xo(a[u[h]],c[d[h]]);if(0!==m)return m}return ue(u.length,d.length)}(t.mapValue,e.mapValue);default:throw J()}}function bU(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ue(t,e);const n=qi(t),r=qi(e),i=ue(n.seconds,r.seconds);return 0!==i?i:ue(n.nanos,r.nanos)}function AU(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=xo(n[i],r[i]);if(o)return o}return ue(n.length,r.length)}function ju(t){return GD(t)}function GD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Wi(t.bytesValue).toBase64():"referenceValue"in t?W.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=GD(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${GD(n.fields[s])}`;return i+"}"}(t.mapValue):J()}function ks(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zD(t){return!!t&&"integerValue"in t}function Ud(t){return!!t&&"arrayValue"in t}function SU(t){return!!t&&"nullValue"in t}function RU(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rm(t){return!!t&&"mapValue"in t}function im(t){var e,n;return"__vector__"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PU(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bd(n)}setAll(e){let n=ct.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bd(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());rm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Po(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new on(Bd(this.value))}}function OU(t){const e=[];return Po(t.fields,(n,r)=>{const i=new ct([n]);if(rm(r)){const o=OU(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Wn(e)}class it{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new it(e,0,ee.min(),ee.min(),ee.min(),on.empty(),0)}static newFoundDocument(e,n,r,i){return new it(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new it(e,2,n,ee.min(),ee.min(),on.empty(),0)}static newUnknownDocument(e,n){return new it(e,3,n,ee.min(),ee.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof it&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new it(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Oo{constructor(e,n){this.position=e,this.inclusive=n}}function kU(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(s.referenceValue),n.key):xo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function VU(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}class jd{constructor(e,n="asc"){this.field=e,this.dir=n}}function ase(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class FU{}class Te extends FU{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new use(e,n,r):"array-contains"===n?new dse(e,r):"in"===n?new HU(e,r):"not-in"===n?new hse(e,r):"array-contains-any"===n?new fse(e,r):new Te(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new cse(e,r):new lse(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(xo(n,this.value)):null!==n&&No(this.value)===No(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends FU{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Le(e,n)}matches(e){return $u(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $u(t){return"and"===t.op}function WD(t){return function LU(t){for(const e of t.filters)if(e instanceof Le)return!1;return!0}(t)&&$u(t)}function KD(t){if(t instanceof Te)return t.field.canonicalString()+t.op.toString()+ju(t.value);if(WD(t))return t.filters.map(e=>KD(e)).join(",");{const e=t.filters.map(n=>KD(n)).join(",");return`${t.op}(${e})`}}function UU(t,e){return t instanceof Te?(r=t,(i=e)instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)):t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&UU(s,i.filters[a]),!0)}(t,e):void J();var r,i}function jU(t){return t instanceof Te?`${(n=t).field.canonicalString()} ${n.op} ${ju(n.value)}`:t instanceof Le?function(n){return n.op.toString()+" {"+n.getFilters().map(jU).join(" ,")+"}"}(t):"Filter";var n}class use extends Te{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class cse extends Te{constructor(e,n){super(e,"in",n),this.keys=$U(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lse extends Te{constructor(e,n){super(e,"not-in",n),this.keys=$U(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $U(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class dse extends Te{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ud(n)&&Ld(n.arrayValue,this.value)}}class HU extends Te{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Ld(this.value.arrayValue,n)}}class hse extends Te{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Ld(this.value.arrayValue,n)}}class fse extends Te{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ud(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ld(this.value.arrayValue,r))}}class pse{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function QD(t,e=null,n=[],r=[],i=null,o=null,s=null){return new pse(t,e,n,r,i,o,s)}function Vs(t){const e=z(t);if(null===e.ue){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>KD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),kd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ju(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ju(r)).join(",")),e.ue=n}return e.ue}function $d(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ase(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UU(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VU(t.startAt,e.startAt)&&VU(t.endAt,e.endAt)}function om(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ki{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function Hu(t){return new Ki(t)}function WU(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function YD(t){return null!==t.collectionGroup}function Gu(t){const e=z(t);if(null===e.ce){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Be(ct.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new jd(o,r))}),n.has(ct.keyField().canonicalString())||e.ce.push(new jd(ct.keyField(),r))}return e.ce}function _n(t){const e=z(t);return e.le||(e.le=function QU(t,e){if("F"===t.limitType)return QD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new jd(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Oo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Oo(t.startAt.position,t.startAt.inclusive):null;return QD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Gu(t))),e.le}function JD(t,e){const n=t.filters.concat([e]);return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function am(t,e,n){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hd(t,e){return $d(_n(t),_n(e))&&t.limitType===e.limitType}function YU(t){return`${Vs(_n(t))}|lt:${t.limitType}`}function zu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jU(i)).join(", ")}]`),kd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ju(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ju(i)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function Gd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):W.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Gu(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(s,a,u){const c=kU(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Gu(r),i)||r.endAt&&!function(s,a,u){const c=kU(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Gu(r),i)));var r,i}function XU(t){return(e,n)=>{let r=!1;for(const i of Gu(t)){const o=gse(i,e,n);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function gse(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?xo(u,c):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}class Qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return TU(this.inner)}size(){return this.innerSize}}const mse=new Je(W.comparator);function Kn(){return mse}const ZU=new Je(W.comparator);function zd(...t){let e=ZU;for(const n of t)e=e.insert(n.key,n);return e}function e2(t){let e=ZU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function oi(){return qd()}function t2(){return qd()}function qd(){return new Qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const _se=new Je(W.comparator),yse=new Be(W.comparator);function fe(...t){let e=yse;for(const n of t)e=e.add(n);return e}const vse=new Be(ue);function ZD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function n2(t){return{integerValue:""+t}}function r2(t,e){return function pU(t){return"number"==typeof t&&Number.isInteger(t)&&!Vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?n2(e):ZD(t,e)}class um{constructor(){this._=void 0}}function Ise(t,e,n){return t instanceof qu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zg(o)&&(o=em(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Fs?o2(t,e):t instanceof Ls?s2(t,e):function(i,o){const s=i2(i,o),a=a2(s)+a2(i.Pe);return zD(s)&&zD(i.Pe)?n2(a):ZD(i.serializer,a)}(t,e)}function Ese(t,e,n){return t instanceof Fs?o2(t,e):t instanceof Ls?s2(t,e):n}function i2(t,e){return t instanceof Wu?zD(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class qu extends um{}class Fs extends um{constructor(e){super(),this.elements=e}}function o2(t,e){const n=u2(e);for(const r of t.elements)n.some(i=>ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ls extends um{constructor(e){super(),this.elements=e}}function s2(t,e){let n=u2(e);for(const r of t.elements)n=n.filter(i=>!ii(i,r));return{arrayValue:{values:n}}}class Wu extends um{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function a2(t){return lt(t.integerValue||t.doubleValue)}function u2(t){return Ud(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Wd{constructor(e,n){this.field=e,this.transform=n}}class Tse{constructor(e,n){this.version=e,this.transformResults=n}}class dt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dt}static exists(e){return new dt(void 0,e)}static updateTime(e){return new dt(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cm(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class lm{}function c2(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Qu(t.key,dt.none()):new Ku(t.key,t.data,dt.none());{const n=t.data,r=on.empty();let i=new Be(ct.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);null===s&&o.length>1&&(o=o.popLast(),s=n.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Yi(t.key,r,new Wn(i.toArray()),dt.none())}}function Dse(t,e,n){t instanceof Ku?function(i,o,s){const a=i.value.clone(),u=h2(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Yi?function(i,o,s){if(!cm(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=h2(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(d2(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Kd(t,e,n,r){return t instanceof Ku?function(o,s,a,u){if(!cm(o.precondition,s))return a;const c=o.value.clone(),d=f2(o.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yi?function(o,s,a,u){if(!cm(o.precondition,s))return a;const c=f2(o.fieldTransforms,u,s),d=s.data;return d.setAll(d2(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):(a=n,cm(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Cse(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=i2(r.transform,i||null);null!=o&&(null===n&&(n=on.empty()),n.set(r.field,o))}return n||null}function l2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Fu(r,i,(o,s)=>function wse(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Fs&&i instanceof Fs||r instanceof Ls&&i instanceof Ls?Fu(r.elements,i.elements,ii):r instanceof Wu&&i instanceof Wu?ii(r.Pe,i.Pe):r instanceof qu&&i instanceof qu);var r,i}(o,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class Ku extends lm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yi extends lm{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function d2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function h2(t,e,n){const r=new Map;X(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Ese(s,a,n[i]))}return r}function f2(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,Ise(o,s,e))}return r}class Qu extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eC extends lm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Dse(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Kd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Kd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=t2();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=c2(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Fu(this.mutations,e.mutations,(n,r)=>l2(n,r))&&Fu(this.baseMutations,e.baseMutations,(n,r)=>l2(n,r))}}class nC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){X(e.mutations.length===r.length);let i=function(){return _se}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new nC(e,n,r,i)}}class rC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bse{constructor(e,n){this.count=e,this.unchangedNames=n}}var Lt,be;function m2(t){if(void 0===t)return Mt("GRPC error has no .code"),x.UNKNOWN;switch(t){case Lt.OK:return x.OK;case Lt.CANCELLED:return x.CANCELLED;case Lt.UNKNOWN:return x.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return x.INTERNAL;case Lt.UNAVAILABLE:return x.UNAVAILABLE;case Lt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Lt.NOT_FOUND:return x.NOT_FOUND;case Lt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Lt.ABORTED:return x.ABORTED;case Lt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Lt.DATA_LOSS:return x.DATA_LOSS;default:return J()}}(be=Lt||(Lt={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";const Ase=new Ps([4294967295,4294967295],0);function y2(t){const e=function _2(){return new TextEncoder}().encode(t),n=new JL;return n.update(e),new Uint8Array(n.digest())}function v2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ps([n,r],0),new Ps([i,o],0)]}class iC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qd(`Invalid padding: ${n}`);if(r<0)throw new Qd(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Qd(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new Qd(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ps.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ps.fromNumber(r)));return 1===i.compare(Ase)&&(i=new Ps([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const n=y2(e),[r,i]=v2(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new iC(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const n=y2(e),[r,i]=v2(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Qd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yd(ee.min(),i,new Je(ue),Kn(),fe())}}class Jd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Jd(r,n,fe(),fe(),fe())}}class hm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class I2{constructor(e,n){this.targetId=e,this.me=n}}class E2{constructor(e,n,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class w2{constructor(){this.fe=0,this.ge=D2(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new Jd(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=D2()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,X(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Sse{constructor(e){this.Le=e,this.Be=new Map,this.ke=Kn(),this.qe=T2(),this.Qe=new Je(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(om(o))if(0===r){const s=new W(o.path);this.Ue(n,s,it.newNoDocument(s,ee.min()))}else X(1===r);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),u=a?this.Xe(a,e,s):1;0!==u&&(this.je(n),this.Qe=this.Qe.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=Wi(r).toUint8Array()}catch(u){if(u instanceof CU)return wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iC(s,i,o)}catch(u){return wr(u instanceof Qd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&om(a.target)){const u=new W(a.target.path);null!==this.ke.get(u)||this.it(s,u)||this.Ue(s,u,it.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=fe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Je(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Yd(e,n,this.Qe,this.ke,r);return this.ke=Kn(),this.qe=T2(),this.Qe=new Je(ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new w2,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Be(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=null!==this.Je(e);return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new w2),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function T2(){return new Je(W.comparator)}function D2(){return new Je(W.comparator)}const Rse={asc:"ASCENDING",desc:"DESCENDING"},Pse={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mse={and:"AND",or:"OR"};class Nse{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oC(t,e){return t.useProto3Json||kd(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function C2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xse(t,e){return Yu(t,e.toTimestamp())}function Nt(t){return X(!!t),ee.fromTimestamp(function(n){const r=qi(n);return new gt(r.seconds,r.nanos)}(t))}function sC(t,e){return aC(t,e).canonicalString()}function aC(t,e){const n=(i=t,new we(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function b2(t){const e=we.fromString(t);return X(F2(e)),e}function Xd(t,e){return sC(t.databaseId,e.path)}function si(t,e){const n=b2(e);if(n.get(1)!==t.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(R2(n))}function A2(t,e){return sC(t.databaseId,e)}function uC(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R2(t){return X(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function P2(t,e,n){return{name:Xd(t,e),fields:n.value.mapValue.fields}}function N2(t,e){return{documents:[A2(t,e.path)]}}function fm(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=A2(t,i);const o=function(c){if(0!==c.length)return V2(Le.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(d=>{return{field:ko((p=d).field),direction:Lse(p.dir)};var p})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=oC(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i};var c}function O2(t){let e=function S2(t){const e=b2(t);return 4===e.length?we.emptyPath():R2(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){X(1===r);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const p=k2(h);return p instanceof Le&&WD(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=n.orderBy.map(p=>{return new jd(Ju((_=p).field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction));var _}));let a=null;n.limit&&(a=function(h){let p;return p="object"==typeof h?h.value:h,kd(p)?null:p}(n.limit));let u=null;var h;n.startAt&&(u=new Oo((h=n.startAt).values||[],!!h.before));let c=null;return n.endAt&&(c=function(h){return new Oo(h.values||[],!h.before)}(n.endAt)),function qU(t,e,n,r,i,o,s,a){return new Ki(t,e,n,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function k2(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ju(n.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ju(n.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ju(n.unaryFilter.field);return Te.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ju(n.unaryFilter.field);return Te.create(s,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):void 0!==t.fieldFilter?Te.create(Ju((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Le.create(n.compositeFilter.filters.map(r=>k2(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J();var n}function Lse(t){return Rse[t]}function Use(t){return Pse[t]}function Bse(t){return Mse[t]}function ko(t){return{fieldPath:t.canonicalString()}}function Ju(t){return ct.fromServerFormat(t.fieldPath)}function V2(t){return t instanceof Te?function(n){if("=="===n.op){if(RU(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(SU(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(RU(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(SU(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:Use(n.op),value:n.value}}}(t):t instanceof Le?function(n){const r=n.getFilters().map(i=>V2(i));return 1===r.length?r[0]:{compositeFilter:{op:Bse(n.op),filters:r}}}(t):J()}function jse(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F2(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Ji{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class L2{constructor(e){this.ct=e}}function lC(t){const e=O2({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?am(e,e.limit,"L"):e}class $s{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(lt(e.integerValue));else if("doubleValue"in e){const r=lt(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Vd(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),"string"==typeof r&&(r=qi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Wi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?PU(e)?this.dt(n,Number.MAX_SAFE_INTEGER):im(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):J()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const o=e.fields||{};this.dt(n,53);const s="value",a=(null===(i=null===(r=o[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(n,15),n.At(lt(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}$s.vt=new $s;class Yse{constructor(){this.un=new mC}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(sr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class mC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Be(we.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(we.comparator)).toArray()}}new Uint8Array(0);class yn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(41943040,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class Gs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gs(0)}static kn(){return new Gs(-1)}}class aB{constructor(){this.changes=new Qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,it.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iae{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class hB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Kd(r.mutation,i,Wn.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=oi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=zd();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=oi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Kn();const s=qd(),a=qd();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(void 0===d||d.mutation instanceof Yi)?o=o.insert(c.key,c):void 0!==d?(s.set(c.key,d.mutation.getFieldMask()),Kd(d.mutation,c,d.mutation.getFieldMask(),gt.now())):s.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,d)=>s.set(c,d)),n.forEach((c,d)=>{var h;return a.set(c,new iae(d,null!==(h=s.get(c))&&void 0!==h?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=qd();let i=new Je((s,a)=>s-a),o=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let d=r.get(u)||Wn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const h=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,h=t2();d.forEach(p=>{if(!o.has(p)){const m=c2(n.get(p),r.get(p));null!==m&&h.set(p,m),o=o.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return W.isDocumentKey((s=n).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):YD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var s}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(oi());let a=-1,u=o;return s.next(c=>M.forEach(c,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{u=u.insert(d,p)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,fe())).next(d=>({batchId:a,changes:e2(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=zd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=zd();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{const c=(h=n,p=u.child(o),new Ki(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,p;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{const d=c.getKey();null===s.get(d)&&(s=s.insert(d,it.newInvalidDocument(d)))});let a=zd();return s.forEach((u,c)=>{const d=o.get(u);void 0!==d&&Kd(d.mutation,c,Wn.empty(),gt.now()),Gd(n,c)&&(a=a.insert(u,c))}),a})}}class oae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,{id:(i=n).id,version:i.version,createTime:Nt(i.createTime)}),M.resolve();var i}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,{name:(i=n).name,query:lC(i.bundledQuery),readTime:Nt(i.readTime)}),M.resolve();var i}}class sae{constructor(){this.overlays=new Je(W.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oi();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=oi(),o=n.length+1,s=new W(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Je((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=o.get(c.largestBatchId);null===d&&(d=oi(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=oi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new rC(n,r));let o=this.Ir.get(n);void 0===o&&(o=fe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}class aae{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class _C{constructor(){this.Tr=new Be(Xt.Er),this.dr=new Be(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new we([])),r=new Xt(n,e),i=new Xt(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new we([])),r=new Xt(n,e),i=new Xt(n,e+1);let o=fe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Xt(e,0),r=this.Tr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||W.comparator(e.key,n.key)}}class uae{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Be(Xt.Er)}checkEmpty(e){return M.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++;const s=new tC(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Xt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.vr(n+1),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),i=new Xt(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ue);return n.forEach(i=>{const o=new Xt(i,0),s=new Xt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;W.isDocumentKey(o)||(o=o.child(""));const s=new Xt(new W(o),0);let a=new Be(ue);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.wr)),!0)},s),M.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){X(0===this.Fr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,i=>{const o=new Xt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xt(n,0),i=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class cae{constructor(e){this.Mr=e,this.docs=new Je(W.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():it.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():it.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Kn();const s=n.path,a=new W(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||UD(new sr((t=d).readTime,t.key,-1),r)<=0||(i.has(d.key)||Gd(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}var t;return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lae(this)}getSize(e){return M.resolve(this.size)}}class lae extends aB{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class dae{constructor(e){this.persistence=e,this.Nr=new Qi(n=>Vs(n),$d),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _C,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Gs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}class yC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ar(0),this.Kr=!1,this.Kr=!0,this.$r=new aae,this.referenceDelegate=e(this),this.Ur=new dae(this),this.indexManager=new Yse,this.remoteDocumentCache=new cae(r=>this.referenceDelegate.Wr(r)),this.serializer=new L2(n),this.Gr=new oae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sae,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uae(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);const i=new hae(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return M.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class hae extends dU{constructor(e){super(),this.currentSequenceNumber=e}}class Em{constructor(e){this.persistence=e,this.Jr=new _C,this.Yr=null}static Zr(e){return new Em(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,r=>{const i=W.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class wC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=fe(),i=fe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new wC(e,n.fromCache,r,i)}}class pae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function aF(){return!function oee(){var t;const e=null===(t=Ig())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function hU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Rt())>0?6:4}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new pae;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Vu()<=Ee.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",zu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(Vu()<=Ee.DEBUG&&U("QueryEngine","Query:",zu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Vu()<=Ee.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",zu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):M.resolve())}Yi(e,n){if(WU(n))return M.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=am(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=fe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,s,u.readTime)?this.Yi(e,am(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return WU(n)||i.isEqual(ee.min())?M.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?M.resolve(null):(Vu()<=Ee.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zu(n)),this.rs(e,s,n,function uU(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(1e9===r?new gt(n+1,0):new gt(n,r));return new sr(i,W.empty(),e)}(i,-1)).next(a=>a))})}ts(e,n){let r=new Be(XU(e));return n.forEach((i,o)=>{Gd(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const o="F"===e.limitType?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Vu()<=Ee.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",zu(n)),this.Ji.getDocumentsMatchingQuery(e,n,sr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}class gae{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Je(ue),this._s=new Qi(o=>Vs(o),$d),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mB(t,e){return TC.apply(this,arguments)}function TC(){return(TC=v(function*(t,e){const n=z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=fe();for(const c of i){s.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function _B(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yae(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rc(t,e,n){return DC.apply(this,arguments)}function DC(){return(DC=v(function*(t,e,n){const r=z(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ro(s))throw s;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Dm(t,e,n){const r=z(t);let i=ee.min(),o=fe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,d){const h=z(u),p=h._s.get(d);return void 0!==p?M.resolve(h.os.get(p)):h.Ur.getTargetData(c,d)}(r,s,_n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:fe())).next(a=>(function EB(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}(r,function JU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Ts:o})))}class RC{constructor(){this.activeTargetIds=function XD(){return vse}()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DB{constructor(){this.so=new RC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new RC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Eae{_o(e){}shutdown(){}}class CB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Am=null;function MC(){return null===Am?Am=268435456+Math.round(2147483648*Math.random()):Am++,"0x"+Am.toString(16)}const wae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Tae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const vn="WebChannelConnection";class Dae extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=MC(),u=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,u,c,i).then(d=>(U("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+ku,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){return`${this.Do}/v1/${r}:${wae[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=MC();return new Promise((s,a)=>{const u=new XL;u.setWithCredentials(!0),u.listenOnce(ZL.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qg.NO_ERROR:const d=u.getResponseJson();U(vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Qg.TIMEOUT:U(vn,`RPC '${e}' ${o} timed out`),a(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case Qg.HTTP_ERROR:const h=u.getStatus();if(U(vn,`RPC '${e}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const _=function(E){const b=E.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(b)>=0?b:x.UNKNOWN}(m.status);a(new B(_,m.message))}else a(new B(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new B(x.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{U(vn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);U(vn,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=MC(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nU(),a=tU(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=o.join("");U(vn,`Creating RPC '${e}' stream ${i}: ${d}`,u);const h=s.createWebChannel(d,u);let p=!1,m=!1;const _=new Tae({Io:E=>{m?U(vn,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(U(vn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),U(vn,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),I=(E,b,A)=>{E.listen(b,O=>{try{A(O)}catch(F){setTimeout(()=>{throw F},0)}})};return I(h,Nd.EventType.OPEN,()=>{m||(U(vn,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),I(h,Nd.EventType.CLOSE,()=>{m||(m=!0,U(vn,`RPC '${e}' stream ${i} transport closed`),_.So())}),I(h,Nd.EventType.ERROR,E=>{m||(m=!0,wr(vn,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new B(x.UNAVAILABLE,"The operation could not be completed")))}),I(h,Nd.EventType.MESSAGE,E=>{var b;if(!m){const A=E.data[0];X(!!A);const F=A.error||(null===(b=A[0])||void 0===b?void 0:b.error);if(F){U(vn,`RPC '${e}' stream ${i} received error:`,F);const K=F.status;let Q=function(T){const S=Lt[T];if(void 0!==S)return m2(S)}(K),C=F.message;void 0===Q&&(Q=x.INTERNAL,C="Unknown error status: "+K+" with message "+F.message),m=!0,_.So(new B(Q,C)),h.close()}else U(vn,`RPC '${e}' stream ${i} received:`,A),_.bo(A)}}),I(a,eU.STAT_EVENT,E=>{E.stat===VD.PROXY?U(vn,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===VD.NOPROXY&&U(vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function Sm(){return typeof document<"u"?document:null}function ah(t){return new Nse(t,!0)}class NC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class AB{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new NC(e,n)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return v(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return v(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){var r=this;return v(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Mt(n.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(n)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go(v(function*(){e.state=0,e.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cae extends AB{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=function kse(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:J(),i=e.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(X(void 0===d||"string"==typeof d),It.fromBase64String(d||"")):(X(void 0===d||d instanceof Buffer||d instanceof Uint8Array),It.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const d=void 0===c.code?x.UNKNOWN:m2(c.code);return new B(d,c.message||"")}(s);n=new E2(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=si(t,r.document.name),o=Nt(r.document.updateTime),s=r.document.createTime?Nt(r.document.createTime):ee.min(),a=new on({mapValue:{fields:r.document.fields}}),u=it.newFoundDocument(i,o,s,a);n=new hm(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=si(t,r.document),o=r.readTime?Nt(r.readTime):ee.min(),s=it.newNoDocument(i,o);n=new hm([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=si(t,r.document);n=new hm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return J();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new bse(i,o);n=new I2(r.targetId,s)}}var c;return n}(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Nt(s.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=uC(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=om(u)?{documents:N2(o,u)}:{query:fm(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=C2(o,s.resumeToken);const c=oC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=Yu(o,s.snapshotVersion.toTimestamp());const c=oC(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Fse(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=uC(this.serializer),n.removeTarget=e,this.a_(n)}}class bae extends AB{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return X(!!e.streamToken),this.lastStreamToken=e.streamToken,X(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=function Vse(t,e){return t&&t.length>0?(X(void 0!==e),t.map(n=>function(i,o){let s=Nt(i.updateTime?i.updateTime:o);return s.isEqual(ee.min())&&(s=Nt(o)),new Tse(s,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Nt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=uC(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Zd(t,e){let n;if(e instanceof Ku)n={update:P2(t,e.key,e.value)};else if(e instanceof Qu)n={delete:Xd(t,e.key)};else if(e instanceof Yi)n={update:P2(t,e.key,e.data),updateMask:jse(e.fieldMask)};else{if(!(e instanceof eC))return J();n={verify:Xd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof qu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ls)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wu)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:xse(t,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:J()),n;var o}(this.serializer,r))};this.a_(n)}}class Aae extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,aC(n,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,aC(n,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Sae{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mt(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Rae{constructor(e,n,r,i,o){var s=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(v(function*(){var u;Uo(s)&&(U("RemoteStore","Restarting streams for network reachability change."),yield(u=v(function*(d){const h=z(d);h.L_.add(4),yield ic(h),h.q_.set("Unknown"),h.L_.delete(4),yield uh(h)}),function c(d){return u.apply(this,arguments)})(s))}))}),this.q_=new Sae(r,i)}}function uh(t){return xC.apply(this,arguments)}function xC(){return(xC=v(function*(t){if(Uo(t))for(const e of t.B_)yield e(!0)})).apply(this,arguments)}function ic(t){return OC.apply(this,arguments)}function OC(){return(OC=v(function*(t){for(const e of t.B_)yield e(!1)})).apply(this,arguments)}function Rm(t,e){const n=z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),FC(n)?VC(n):ac(n).r_()&&kC(n,e))}function oc(t,e){const n=z(t),r=ac(n);n.N_.delete(e),r.r_()&&SB(n,e),0===n.N_.size&&(r.r_()?r.o_():Uo(n)&&n.q_.set("Unknown"))}function kC(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(t).A_(e)}function SB(t,e){t.Q_.xe(e),ac(t).R_(e)}function VC(t){t.Q_=new Sse({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ac(t).start(),t.q_.v_()}function FC(t){return Uo(t)&&!ac(t).n_()&&t.N_.size>0}function Uo(t){return 0===z(t).L_.size}function RB(t){t.Q_=void 0}function Pae(t){return LC.apply(this,arguments)}function LC(){return(LC=v(function*(t){t.q_.set("Online")})).apply(this,arguments)}function Mae(t){return UC.apply(this,arguments)}function UC(){return(UC=v(function*(t){t.N_.forEach((e,n)=>{kC(t,e)})})).apply(this,arguments)}function Nae(t,e){return BC.apply(this,arguments)}function BC(){return(BC=v(function*(t,e){RB(t),FC(t)?(t.q_.M_(e),VC(t)):t.q_.set("Unknown")})).apply(this,arguments)}function xae(t,e,n){return jC.apply(this,arguments)}function jC(){return jC=v(function*(t,e,n){if(t.q_.set("Online"),e instanceof E2&&2===e.state&&e.cause)try{yield(r=v(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.N_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.N_.delete(u),o.Q_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pm(t,r)}else if(e instanceof hm?t.Q_.Ke(e):e instanceof I2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=yield _B(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.N_.get(c);d&&o.N_.set(c,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(It.EMPTY_BYTE_STRING,d.snapshotVersion)),SB(o,u);const h=new Ji(d.target,u,c,d.sequenceNumber);kC(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Pm(t,r)}var r}),jC.apply(this,arguments)}function Pm(t,e,n){return $C.apply(this,arguments)}function $C(){return($C=v(function*(t,e,n){if(!Ro(e))throw e;t.L_.add(1),yield ic(t),t.q_.set("Offline"),n||(n=()=>_B(t.localStore)),t.asyncQueue.enqueueRetryable(v(function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield uh(t)}))})).apply(this,arguments)}function PB(t,e){return e().catch(n=>Pm(t,n,e))}function sc(t){return HC.apply(this,arguments)}function HC(){return(HC=v(function*(t){const e=z(t),n=Bo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Oae(e);)try{const i=yield yae(e.localStore,r);if(null===i){0===e.O_.length&&n.o_();break}r=i.batchId,kae(e,i)}catch(i){yield Pm(e,i)}MB(e)&&NB(e)})).apply(this,arguments)}function Oae(t){return Uo(t)&&t.O_.length<10}function kae(t,e){t.O_.push(e);const n=Bo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function MB(t){return Uo(t)&&!Bo(t).n_()&&t.O_.length>0}function NB(t){Bo(t).start()}function Vae(t){return GC.apply(this,arguments)}function GC(){return(GC=v(function*(t){Bo(t).p_()})).apply(this,arguments)}function Fae(t){return zC.apply(this,arguments)}function zC(){return(zC=v(function*(t){const e=Bo(t);for(const n of t.O_)e.m_(n.mutations)})).apply(this,arguments)}function Lae(t,e,n){return qC.apply(this,arguments)}function qC(){return(qC=v(function*(t,e,n){const r=t.O_.shift(),i=nC.from(r,e,n);yield PB(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield sc(t)})).apply(this,arguments)}function Uae(t,e){return WC.apply(this,arguments)}function WC(){return WC=v(function*(t,e){var n;e&&Bo(t).V_&&(yield(n=v(function*(i,o){if(function g2(t){switch(t){default:return J();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}(a=o.code)&&a!==x.ABORTED){const s=i.O_.shift();Bo(i).s_(),yield PB(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield sc(i)}var a}),function r(i,o){return n.apply(this,arguments)})(t,e)),MB(t)&&NB(t)}),WC.apply(this,arguments)}function xB(t,e){return KC.apply(this,arguments)}function KC(){return(KC=v(function*(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");const r=Uo(n);n.L_.add(3),yield ic(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield uh(n)})).apply(this,arguments)}function QC(t,e){return YC.apply(this,arguments)}function YC(){return(YC=v(function*(t,e){const n=z(t);e?(n.L_.delete(2),yield uh(n)):e||(n.L_.add(2),yield ic(n),n.q_.set("Unknown"))})).apply(this,arguments)}function ac(t){return t.K_||(t.K_=function(n,r,i){const o=z(n);return o.w_(),new Cae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Pae.bind(null,t),Ro:Mae.bind(null,t),mo:Nae.bind(null,t),d_:xae.bind(null,t)}),t.B_.push(function(){var e=v(function*(n){n?(t.K_.s_(),FC(t)?VC(t):t.q_.set("Unknown")):(yield t.K_.stop(),RB(t))});return function(n){return e.apply(this,arguments)}}())),t.K_}function Bo(t){return t.U_||(t.U_=function(n,r,i){const o=z(n);return o.w_(),new bae(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Vae.bind(null,t),mo:Uae.bind(null,t),f_:Fae.bind(null,t),g_:Lae.bind(null,t)}),t.B_.push(function(){var e=v(function*(n){n?(t.U_.s_(),yield sc(t)):(yield t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))});return function(n){return e.apply(this,arguments)}}())),t.U_}class JC{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new JC(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uc(t,e){if(Mt("AsyncQueue",`${e}: ${t}`),Ro(t))return new B(x.UNAVAILABLE,`${e}: ${t}`);throw t}class cc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=zd(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new cc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof cc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new cc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class OB{constructor(){this.W_=new Je(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(n,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(n):1===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class lc{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new lc(e,n,cc.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class Bae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class jae{constructor(){this.queries=kB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(n,r){const i=z(n),o=i.queries;i.queries=kB(),o.forEach((s,a)=>{for(const u of a.j_)u.onError(r)})}(this,new B(x.ABORTED,"Firestore shutting down"))}}function kB(){return new Qi(t=>YU(t),Hd)}function ZC(){return(ZC=v(function*(t,e){const n=z(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Bae,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){const a=uc(s,`Initialization of query '${zu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&nb(n)})).apply(this,arguments)}function tb(){return(tb=v(function*(t,e){const n=z(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),0===o.j_.length?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function $ae(t,e){const n=z(t);let r=!1;for(const i of e){const s=n.queries.get(i.query);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&nb(n)}function Hae(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function nb(t){t.Y_.forEach(e=>{e.next()})}var rb,VB;(VB=rb||(rb={})).ea="default",VB.Cache="cache";class ib{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new lc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=lc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rb.Cache}}class UB{constructor(e){this.key=e}}class BB{constructor(e){this.key=e}}class jB{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=XU(e),this.Ra=new cc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new OB,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const p=i.get(d),m=Gd(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),I=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;p&&m?p.data.isEqual(m.data)?_!==I&&(r.track({type:3,doc:m}),E=!0):this.ga(p,m)||(r.track({type:2,doc:m}),E=!0,(u&&this.Aa(m,u)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(u||c)&&(a=!0)),E&&(m?(s=s.add(m),o=I?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const d="F"===this.query.limitType?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,h)=>function(m,_){const I=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return I(m)-I(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=null!=i&&i;const a=n&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,0!==s.length||c?{snapshot:new lc(this.query,e.Ra,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new OB,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new BB(r))}),this.da.forEach(r=>{e.has(r)||n.push(new UB(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return lc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class qae{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Wae{constructor(e){this.key=e,this.va=!1}}class Kae{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Qi(a=>YU(a),Hd),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(W.comparator),this.Na=new Map,this.La=new _C,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Qae(t,e){return ob.apply(this,arguments)}function ob(){return(ob=v(function*(t,e,n=!0){const r=Mm(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield $B(r,e,n,!0),i})).apply(this,arguments)}function Yae(t,e){return sb.apply(this,arguments)}function sb(){return(sb=v(function*(t,e){const n=Mm(t);yield $B(n,e,!0,!1)})).apply(this,arguments)}function $B(t,e,n,r){return ab.apply(this,arguments)}function ab(){return(ab=v(function*(t,e,n,r){const i=yield function nc(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ji(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}(t.localStore,_n(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=yield function ub(t,e,n,r,i){return cb.apply(this,arguments)}(t,e,o,"current"===s,i.resumeToken)),t.isPrimaryClient&&n&&Rm(t.remoteStore,i),a})).apply(this,arguments)}function cb(){return cb=v(function*(t,e,n,r,i){t.Ka=(h,p,m)=>{return(_=v(function*(E,b,A,O){let F=b.view.ma(A);F.ns&&(F=yield Dm(E.localStore,b.query,!1).then(({documents:w})=>b.view.ma(w,F)));const K=O&&O.targetChanges.get(b.targetId),Q=O&&null!=O.targetMismatches.get(b.targetId),C=b.view.applyChanges(F,E.isPrimaryClient,K,Q);return Ib(E,b.targetId,C.wa),C.snapshot}),function I(E,b,A,O){return _.apply(this,arguments)})(t,h,p,m);var _};const o=yield Dm(t.localStore,e,!0),s=new jB(e,o.Ts),a=s.ma(o.documents),u=Jd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=s.applyChanges(a,t.isPrimaryClient,u);Ib(t,n,c.wa);const d=new qae(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}),cb.apply(this,arguments)}function Jae(t,e,n){return lb.apply(this,arguments)}function lb(){return(lb=v(function*(t,e,n){const r=z(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Hd(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oc(r.remoteStore,i.targetId),dc(r,i.targetId)}).catch(So))):(dc(r,i.targetId),yield rc(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Xae(t,e){return db.apply(this,arguments)}function db(){return(db=v(function*(t,e){const n=z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oc(n.remoteStore,r.targetId))})).apply(this,arguments)}function hb(){return(hb=v(function*(t,e,n){const r=function Mb(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nue.bind(null,e),e}(t);try{const i=yield function(s,a){const u=z(s),c=gt.now(),d=a.reduce((m,_)=>m.add(_.key),fe());let h,p;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Kn(),I=fe();return u.cs.getEntries(m,d).next(E=>{_=E,_.forEach((b,A)=>{A.isValidDocument()||(I=I.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,_)).next(E=>{h=E;const b=[];for(const A of a){const O=Cse(A,h.get(A.key).overlayedDocument);null!=O&&b.push(new Yi(A.key,O,OU(O.value.mapValue),dt.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,b,a)}).next(E=>{p=E;const b=E.applyToLocalDocumentSet(h,I);return u.documentOverlayCache.saveOverlays(m,E.batchId,b)})}).then(()=>({batchId:p.batchId,changes:e2(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Ba[s.currentUser.toKey()];c||(c=new Je(ue)),c=c.insert(a,u),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Xi(r,i.changes),yield sc(r.remoteStore)}catch(i){const o=uc(i,"Failed to persist write");n.reject(o)}})).apply(this,arguments)}function HB(t,e){return fb.apply(this,arguments)}function fb(){return(fb=v(function*(t,e){const n=z(t);try{const r=yield function _ae(t,e){const n=z(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,h)=>{const p=i.get(h);if(!p)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,h)));let m=p.withSequenceNumber(o.currentSequenceNumber);var I,E,b;null!==e.targetMismatches.get(h)?m=m.withResumeToken(It.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),E=m,b=d,(0===(I=p).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8||b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(o,m))});let u=Kn(),c=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(function yB(t,e,n){let r=fe(),i=fe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Kn();return n.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:s,Is:i}})}(o,s,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(o).next(h=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.os=i,o))}(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?X(s.va):i.removedDocuments.size>0&&(X(s.va),s.va=!1))}),yield Xi(n,r,e)}catch(r){yield So(r)}})).apply(this,arguments)}function GB(t,e,n){const r=z(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=z(s);u.onlineState=a;let c=!1;u.queries.forEach((d,h)=>{for(const p of h.j_)p.Z_(a)&&(c=!0)}),c&&nb(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function eue(t,e,n){return pb.apply(this,arguments)}function pb(){return(pb=v(function*(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Je(W.comparator);s=s.insert(o,it.newNoDocument(o,ee.min()));const a=fe().add(o),u=new Yd(ee.min(),new Map,new Je(ue),s,a);yield HB(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Eb(r)}else yield rc(r.localStore,e,!1).then(()=>dc(r,e,n)).catch(So)})).apply(this,arguments)}function tue(t,e){return gb.apply(this,arguments)}function gb(){return(gb=v(function*(t,e){const n=z(t),r=e.batch.batchId;try{const i=yield function mae(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const h=c.batch,p=h.keys();let m=M.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(u,_)).next(I=>{const E=c.docVersions.get(_);X(null!==E),I.version.compareTo(E)<0&&(h.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),d.addEntry(I)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);vb(n,r,null),yb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Xi(n,i)}catch(i){yield So(i)}})).apply(this,arguments)}function nue(t,e,n){return mb.apply(this,arguments)}function mb(){return(mb=v(function*(t,e,n){const r=z(t);try{const i=yield function(s,a){const u=z(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(X(null!==h),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);vb(r,e,n),yb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Xi(r,i)}catch(i){yield So(i)}})).apply(this,arguments)}function yb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vb(t,e,n){const r=z(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function dc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zB(t,r)})}function zB(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(oc(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Eb(t))}function Ib(t,e,n){for(const r of n)r instanceof UB?(t.La.addReference(r.key,e),iue(t,r)):r instanceof BB?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zB(t,r.key)):J()}function iue(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),Eb(t))}function Eb(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(we.fromString(e)),r=t.qa.next();t.Na.set(r,new Wae(n)),t.Oa=t.Oa.insert(n,r),Rm(t.remoteStore,new Ji(_n(Hu(n.path)),r,"TargetPurposeLimboResolution",ar.oe))}}function Xi(t,e,n){return wb.apply(this,arguments)}function wb(){return wb=v(function*(t,e,n){const r=z(t),i=[],o=[],s=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:null===(d=n?.targetChanges.get(u.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=wC.Wi(u.targetId,c);o.push(h)}}))}),yield Promise.all(s),r.Ca.d_(i),yield(a=v(function*(c,d){const h=z(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(d,m=>M.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>M.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Ro(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const _=h.os.get(m),E=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.os=h.os.insert(m,E)}}}),function u(c,d){return a.apply(this,arguments)})(r.localStore,o))}),wb.apply(this,arguments)}function oue(t,e){return Tb.apply(this,arguments)}function Tb(){return(Tb=v(function*(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());const r=yield mB(n.localStore,e);n.currentUser=e,(o=n).ka.forEach(a=>{a.forEach(u=>{u.reject(new B(x.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ka.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xi(n,r.hs)}var o})).apply(this,arguments)}function sue(t,e){const n=z(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let i=fe();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function Mm(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eue.bind(null,e),e.Ca.d_=$ae.bind(null,e.eventManager),e.Ca.$a=Hae.bind(null,e.eventManager),e}let hc=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){var r=this;return v(function*(){r.serializer=ah(n.databaseInfo.databaseId),r.sharedClientState=r.Wa(n),r.persistence=r.Ga(n),yield r.persistence.start(),r.localStore=r.za(n),r.gcScheduler=r.ja(n,r.localStore),r.indexBackfillerScheduler=r.Ha(n,r.localStore)})()}ja(n,r){return null}Ha(n,r){return null}za(n){return function gB(t,e,n,r){return new gae(t,e,n,r)}(this.persistence,new pB,n.initialUser,this.serializer)}Ga(n){return new yC(Em.Zr,this.serializer)}Wa(n){return new DB}terminate(){var n=this;return v(function*(){var r,i;null===(r=n.gcScheduler)||void 0===r||r.stop(),null===(i=n.indexBackfillerScheduler)||void 0===i||i.stop(),n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}return t.provider={build:()=>new t},t})(),fc=(()=>{class t{initialize(n,r){var i=this;return v(function*(){i.localStore||(i.localStore=n.localStore,i.sharedClientState=n.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!n.synchronizeTabs),i.sharedClientState.onlineStateHandler=o=>GB(i.syncEngine,o,1),i.remoteStore.remoteSyncer.handleCredentialChange=oue.bind(null,i.syncEngine),yield QC(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(n){return new jae}createDatastore(n){const r=ah(n.databaseInfo.databaseId),i=new Dae(n.databaseInfo);return new Aae(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return i=this.localStore,o=this.datastore,s=n.asyncQueue,a=r=>GB(this.syncEngine,r,0),u=CB.D()?new CB:new Eae,new Rae(i,o,s,a,u);var i,o,s,a,u}createSyncEngine(n,r){return function(o,s,a,u,c,d,h){const p=new Kae(o,s,a,u,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){var n=this;return v(function*(){var r,i,o;yield(o=v(function*(a){const u=z(a);U("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield ic(u),u.k_.shutdown(),u.q_.set("Unknown")}),function s(a){return o.apply(this,arguments)})(n.remoteStore),null===(r=n.datastore)||void 0===r||r.terminate(),null===(i=n.eventManager)||void 0===i||i.terminate()})()}}return t.provider={build:()=>new t},t})();class Nm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}class vue{constructor(e,n,r,i,o){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=sU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,function(){var a=v(function*(u){U("FirestoreClient","Received user=",u.uid),yield s.authCredentialListener(u),s.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(U("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=uc(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function xb(t,e){return Ob.apply(this,arguments)}function Ob(){return Ob=v(function*(t,e){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=v(function*(o){r.isEqual(o)||(yield mB(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),Ob.apply(this,arguments)}function YB(t,e){return kb.apply(this,arguments)}function kb(){return(kb=v(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function Vb(t){return Fb.apply(this,arguments)}(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xB(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xB(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function Fb(){return(Fb=v(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xb(t,t._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;wr("Error using user provided cache. Falling back to memory cache: "+e),yield xb(t,new hc)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield xb(t,new hc);var i;return t._offlineComponents})).apply(this,arguments)}function xm(t){return Lb.apply(this,arguments)}function Lb(){return(Lb=v(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield YB(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield YB(t,new fc))),t._onlineComponents})).apply(this,arguments)}function gc(t){return Bb.apply(this,arguments)}function Bb(){return(Bb=v(function*(t){const e=yield xm(t),n=e.eventManager;return n.onListen=Qae.bind(null,e.syncEngine),n.onUnlisten=Jae.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Yae.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Xae.bind(null,e.syncEngine),n})).apply(this,arguments)}function nj(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const rj=new Map;function jb(t,e,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ij(t){if(!W.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oj(t){if(W.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Om(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":J()}function ve(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Om(t);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class aj{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Mue(t,e,n,r){if(!0===e&&!0===r)throw new B(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=nj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aj(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Doe;switch(r.type){case"firstParty":return new Soe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return v(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rj.get(n);r&&(U("ComponentProvider","Removing Datastore"),rj.delete(n),r.terminate())}(this),Promise.resolve()}}class sn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sn(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class ai extends sn{constructor(e,n,r){super(e,n,Hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new W(e))}withConverter(e){return new ai(this.firestore,e,this._path)}}function xue(t,e,...n){if(t=Fe(t),jb("collection","path",e),t instanceof ch){const r=we.fromString(e,...n);return oj(r),new ai(t,null,r)}{if(!(t instanceof xt||t instanceof ai))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return oj(r),new ai(t.firestore,null,r)}}function uj(t,e,...n){if(t=Fe(t),1===arguments.length&&(e=sU.newId()),jb("doc","path",e),t instanceof ch){const r=we.fromString(e,...n);return ij(r),new xt(t,null,new W(r))}{if(!(t instanceof xt||t instanceof ai))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return ij(r),new xt(t.firestore,t instanceof ai?t.converter:null,new W(r))}}class lj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new NC(this,"async_queue_retry"),this.Vu=()=>{const r=Sm();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sm();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sm();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return v(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(n){if(!Ro(n))throw n;U("AsyncQueue","Operation failed with retryable error: "+n)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Mt("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=JC.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&J()}verifyOperationInProgress(){}wu(){var e=this;return v(function*(){let n;do{n=e.mu,yield n}while(n!==e.mu)})()}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function $b(t){return function(n,r){if("object"!=typeof n||null===n)return!1;const i=n;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(t)}class He extends ch{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return v(function*(){if(e._firestoreClient){const n=e._firestoreClient.terminate();e._queue=new lj(n),e._firestoreClient=void 0,yield n}})()}}function kue(t,e){const r="string"==typeof t?t:e||"(default)",i=ki("object"==typeof t?t:Du(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=nw("firestore");o&&function Nue(t,e,n,r={}){var i;const o=(t=ve(t,ch))._getSettings(),s=`${e}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Yt.MOCK_USER;else{a=sF(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yt(c)}t._authCredentials=new Coe(new iU(a,u))}}(i,...o)}return i}function mt(t){if(t._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function dj(t){var e,n,r;const i=t._freezeSettings(),o=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new ise(t._databaseId,u,t._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nj(d.experimentalLongPollingOptions),d.useFetchStreams));var u,d;t._componentsProvider||!(null===(n=i.localCache)||void 0===n)&&n._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vue(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}(t),t._firestoreClient}class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(It.fromBase64String(e))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qs(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ws{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ks{constructor(e){this._methodName=e}}class Gb{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}class km{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}const Fue=/^__.*__$/;class Lue{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ku(e,this.data,n,this.fieldTransforms)}}class fj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Vm{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Um(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(pj(this.Cu)&&Fue.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Uue{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ah(e)}Qu(e,n,r,i=!1){return new Vm({Cu:e,methodName:n,qu:r,path:ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qs(t){const e=t._freezeSettings(),n=ah(t._databaseId);return new Uue(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fm(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);Jb("Data must be an object, but it was:",s,r);const a=_j(r,s);let u,c;if(o.merge)u=new Wn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const p=hh(e,h,n);if(!s.contains(p))throw new B(x.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vj(d,p)||d.push(p)}u=new Wn(d),c=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=s.fieldTransforms;return new Lue(new on(a),u,c)}class dh extends Ks{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dh}}class zb extends Ks{_toFieldTransform(e){return new Wd(e.path,new qu)}isEqual(e){return e instanceof zb}}function Ys(t,e){if(yj(t=Fe(t)))return Jb("Unsupported field value:",e,t),_j(t,e);if(t instanceof Ks)return function(r,i){if(!pj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Ys(a,i.Lu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if(null===(r=Fe(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return r2(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=gt.fromDate(r);return{timestampValue:Yu(i.serializer,o)}}if(r instanceof gt){const o=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yu(i.serializer,o)}}if(r instanceof Gb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:C2(i.serializer,r._byteString)};if(r instanceof xt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof km)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return ZD(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Om(r)}`)}(t,e)}function _j(t,e){const n={};return TU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(t,(r,i)=>{const o=Ys(i,e.Mu(r));null!=o&&(n[r]=o)}),{mapValue:{fields:n}}}function yj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Gb||t instanceof qs||t instanceof xt||t instanceof Ks||t instanceof km)}function Jb(t,e,n){if(!yj(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Om(n);throw e.Bu("an object"===r?t+" a custom object":t+" "+r)}var i}function hh(t,e,n){if((e=Fe(e))instanceof Ws)return e._internalPath;if("string"==typeof e)return Lm(t,e);throw Um("Field path arguments must be of type string or ",t,!1,void 0,n)}const Bue=new RegExp("[~\\*/\\[\\]]");function Lm(t,e,n){if(e.search(Bue)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ws(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Um(t,e,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(x.INVALID_ARGUMENT,a+t+u)}function vj(t,e){return t.some(n=>n.isEqual(e))}class fh{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class jue extends fh{data(){return super.data()}}function Bm(t,e){return"string"==typeof e?Lm(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}class Xb{}class ph extends Xb{}function $ue(t,e,...n){let r=[];e instanceof Xb&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof mc).length,a=o.filter(u=>u instanceof gh).length;if(s>1||s>0&&a>0)throw new B(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class gh extends ph{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new gh(e,n,r)}_apply(e){const n=this._parse(e);return Dj(e._query,n),new sn(e.firestore,e.converter,JD(e._query,n))}_parse(e){const n=Qs(e.firestore);return function(o,s,a,u,c,d,h){let p;if(c.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new B(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){Tj(h,d);const m=[];for(const _ of h)m.push(wj(u,o,_));p={arrayValue:{values:m}}}else p=wj(u,o,h)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||Tj(h,d),p=function mj(t,e,n,r=!1){return Ys(n,t.Qu(r?4:3,e))}(a,"where",h,"in"===d||"not-in"===d);return Te.create(c,d,p)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class mc extends Xb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mc(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Le.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)Dj(s,u),s=JD(s,u)}(e._query,n),new sn(e.firestore,e.converter,JD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zb extends ph{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zb(e,n)}_apply(e){const n=function(i,o,s){if(null!==i.startAt)throw new B(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new B(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jd(o,s)}(e._query,this._field,this._direction);return new sn(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ki(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Hue(t,e="asc"){const n=e,r=Bm("orderBy",t);return Zb._create(r,n)}class jm extends ph{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jm(e,n,r)}_apply(e){return new sn(e.firestore,e.converter,am(e._query,this._limit,this._limitType))}}function Gue(t){return function sj(t,e){if(e<=0)throw new B(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}("limit",t),jm._create("limit",t,"F")}function wj(t,e,n){if("string"==typeof(n=Fe(n))){if(""===n)throw new B(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YD(e)&&-1!==n.indexOf("/"))throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!W.isDocumentKey(r))throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ks(t,new W(r))}if(n instanceof xt)return ks(t,n._key);throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Om(n)}.`)}function Tj(t,e){if(!Array.isArray(t)||0===t.length)throw new B(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Dj(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new B(x.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bj{convertValue(e,n="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Po(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(s=>lt(s.doubleValue));return new km(o)}convertGeoPoint(e){return new Gb(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=em(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fd(e));default:return null}}convertTimestamp(e){const n=qi(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);X(F2(r));const i=new Os(r.get(1),r.get(3)),o=new W(r.popFirst(5));return i.isEqual(n)||Mt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}function Gm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Js{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _c extends fh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class zm extends _c{data(e={}){return super.data(e)}}class yc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Js(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zm(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new zm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new zm(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Wue(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Wue(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class jo extends bj{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Kue(t,e,n){t=ve(t,xt);const r=ve(t.firestore,He),i=Gm(t.converter,e,n);return mh(r,[Fm(Qs(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,dt.none())])}function Que(t,e,n,...r){t=ve(t,xt);const i=ve(t.firestore,He),o=Qs(i);let s;return s="string"==typeof(e=Fe(e))||e instanceof Ws?function Yb(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[hh(e,r,n)],u=[i];if(o.length%2!=0)throw new B(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(hh(e,o[p])),u.push(o[p+1]);const c=[],d=on.empty();for(let p=a.length-1;p>=0;--p)if(!vj(c,a[p])){const m=a[p];let _=u[p];_=Fe(_);const I=s.Nu(m);if(_ instanceof dh)c.push(m);else{const E=Ys(_,I);null!=E&&(c.push(m),d.set(m,E))}}const h=new Wn(c);return new fj(d,h,s.fieldTransforms)}(o,"updateDoc",t._key,e,n,r):function Qb(t,e,n,r){const i=t.Qu(1,e,n);Jb("Data must be an object, but it was:",i,r);const o=[],s=on.empty();Po(r,(u,c)=>{const d=Lm(e,u,n);c=Fe(c);const h=i.Nu(d);if(c instanceof dh)o.push(d);else{const p=Ys(c,h);null!=p&&(o.push(d),s.set(d,p))}});const a=new Wn(o);return new fj(s,a,i.fieldTransforms)}(o,"updateDoc",t._key,e),mh(i,[s.toMutation(t._key,dt.exists(!0))])}function Yue(t,e){const n=ve(t.firestore,He),r=uj(t),i=Gm(t.converter,e);return mh(n,[Fm(Qs(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,dt.exists(!1))]).then(()=>r)}function mh(t,e){return function(r,i){const o=new Jt;return r.asyncQueue.enqueueAndForget(v(function*(){return function Zae(t,e,n){return hb.apply(this,arguments)}(yield function Ub(t){return xm(t).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(mt(t),e)}function cce(){return new zb("serverTimestamp")}!function(e,n=!0){ku=Cs,vr(new or("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new He(new boe(r.getProvider("auth-internal")),new Roe(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Os(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),tt(rU,"4.7.3",e),tt(rU,"4.7.3","esm2017")}();var Wm=function(){return Wm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Wm.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var dce={includeMetadataChanges:!1};function rA(t,e){return void 0===e&&(e=dce),new yt(function(n){var r=function Jue(t,...e){var n,r,i;t=Fe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||$b(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if($b(e[s])){const h=e[s];e[s]=null===(n=h.next)||void 0===n?void 0:n.bind(h),e[s+1]=null===(r=h.error)||void 0===r?void 0:r.bind(h),e[s+2]=null===(i=h.complete)||void 0===i?void 0:i.bind(h)}let u,c,d;if(t instanceof xt)c=ve(t.firestore,He),d=Hu(t._key.path),u={next:h=>{e[s]&&e[s](function eA(t,e,n){const r=n.docs.get(e._key),i=new jo(t);return new _c(t,i,e._key,r,new Js(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,h))},error:e[s+1],complete:e[s+2]};else{const h=ve(t,sn);c=ve(h.firestore,He),d=h._query;const p=new jo(c);u={next:m=>{e[s]&&e[s](new yc(c,p,h,m))},error:e[s+1],complete:e[s+2]},function Ij(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(p,m,_,I){const E=new Nm(I),b=new ib(m,E,_);return p.asyncQueue.enqueueAndForget(v(function*(){return function XC(t,e){return ZC.apply(this,arguments)}(yield gc(p),b)})),()=>{E.Za(),p.asyncQueue.enqueueAndForget(v(function*(){return function eb(t,e){return tb.apply(this,arguments)}(yield gc(p),b)}))}}(mt(c),d,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function yce(t,e){return void 0===e&&(e={}),function _ce(t){return rA(t,{includeMetadataChanges:!0}).pipe(De(function(e){return e.docs}))}(t).pipe(De(function(n){return n.map(function(r){return function Pj(t,e){var n;void 0===e&&(e={});var r=t.data(e);return t.exists()&&"object"==typeof r&&null!==r&&e.idField?Wm(Wm({},r),((n={})[e.idField]=t.id,n)):r}(r,e)})}))}class Km{constructor(e){return e}}const Oj="firestore",sA=new Y("angularfire2.firestore-instances");function wce(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Km(r)}}const Tce={provide:class Ice{constructor(){return Cu(Oj)}},deps:[[new ft,sA]]},Dce={provide:Km,useFactory:function Ece(t,e){const n=_d(Oj,t,e);return n&&new Km(n)},deps:[[new ft,sA],Do]},bce=ut(yce,!0),Ace=ut(Yue,!0),kj=ut(xue,!0),Sce=ut(uj,!0),Rce=ut(kue,!0),Pce=ut(Gue,!0),Mce=ut(Hue,!0),Nce=ut($ue,!0),xce=ut(cce,!0),Oce=ut(Kue,!0),kce=ut(Que,!0),Vj="firebasestorage.googleapis.com",Fj="storageBucket";class _t extends yr{constructor(e,n,r=0){super(aA(e),`Firebase Storage: ${n} (${aA(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return aA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ht=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(ht||{});function aA(t){return"storage/"+t}function uA(){return new _t(ht.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Lj(){return new _t(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Uj(){return new _t(ht.CANCELED,"User canceled the upload/download.")}function Bj(){return new _t(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cA(t){return new _t(ht.INVALID_ARGUMENT,t)}function jj(){return new _t(ht.APP_DELETED,"The Firebase app was deleted.")}function _h(t,e){return new _t(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yh(t){throw new _t(ht.INTERNAL_ERROR,"Internal error: "+t)}class On{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=On.makeFromUrl(e,n)}catch{return new On(e,"")}if(""===r.path)return r;throw function zce(t){return new _t(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(F){F.path_=decodeURIComponent(F.path)}const h=n.replace(/[.]/g,"\\."),O=[{regex:a,indices:{bucket:1,path:3},postModify:function o(F){"/"===F.path.charAt(F.path.length-1)&&(F.path_=F.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${h}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${n===Vj?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let F=0;F<O.length;F++){const K=O[F],Q=K.regex.exec(e);if(Q){let w=Q[K.indices.path];w||(w=""),r=new On(Q[K.indices.bucket],w),K.postModify(r);break}}if(null==r)throw function Gce(t){return new _t(ht.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class Jce{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Qm(t){return"string"==typeof t||t instanceof String}function $j(t){return lA()&&t instanceof Blob}function lA(){return typeof Blob<"u"}function dA(t,e,n,r){if(r<e)throw cA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw cA(`Invalid value for '${t}'. Expected ${n} or less.`)}function Zi(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Hj(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var vc=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(vc||{});function Gj(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),o=-1!==e.indexOf(t);return n||i||o}class rle{constructor(e,n,r,i,o,s,a,u,c,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,_)=>{this.resolve_=m,this.reject_=_,this.start_()})}start_(){const n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function ele(t){return void 0!==t}(u)?o():o(u)}catch(u){s(u)}else if(null!==a){const u=uA();u.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,u):u)}else s(i.canceled?this.appDelete_?jj():Uj():Lj())};this.canceled_?n(0,new Ym(!1,null,!0)):this.backoffId_=function Xce(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return 2===a}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function h(E){i=setTimeout(()=>{i=null,t(m,u())},E)}function p(){o&&clearTimeout(o)}function m(E,...b){if(c)return void p();if(E)return p(),void d.call(null,E,...b);if(u()||s)return p(),void d.call(null,E,...b);let O;r<64&&(r*=2),1===a?(a=2,O=0):O=1e3*(r+Math.random()),h(O)}let _=!1;function I(E){_||(_=!0,p(),!c&&(null!==i?(E||(a=2),clearTimeout(i),h(0)):E||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,I(!0)},n),I}((r,i)=>{if(i)return void r(!1,new Ym(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===vc.NO_ERROR,u=o.getStatus();if(!a||Gj(u,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===vc.ABORT;return void r(!1,new Ym(!1,null,d))}const c=-1!==this.successCodes_.indexOf(u);r(!0,new Ym(c,o))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Zce(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ym{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function lle(...t){const e=function cle(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(lA())return new Blob(t);throw new _t(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hA{constructor(e,n){this.data=e,this.contentType=n||null}}function qj(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Wj(t,e){switch(t){case Fr.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw _h(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fr.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw _h(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function hle(t){if(typeof atob>"u")throw function Qce(t){return new _t(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:_h(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Kj{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw _h(Fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function mle(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class eo{constructor(e,n){let r=0,i="";$j(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if($j(this.data_)){const i=function dle(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new eo(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new eo(r,!0)}}static getBlob(...e){if(lA()){const n=e.map(r=>r instanceof eo?r.data_:r);return new eo(lle.apply(null,n))}{const n=e.map(s=>Qm(s)?function zj(t,e){switch(t){case Fr.RAW:return new hA(qj(e));case Fr.BASE64:case Fr.BASE64URL:return new hA(Wj(t,e));case Fr.DATA_URL:return new hA(function ple(t){const e=new Kj(t);return e.base64?Wj(Fr.BASE64,e.rest):function fle(t){let e;try{e=decodeURIComponent(t)}catch{throw _h(Fr.DATA_URL,"Malformed data URL.")}return qj(e)}(e.rest)}(e),function gle(t){return new Kj(t).contentType}(e))}throw uA()}(Fr.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new eo(i,!0)}}uploadData(){return this.data_}}function fA(t){let e;try{e=JSON.parse(t)}catch{return null}return function nle(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function Qj(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function vle(t,e){return e}class kn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||vle}}let Jm=null;function vh(){if(Jm)return Jm;const t=[];t.push(new kn("bucket")),t.push(new kn("generation")),t.push(new kn("metageneration")),t.push(new kn("name","fullPath",!0));const n=new kn("name");n.xform=function e(o,s){return function Ile(t){return!Qm(t)||t.length<2?t:Qj(t)}(s)},t.push(n);const i=new kn("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},t.push(i),t.push(new kn("timeCreated")),t.push(new kn("updated")),t.push(new kn("md5Hash",null,!0)),t.push(new kn("cacheControl",null,!0)),t.push(new kn("contentDisposition",null,!0)),t.push(new kn("contentEncoding",null,!0)),t.push(new kn("contentLanguage",null,!0)),t.push(new kn("contentType",null,!0)),t.push(new kn("metadata","customMetadata",!0)),Jm=t,Jm}function Yj(t,e,n){const r=fA(e);return null===r?null:function wle(t,e,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return function Ele(t,e){Object.defineProperty(t,"ref",{get:function n(){const o=new On(t.bucket,t.fullPath);return e._makeStorageReference(o)}})}(r,t),r}(t,r,n)}function pA(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class ui{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ci(t){if(!t)throw uA()}function Xm(t,e){return function n(r,i){const o=Yj(t,i,e);return ci(null!==o),o}}function Ic(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function $ce(){return new _t(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function jce(){return new _t(ht.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Bce(t){return new _t(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function Hce(t){return new _t(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function Ih(t){const e=Ic(t);return function n(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function Uce(t){return new _t(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),o.serverResponse=i.serverResponse,o}}function t$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function Nle(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Zm{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function gA(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ci(!1)}return ci(!!n&&-1!==(e||["active"]).indexOf(n)),n}function mA(t){switch(t){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class Vle{constructor(e,n,r){if(function tle(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Ec(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let i$=null;class Fle{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw yh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Lle extends Fle{initXhr(){this.xhr_.responseType="text"}}function Lr(){return i$?i$():new Lle}class Hle{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=vh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ht.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Gj(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Lj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ht.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function xle(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=t$(e,r,i),a={name:s.fullPath},u=Zi(o,t.host,t._protocol),d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=pA(s,n),_=new ui(u,"POST",function m(I){let E;gA(I);try{E=I.getResponseHeader("X-Goog-Upload-URL")}catch{ci(!1)}return ci(Qm(E)),E},t.maxUploadRetryTime);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=Ic(e),_}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function Ole(t,e,n,r){const u=new ui(n,"POST",function o(c){const d=gA(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ci(!1)}h||ci(!1);const p=Number(h);return ci(!isNaN(p)),new Zm(p,r.size(),"final"===d)},t.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=Ic(e),u}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Lr,n,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new Zm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function kle(t,e,n,r,i,o,s,a){const u=new Zm(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function Wce(){return new _t(ht.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=u.total-u.current;let d=c;i>0&&(d=Math.min(d,i));const h=u.current;let m="";m=0===d?"finalize":c===d?"upload, finalize":"upload";const _={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${u.current}`},I=r.slice(h,h+d);if(null===I)throw Bj();const O=new ui(n,"POST",function E(F,K){const Q=gA(F,["active","final"]),C=u.current+d,w=r.size();let T;return T="final"===Q?Xm(e,o)(F,K):null,new Zm(C,w,"final"===Q,T)},e.maxUploadRetryTime);return O.headers=_,O.body=I.uploadData(),O.progressCallback=a||null,O.errorHandler=Ic(t),O}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(s,Lr,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=function Zj(t,e,n){const i=Zi(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new ui(i,"GET",Xm(t,n),s);return a.errorHandler=Ih(e),a}(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function n$(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let O="";for(let F=0;F<2;F++)O+=Math.random().toString().slice(2);return O}();s["Content-Type"]="multipart/related; boundary="+u;const c=t$(e,r,i),d=pA(c,n),m=eo.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+d+"\r\n--"+u+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===m)throw Bj();const _={name:c.fullPath},I=Zi(o,t.host,t._protocol),b=t.maxUploadRetryTime,A=new ui(I,"POST",Xm(t,n),b);return A.urlParams=_,A.headers=s,A.body=m.uploadData(),A.errorHandler=Ic(e),A}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Lr,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Uj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=mA(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new Vle(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(mA(this._state)){case"success":Ec(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Ec(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(mA(this._state)){case"running":case"paused":e.next&&Ec(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Ec(e.complete.bind(e))();break;default:e.error&&Ec(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xs{constructor(e,n){this._service=e,this._location=n instanceof On?n:On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xs(e,n)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qj(this._location.path)}get storage(){return this._service}get parent(){const e=function _le(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new On(this._location.bucket,e);return new Xs(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw function Yce(t){return new _t(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Jle(t){t._throwIfRoot("getDownloadURL");const e=function Rle(t,e,n){const i=Zi(e.fullServerUrl(),t.host,t._protocol),s=t.maxOperationRetryTime,a=new ui(i,"GET",function Ale(t,e){return function n(r,i){const o=Yj(t,i,e);return ci(null!==o),function Tle(t,e,n,r){const i=fA(e);if(null===i||!Qm(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const h=t.fullPath;return Zi("/b/"+s(t.bucket)+"/o/"+s(h),n,r)+Hj({alt:"media",token:c})})[0]}(o,i,t.host,t._protocol)}}(t,n),s);return a.errorHandler=Ih(e),a}(t.storage,t._location,vh());return t.storage.makeRequestWithTokens(e,Lr).then(n=>{if(null===n)throw function Kce(){return new _t(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function c$(t,e){if(t instanceof yA){const n=t;if(null==n._bucket)throw function qce(){return new _t(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fj+"' property when initializing the app?")}();const r=new Xs(n,n._bucket);return null!=e?c$(r,e):r}return void 0!==e?function u$(t,e){const n=function yle(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new On(t._location.bucket,n);return new Xs(t.storage,r)}(t,e):t}function l$(t,e){const n=e?.[Fj];return null==n?null:On.makeFromBucketSpec(n,t)}class yA{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Vj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?On.makeFromBucketSpec(i,this._host):l$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?On.makeFromBucketSpec(this._url,e):l$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return v(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return v(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xs(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new Jce(jj());{const s=function ule(t,e,n,r,i,o,s=!0){const a=Hj(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return function sle(t,e){e&&(t["X-Firebase-GMPID"]=e)}(c,e),function ile(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(c,n),function ole(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,o),function ale(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(c,r),new rle(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){var r=this;return v(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,o).getPromise()})()}}const d$="@firebase/storage",f$="storage";function rde(t,e,n){return function qle(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Hle(t,new eo(e),n)}(t=Fe(t),e,n)}function ide(t){return Jle(t=Fe(t))}function ode(t,e){return function tde(t,e){if(e&&function Zle(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof yA)return function ede(t,e){return new Xs(t,e)}(t,e);throw cA("To use ref(service, url), the first argument must be a Storage instance.")}return c$(t,e)}(t=Fe(t),e)}function sde(t=Du(),e){const r=ki(t=Fe(t),f$).getImmediate({identifier:e}),i=nw("storage");return i&&function ade(t,e,n,r={}){!function nde(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:sF(i,t.app.options.projectId))}(t,e,n,r)}(r,...i),r}function ude(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new yA(n,r,i,e,Cs)}!function cde(){vr(new or(f$,ude,"PUBLIC").setMultipleInstances(!0)),tt(d$,"0.13.2",""),tt(d$,"0.13.2","esm2017")}();class e_{constructor(e){return e}}const p$="storage",vA=new Y("angularfire2.storage-instances");function hde(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new e_(r)}}const fde={provide:class lde{constructor(){return Cu(p$)}},deps:[[new ft,vA]]},pde={provide:e_,useFactory:function dde(t,e){const n=_d(p$,t,e);return n&&new e_(n)},deps:[[new ft,vA],Do]},mde=ut(ide,!0),_de=ut(sde,!0),yde=ut(ode,!0),vde=ut(rde,!0),g$="@firebase/installations",IA="0.6.9",m$=1e4,_$=`w:${IA}`,y$="FIS_v2",Ide="https://firebaseinstallations.googleapis.com/v1",Ede=36e5,to=new ws("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function v$(t){return t instanceof yr&&t.code.includes("request-failed")}function EA({projectId:t}){return`${Ide}/projects/${t}/installations`}function I$(t){return{token:t.token,requestStatus:2,expiresIn:Cde(t.expiresIn),creationTime:Date.now()}}function wA(t,e){return TA.apply(this,arguments)}function TA(){return(TA=v(function*(t,e){const r=(yield e.json()).error;return to.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function E$({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DA(t){return CA.apply(this,arguments)}function CA(){return(CA=v(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function Cde(t){return Number(t.replace("s","000"))}function bA(){return(bA=v(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EA(t),i=E$(t),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:y$,appId:t.appId,sdkVersion:_$})},u=yield DA(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:I$(c.authToken)}}throw yield wA("Create Installation",u)})).apply(this,arguments)}function T$(t){return new Promise(e=>{setTimeout(e,t)})}const Rde=/^[cdef][\w-]{21}$/,AA="";function Pde(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function Mde(t){return function Sde(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return Rde.test(n)?n:AA}catch{return AA}}function wc(t){return`${t.appName}!${t.appId}`}const Tc=new Map;function D$(t,e){const n=wc(t);C$(n,e),function Ode(t,e){const n=function b$(){return!Zs&&"BroadcastChannel"in self&&(Zs=new BroadcastChannel("[Firebase] FID Change"),Zs.onmessage=t=>{C$(t.data.key,t.data.fid)}),Zs}();n&&n.postMessage({key:t,fid:e}),function A$(){0===Tc.size&&Zs&&(Zs.close(),Zs=null)}()}(n,e)}function C$(t,e){const n=Tc.get(t);if(n)for(const r of n)r(e)}let Zs=null;const kde="firebase-installations-database",Vde=1,ea="firebase-installations-store";let SA=null;function RA(){return SA||(SA=wg(kde,Vde,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ea)}})),SA}function t_(t,e){return PA.apply(this,arguments)}function PA(){return(PA=v(function*(t,e){const n=wc(t),i=(yield RA()).transaction(ea,"readwrite"),o=i.objectStore(ea),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&D$(t,e.fid),e})).apply(this,arguments)}function MA(t){return NA.apply(this,arguments)}function NA(){return(NA=v(function*(t){const e=wc(t),r=(yield RA()).transaction(ea,"readwrite");yield r.objectStore(ea).delete(e),yield r.done})).apply(this,arguments)}function Eh(t,e){return xA.apply(this,arguments)}function xA(){return(xA=v(function*(t,e){const n=wc(t),i=(yield RA()).transaction(ea,"readwrite"),o=i.objectStore(ea),s=yield o.get(n),a=e(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&D$(t,a.fid),a})).apply(this,arguments)}function OA(t){return kA.apply(this,arguments)}function kA(){return kA=v(function*(t){let e;const n=yield Eh(t.appConfig,r=>{const i=function Fde(t){return R$(t||{fid:Pde(),registrationStatus:0})}(r),o=function Lde(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(to.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Ude(t,e){return VA.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Bde(t)}:{installationEntry:e}}(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===AA?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),kA.apply(this,arguments)}function VA(){return VA=v(function*(t,e){try{const n=yield function Ade(t,e){return bA.apply(this,arguments)}(t,e);return t_(t.appConfig,n)}catch(n){throw v$(n)&&409===n.customData.serverCode?yield MA(t.appConfig):yield t_(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),VA.apply(this,arguments)}function Bde(t){return FA.apply(this,arguments)}function FA(){return(FA=v(function*(t){let e=yield S$(t.appConfig);for(;1===e.registrationStatus;)yield T$(100),e=yield S$(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield OA(t);return r||n}return e})).apply(this,arguments)}function S$(t){return Eh(t,e=>{if(!e)throw to.create("installation-not-found");return R$(e)})}function R$(t){return function jde(t){return 1===t.registrationStatus&&t.registrationTime+m$<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function LA(){return(LA=v(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function Hde(t,{fid:e}){return`${EA(t)}/${e}/authTokens:generate`}(t,n),i=function w$(t,{refreshToken:e}){const n=E$(t);return n.append("Authorization",function bde(t){return`${y$} ${t}`}(e)),n}(t,n),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:_$,appId:t.appId}})},u=yield DA(()=>fetch(r,a));if(u.ok)return I$(yield u.json());throw yield wA("Generate Auth Token",u)})).apply(this,arguments)}function UA(t){return BA.apply(this,arguments)}function BA(){return BA=v(function*(t,e=!1){let n;const r=yield Eh(t.appConfig,o=>{if(!M$(o))throw to.create("not-registered");const s=o.authToken;if(!e&&function qde(t){return 2===t.requestStatus&&!function Wde(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ede}(t)}(s))return o;if(1===s.requestStatus)return n=function Gde(t,e){return jA.apply(this,arguments)}(t,e),o;{if(!navigator.onLine)throw to.create("app-offline");const a=function Kde(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(o);return n=function zde(t,e){return $A.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),BA.apply(this,arguments)}function jA(){return(jA=v(function*(t,e){let n=yield P$(t.appConfig);for(;1===n.authToken.requestStatus;)yield T$(100),n=yield P$(t.appConfig);const r=n.authToken;return 0===r.requestStatus?UA(t,e):r})).apply(this,arguments)}function P$(t){return Eh(t,e=>{if(!M$(e))throw to.create("not-registered");return function Qde(t){return 1===t.requestStatus&&t.requestTime+m$<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function $A(){return $A=v(function*(t,e){try{const n=yield function $de(t,e){return LA.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield t_(t.appConfig,r),n}catch(n){if(!v$(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield t_(t.appConfig,r)}else yield MA(t.appConfig);throw n}}),$A.apply(this,arguments)}function M$(t){return void 0!==t&&2===t.registrationStatus}function HA(){return(HA=v(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield OA(e);return r?r.catch(console.error):UA(e).catch(console.error),n.fid})).apply(this,arguments)}function GA(){return GA=v(function*(t,e=!1){const n=t;return yield function Xde(t){return zA.apply(this,arguments)}(n),(yield UA(n,e)).token}),GA.apply(this,arguments)}function zA(){return(zA=v(function*(t){const{registrationPromise:e}=yield OA(t);e&&(yield e)})).apply(this,arguments)}function KA(t){return to.create("missing-app-config-values",{valueName:t})}const N$="installations",rhe=t=>{const e=t.getProvider("app").getImmediate(),n=function the(t){if(!t||!t.options)throw KA("App Configuration");if(!t.name)throw KA("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw KA(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:ki(e,"heartbeat"),_delete:()=>Promise.resolve()}},ihe=t=>{const n=ki(t.getProvider("app").getImmediate(),N$).getImmediate();return{getId:()=>function Yde(t){return HA.apply(this,arguments)}(n),getToken:i=>function Jde(t){return GA.apply(this,arguments)}(n,i)}};(function ohe(){vr(new or(N$,rhe,"PUBLIC")),vr(new or("installations-internal",ihe,"PRIVATE"))})(),tt(g$,IA),tt(g$,IA,"esm2017");const she="/firebase-messaging-sw.js",ahe="/firebase-cloud-messaging-push-scope",x$="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uhe="https://fcmregistrations.googleapis.com/v1",O$="google.c.a.c_id",che="google.c.a.c_l",lhe="google.c.a.ts";var n_=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(n_||{});function no(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fhe(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const QA="fcm_token_details_db",phe=5,k$="fcm_token_object_Store";function YA(){return YA=v(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(QA))return null;let e=null;return(yield wg(QA,phe,{upgrade:(r=v(function*(i,o,s,a){var u;if(o<2||!i.objectStoreNames.contains(k$))return;const c=a.objectStore(k$),d=yield c.index("fcmSenderId").get(t);if(yield c.clear(),d)if(2===o){const h=d;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:null!==(u=h.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:"string"==typeof h.vapidKey?h.vapidKey:no(h.vapidKey)}}}else if(3===o){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:no(h.auth),p256dh:no(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:no(h.vapidKey)}}}else if(4===o){const h=d;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:no(h.auth),p256dh:no(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:no(h.vapidKey)}}}}),function(o,s,a,u){return r.apply(this,arguments)})})).close(),yield fw(QA),yield fw("fcm_vapid_details_db"),yield fw("undefined"),function mhe(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),YA.apply(this,arguments)}const _he="firebase-messaging-database",yhe=1,ta="firebase-messaging-store";let JA=null;function XA(){return JA||(JA=wg(_he,yhe,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ta)}})),JA}function ZA(){return ZA=v(function*(t){const e=rS(t),r=yield(yield XA()).transaction(ta).objectStore(ta).get(e);if(r)return r;{const i=yield function ghe(t){return YA.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield eS(t,i),i}}),ZA.apply(this,arguments)}function eS(t,e){return tS.apply(this,arguments)}function tS(){return(tS=v(function*(t,e){const n=rS(t),i=(yield XA()).transaction(ta,"readwrite");return yield i.objectStore(ta).put(e,n),yield i.done,e})).apply(this,arguments)}function rS({appConfig:t}){return t.appId}const an=new ws("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ehe(t,e){return iS.apply(this,arguments)}function iS(){return(iS=v(function*(t,e){const n=yield uS(t),r=L$(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(aS(t.appConfig),i)).json()}catch(s){throw an.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error)throw an.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw an.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function oS(){return(oS=v(function*(t,e){const n=yield uS(t),r=L$(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${aS(t.appConfig)}/${e.token}`,i)).json()}catch(s){throw an.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error)throw an.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw an.create("token-update-no-token");return o.token})).apply(this,arguments)}function sS(){return(sS=v(function*(t,e){const r={method:"DELETE",headers:yield uS(t)};try{const o=yield(yield fetch(`${aS(t.appConfig)}/${e}`,r)).json();if(o.error)throw an.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw an.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function aS({projectId:t}){return`${uhe}/projects/${t}/registrations`}function uS(t){return cS.apply(this,arguments)}function cS(){return(cS=v(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function L$({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==x$&&(i.web.applicationPubKey=r),i}const The=6048e5;function lS(){return lS=v(function*(t){const e=yield function Ahe(t,e){return pS.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:no(e.getKey("auth")),p256dh:no(e.getKey("p256dh"))},r=yield function V$(t){return ZA.apply(this,arguments)}(t.firebaseDependencies);if(r){if(function She(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+The?function bhe(t,e){return hS.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield function F$(t,e){return sS.apply(this,arguments)}(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return U$(t.firebaseDependencies,n)}return U$(t.firebaseDependencies,n)}),lS.apply(this,arguments)}function hS(){return hS=v(function*(t,e){try{const n=yield function whe(t,e){return oS.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield eS(t.firebaseDependencies,r),n}catch(n){throw n}}),hS.apply(this,arguments)}function U$(t,e){return fS.apply(this,arguments)}function fS(){return(fS=v(function*(t,e){const r={token:yield Ehe(t,e),createTime:Date.now(),subscriptionOptions:e};return yield eS(t,r),r.token})).apply(this,arguments)}function pS(){return(pS=v(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fhe(e)})})).apply(this,arguments)}function B$(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function Rhe(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const o=e.notification.icon;o&&(t.notification.icon=o)}(e,t),function Phe(t,e){e.data&&(t.data=e.data)}(e,t),function Mhe(t,e){var n,r,i,o,s;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(o=e.notification)||void 0===o?void 0:o.click_action;a&&(t.fcmOptions.link=a);const u=null===(s=e.fcmOptions)||void 0===s?void 0:s.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function gS(t){return an.create("missing-app-config-values",{valueName:t})}!function xhe(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class khe{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function Ohe(t){if(!t||!t.options)throw gS("App Configuration Object");if(!t.name)throw gS("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw gS(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function mS(){return(mS=v(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(she,{scope:ahe}),t.swRegistration.update().catch(()=>{})}catch(e){throw an.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function _S(){return(_S=v(function*(t,e){if(!e&&!t.swRegistration&&(yield function j$(t){return mS.apply(this,arguments)}(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function yS(){return(yS=v(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=x$)})).apply(this,arguments)}function $$(t,e){return vS.apply(this,arguments)}function vS(){return vS=v(function*(t,e){if(!navigator)throw an.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw an.create("permission-blocked");return yield function Fhe(t,e){return yS.apply(this,arguments)}(t,e?.vapidKey),yield function Vhe(t,e){return _S.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function Dhe(t){return lS.apply(this,arguments)}(t)}),vS.apply(this,arguments)}function IS(){return(IS=v(function*(t,e,n){const r=function Uhe(t){switch(t){case n_.NOTIFICATION_CLICKED:return"notification_open";case n_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[O$],message_name:n[che],message_time:n[lhe],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ES(){return ES=v(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===n_.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(B$(n)):t.onMessageHandler.next(B$(n)));const r=n.data;(function Nhe(t){return"object"==typeof t&&!!t&&O$ in t})(r)&&"1"===r["google.c.a.e"]&&(yield function Lhe(t,e,n){return IS.apply(this,arguments)}(t,n.messageType,r))}),ES.apply(this,arguments)}const H$="@firebase/messaging",G$="0.12.12",jhe=t=>{const e=new khe(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Bhe(t,e){return ES.apply(this,arguments)}(e,n)),e},$he=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>$$(e,r)}};function z$(){return wS.apply(this,arguments)}function wS(){return(wS=v(function*(){try{yield uF()}catch{return!1}return typeof window<"u"&&rw()&&function dee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function qhe(t=Du()){return z$().then(e=>{if(!e)throw an.create("unsupported-browser")},e=>{throw an.create("indexed-db-unsupported")}),ki(Fe(t),"messaging").getImmediate()}function Whe(t,e){return DS.apply(this,arguments)}function DS(){return(DS=v(function*(t,e){return $$(t=Fe(t),e)})).apply(this,arguments)}function Khe(t,e){return function zhe(t,e){if(!navigator)throw an.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}(t=Fe(t),e)}!function Hhe(){vr(new or("messaging",jhe,"PUBLIC")),vr(new or("messaging-internal",$he,"PRIVATE")),tt(H$,G$),tt(H$,G$,"esm2017")}();class r_{constructor(e){return e}}const q$="messaging",W$="__angularfire_symbol__messagingIsSupported",CS="__angularfire_symbol__messagingIsSupportedValue";globalThis[W$]||=z$().then(t=>globalThis[CS]=t).catch(()=>globalThis[CS]=!1);const i_={async:()=>globalThis[W$],sync:()=>{const t=globalThis[CS];if(void 0===t)throw new Error((t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`)("Messaging"));return t}},bS=new Y("angularfire2.messaging-instances");function Jhe(t){return(e,n)=>{if(!i_.sync())return null;const r=e.runOutsideAngular(()=>t(n));return new r_(r)}}const Xhe={provide:class Qhe{constructor(){return Cu(q$)}},deps:[[new ft,bS]]},Zhe={provide:r_,useFactory:function Yhe(t,e){if(!i_.sync())return null;const n=_d(q$,t,e);return n&&new r_(n)},deps:[[new ft,bS],Do]},tfe=ut(qhe,!0),nfe=ut(Whe,!0),rfe=ut(Khe,!1),K$=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Q$(t){return Xe(t?.then)}function Y$(t){return Xe(t[ly])}function J$(t){return Symbol.asyncIterator&&Xe(t?.[Symbol.asyncIterator])}function X$(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Z$=function ofe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function eH(t){return Xe(t?.[Z$])}function tH(t){return function NF(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(m){return function(_){return Promise.resolve(_).then(m,h)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(m,_){r[m]&&(i[m]=function(I){return new Promise(function(E,b){o.push([m,I,E,b])>1||u(m,I)})},_&&(i[m]=_(i[m])))}function u(m,_){try{!function c(m){m.value instanceof Co?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}(r[m](_))}catch(I){p(o[0][3],I)}}function d(m){u("next",m)}function h(m){u("throw",m)}function p(m,_){m(_),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Co(n.read());if(i)return yield Co(void 0);yield yield Co(r)}}finally{n.releaseLock()}})}function nH(t){return Xe(t?.getReader)}function li(t){if(t instanceof yt)return t;if(null!=t){if(Y$(t))return function sfe(t){return new yt(e=>{const n=t[ly]();if(Xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(K$(t))return function afe(t){return new yt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Q$(t))return function ufe(t){return new yt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,DR)})}(t);if(J$(t))return rH(t);if(eH(t))return function cfe(t){return new yt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(nH(t))return function lfe(t){return rH(tH(t))}(t)}throw X$(t)}function rH(t){return new yt(e=>{(function dfe(t,e){var n,r,i,o;return function PF(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(d.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=xF(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function iH(t,e){if(!t)throw new Error("Iterable cannot be null");return new yt(n=>{Fi(n,e,()=>{const r=t[Symbol.asyncIterator]();Fi(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Zt(t,e){return e?function _fe(t,e){if(null!=t){if(Y$(t))return function hfe(t,e){return li(t).pipe(bg(e),Ag(e))}(t,e);if(K$(t))return function pfe(t,e){return new yt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(Q$(t))return function ffe(t,e){return li(t).pipe(bg(e),Ag(e))}(t,e);if(J$(t))return iH(t,e);if(eH(t))return function gfe(t,e){return new yt(n=>{let r;return Fi(n,e,()=>{r=t[Z$](),Fi(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>Xe(r?.return)&&r.return()})}(t,e);if(nH(t))return function mfe(t,e){return iH(tH(t),e)}(t,e)}throw X$(t)}(t,e):li(t)}function AS(t){return t[t.length-1]}function oH(t){return Xe(AS(t))?t.pop():void 0}function o_(t){return function yfe(t){return t&&Xe(t.schedule)}(AS(t))?t.pop():void 0}function ce(...t){return Zt(t,o_(t))}const{isArray:vfe}=Array,{getPrototypeOf:Ife,prototype:Efe,keys:wfe}=Object;function sH(t){if(1===t.length){const e=t[0];if(vfe(e))return{args:e,keys:null};if(function Tfe(t){return t&&"object"==typeof t&&Ife(t)===Efe}(e)){const n=wfe(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:Dfe}=Array;function aH(t){return De(e=>function Cfe(t,e){return Dfe(e)?t(...e):t(e)}(t,e))}function uH(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function SS(...t){const e=o_(t),n=oH(t),{args:r,keys:i}=sH(t);if(0===r.length)return Zt([],e);const o=new yt(function bfe(t,e,n=ts){return r=>{cH(e,()=>{const{length:i}=t,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)cH(e,()=>{const c=Zt(t[u],e);let d=!1;c.subscribe(Ut(r,h=>{o[u]=h,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>uH(i,s):ts));return n?o.pipe(aH(n)):o}function cH(t,e,n){t?Fi(n,t,e):e()}const s_=ny(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function In(t,e,n=1/0){return Xe(e)?In((r,i)=>De((o,s)=>e(r,o,i,s))(li(t(r,i))),n):("number"==typeof e&&(n=e),en((r,i)=>function Afe(t,e,n,r,i,o,s,a){const u=[];let c=0,d=0,h=!1;const p=()=>{h&&!u.length&&!c&&e.complete()},m=I=>c<r?_(I):u.push(I),_=I=>{o&&e.next(I),c++;let E=!1;li(n(I,d++)).subscribe(Ut(e,b=>{i?.(b),o?m(b):e.next(b)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;u.length&&c<r;){const b=u.shift();s?Fi(e,s,()=>_(b)):_(b)}p()}catch(b){e.error(b)}}))};return t.subscribe(Ut(e,m,()=>{h=!0,p()})),()=>{a?.()}}(r,i,t,n)))}function wh(t=1/0){return In(ts,t)}function RS(...t){return function Sfe(){return wh(1)}()(Zt(t,o_(t)))}function lH(t){return new yt(e=>{li(t()).subscribe(e)})}function a_(t,e){const n=Xe(t)?t:()=>t,r=i=>i.error(n());return new yt(e?i=>e.schedule(r,0,i):r)}const di=new yt(t=>t.complete());function PS(){return en((t,e)=>{let n=null;t._refCount++;const r=Ut(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class dH extends yt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,SR(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bn;const n=this.getSubject();e.add(this.source.subscribe(Ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bn.EMPTY)}return e}refCount(){return PS()(this)}}function hi(t,e){return en((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Ut(r,u=>{i?.unsubscribe();let c=0;const d=o++;li(t(u,d)).subscribe(i=Ut(r,h=>r.next(e?e(u,h,d,c++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function na(t){return t<=0?()=>di:en((e,n)=>{let r=0;e.subscribe(Ut(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ho(t,e){return en((n,r)=>{let i=0;n.subscribe(Ut(r,o=>t.call(e,o,i++)&&r.next(o)))})}function u_(t){return en((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function hH(t=Mfe){return en((e,n)=>{let r=!1;e.subscribe(Ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Mfe(){return new s_}function ra(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ho((i,o)=>t(i,o,r)):ts,na(1),n?u_(e):hH(()=>new s_))}function Th(t,e){return Xe(e)?In(t,e,1):In(t,1)}function Dc(t){return en((e,n)=>{let o,r=null,i=!1;r=e.subscribe(Ut(n,void 0,void 0,s=>{o=li(t(s,Dc(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function MS(t){return t<=0?()=>di:en((e,n)=>{let r=[];e.subscribe(Ut(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function NS(t){return en((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const pe="primary",Dh=Symbol("RouteTitle");class Ffe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Cc(t){return new Ffe(t)}function Lfe(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function fi(t,e){const n=t?xS(t):void 0,r=e?xS(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!fH(t[i],e[i]))return!1;return!0}function xS(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function fH(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}return t===e}function pH(t){return t.length>0?t[t.length-1]:null}function Go(t){return function ife(t){return!!t&&(t instanceof yt||Xe(t.lift)&&Xe(t.subscribe))}(t)?t:nd(t)?Zt(Promise.resolve(t)):ce(t)}const Bfe={exact:function _H(t,e,n){if(!ia(t.segments,e.segments)||!c_(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!_H(t.children[r],e.children[r],n))return!1;return!0},subset:yH},gH={exact:function jfe(t,e){return fi(t,e)},subset:function $fe(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fH(t[n],e[n]))},ignored:()=>!0};function mH(t,e,n){return Bfe[n.paths](t.root,e.root,n.matrixParams)&&gH[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function yH(t,e,n){return vH(t,e,e.segments,n)}function vH(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!ia(i,n)||e.hasChildren()||!c_(i,n,r))}if(t.segments.length===n.length){if(!ia(t.segments,n)||!c_(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!yH(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!(ia(t.segments,i)&&c_(t.segments,i,r)&&t.children[pe])&&vH(t.children[pe],e,o,r)}}function c_(t,e,n){return e.every((r,i)=>gH[n](t[i].parameters,r.parameters))}class bc{constructor(e=new je([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){return zfe.serialize(this)}}class je{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return l_(this)}}class Ch{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Cc(this.parameters),this._parameterMap}toString(){return wH(this)}}function ia(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Ac=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>new OS,providedIn:"root"})}}return t})();class OS{parse(e){const n=new npe(e);return new bc(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${bh(e.root,!0)}`,r=function Kfe(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${d_(n)}=${d_(i)}`).join("&"):`${d_(n)}=${d_(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function qfe(t){return encodeURI(t)}(e.fragment)}`:""}`}}const zfe=new OS;function l_(t){return t.segments.map(e=>wH(e)).join("/")}function bh(t,e){if(!t.hasChildren())return l_(t);if(e){const n=t.children[pe]?bh(t.children[pe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==pe&&r.push(`${i}:${bh(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Gfe(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===pe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==pe&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===pe?[bh(t.children[pe],!1)]:[`${i}:${bh(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[pe]?`${l_(t)}/${n[0]}`:`${l_(t)}/(${n.join("//")})`}}function IH(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function d_(t){return IH(t).replace(/%3B/gi,";")}function kS(t){return IH(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function h_(t){return decodeURIComponent(t)}function EH(t){return h_(t.replace(/\+/g,"%20"))}function wH(t){return`${kS(t.path)}${function Wfe(t){return Object.entries(t).map(([e,n])=>`;${kS(e)}=${kS(n)}`).join("")}(t.parameters)}`}const Qfe=/^[^\/()?;#]+/;function VS(t){const e=t.match(Qfe);return e?e[0]:""}const Yfe=/^[^\/()?;=#]+/,Xfe=/^[^=?&#]+/,epe=/^[^&#]+/;class npe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[pe]=new je(e,n)),r}parseSegment(){const e=VS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new Ch(h_(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function Jfe(t){const e=t.match(Yfe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=VS(this.remaining);i&&(r=i,this.capture(r))}e[h_(n)]=h_(r)}parseQueryParam(e){const n=function Zfe(t){const e=t.match(Xfe);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function tpe(t){const e=t.match(epe);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=EH(n),o=EH(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=VS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=pe);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[pe]:new je([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}}function TH(t){return t.segments.length>0?new je([],{[pe]:t}):t}function DH(t){const e={};for(const[r,i]of Object.entries(t.children)){const o=DH(i);if(r===pe&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function rpe(t){if(1===t.numberOfChildren&&t.children[pe]){const e=t.children[pe];return new je(t.segments.concat(e.segments),e.children)}return t}(new je(t.segments,e))}function Sc(t){return t instanceof bc}function CH(t){let e;const i=TH(function n(o){const s={};for(const u of o.children){const c=n(u);s[u.outlet]=c}const a=new je(o.url,s);return o===t&&(e=a),a}(t.root));return e??i}function bH(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return FS(i,i,i,n,r);const o=function ope(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new SH(!0,0,t);let e=0,n=!1;const r=t.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new SH(n,e,r)}(e);if(o.toRoot())return FS(i,i,new je([],{}),n,r);const s=function spe(t,e,n){if(t.isAbsolute)return new p_(e,!0,0);if(!n)return new p_(e,!1,NaN);if(null===n.parent)return new p_(n,!0,0);const r=f_(t.commands[0])?0:1;return function ape(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new p_(r,!1,i-o)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(o,i,t),a=s.processChildren?Sh(s.segmentGroup,s.index,o.commands):RH(s.segmentGroup,s.index,o.commands);return FS(i,s.segmentGroup,a,n,r)}function f_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ah(t){return"object"==typeof t&&null!=t&&t.outlets}function FS(t,e,n,r,i){let s,o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),s=t===e?n:AH(t,e,n);const a=TH(DH(s));return new bc(a,o,i)}function AH(t,e,n){const r={};return Object.entries(t.children).forEach(([i,o])=>{r[i]=o===e?n:AH(o,e,n)}),new je(t.segments,r)}class SH{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&f_(r[0]))throw new L(4003,!1);const i=r.find(Ah);if(i&&i!==pH(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class p_{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function RH(t,e,n){if(t??=new je([],{}),0===t.segments.length&&t.hasChildren())return Sh(t,e,n);const r=function cpe(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const s=t.segments[i],a=n[r];if(Ah(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!MH(u,c,s))return o;r+=2}else{if(!MH(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const o=new je(t.segments.slice(0,r.pathIndex),{});return o.children[pe]=new je(t.segments.slice(r.pathIndex),t.children),Sh(o,0,i)}return r.match&&0===i.length?new je(t.segments,{}):r.match&&!t.hasChildren()?LS(t,e,n):r.match?Sh(t,0,i):LS(t,e,n)}function Sh(t,e,n){if(0===n.length)return new je(t.segments,{});{const r=function upe(t){return Ah(t[0])?t[0].outlets:{[pe]:t}}(n),i={};if(Object.keys(r).some(o=>o!==pe)&&t.children[pe]&&1===t.numberOfChildren&&0===t.children[pe].segments.length){const o=Sh(t.children[pe],e,n);return new je(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=RH(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new je(t.segments,i)}}function LS(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Ah(o)){const u=lpe(o.outlets);return new je(r,u)}if(0===i&&f_(n[0])){r.push(new Ch(t.segments[e].path,PH(n[0]))),i++;continue}const s=Ah(o)?o.outlets[pe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&f_(a)?(r.push(new Ch(s,PH(a))),i+=2):(r.push(new Ch(s,{})),i++)}return new je(r,{})}function lpe(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=LS(new je([],{}),0,r))}),e}function PH(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function MH(t,e,n){return t==n.path&&fi(e,n.parameters)}const Rh="imperative";var Ce=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ce||{});class pi{constructor(e,n){this.id=e,this.url=n}}class g_ extends pi{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ce.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ro extends pi{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ce.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ur=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ur||{}),m_=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(m_||{});class Rc extends pi{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ce.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pc extends pi{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ce.NavigationSkipped}}class __ extends pi{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ce.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class NH extends pi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dpe extends pi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hpe extends pi{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ce.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fpe extends pi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ppe extends pi{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ce.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gpe{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mpe{constructor(e){this.route=e,this.type=Ce.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _pe{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ype{constructor(e){this.snapshot=e,this.type=Ce.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vpe{constructor(e){this.snapshot=e,this.type=Ce.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ipe{constructor(e){this.snapshot=e,this.type=Ce.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xH{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ce.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class US{}class BS{constructor(e){this.url=e}}class Epe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ph,this.attachRef=null}}let Ph=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Epe,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class OH{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=jS(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=jS(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=$S(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $S(e,this._root).map(n=>n.value)}}function jS(t,e){if(t===e.value)return e;for(const n of e.children){const r=jS(t,n);if(r)return r}return null}function $S(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$S(t,n);if(r.length)return r.unshift(e),r}return[]}class Ur{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Mc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class kH extends OH{constructor(e,n){super(e),this.snapshot=n,zS(this,e)}toString(){return this.snapshot.toString()}}function VH(t){const e=function wpe(t){const o=new GS([],{},{},"",{},pe,t,null,{});return new FH("",new Ur(o,[]))}(t),n=new hr([new Ch("",{})]),r=new hr({}),i=new hr({}),o=new hr({}),s=new hr(""),a=new Nc(n,r,o,s,i,pe,t,e.root);return a.snapshot=e.root,new kH(new Ur(a,[]),e)}class Nc{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(De(c=>c[Dh]))??ce(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(De(e=>Cc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(De(e=>Cc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function HS(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&UH(i)&&(r.resolve[Dh]=i.title),r}class GS{get title(){return this.data?.[Dh]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Cc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Cc(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class FH extends OH{constructor(e,n){super(n),this.url=e,zS(this,n)}toString(){return LH(this._root)}}function zS(t,e){e.value._routerState=t,e.children.forEach(n=>zS(t,n))}function LH(t){const e=t.children.length>0?` { ${t.children.map(LH).join(", ")} } `:"";return`${t.value}${e}`}function qS(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fi(e.params,n.params)||t.paramsSubject.next(n.params),function Ufe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fi(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),fi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function WS(t,e){const n=fi(t.params,e.params)&&function Hfe(t,e){return ia(t,e)&&t.every((n,r)=>fi(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||WS(t.parent,e.parent))}function UH(t){return"string"==typeof t.title||null===t.title}let KS=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new vt,this.deactivateEvents=new vt,this.attachEvents=new vt,this.detachEvents=new vt,this.parentContexts=j(Ph),this.location=j(Mr),this.changeDetector=j(rd),this.environmentInjector=j($n),this.inputBinder=j(y_,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new QS(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=ae({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fr]})}}return t})();class QS{__ngOutletInjector(e){return new QS(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Nc?this.route:e===Ph?this.childContexts:this.parent.get(e,n)}}const y_=new Y("");let BH=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=SS([r.queryParams,r.params,r.data]).pipe(hi(([o,s,a],u)=>(a={...o,...s,...a},0===u?ce(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function pJ(t){const e=me(t);if(!e)return null;const n=new Ll(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();function Mh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Dpe(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Mh(t,r,i);return Mh(t,r)})}(t,e,n);return new Ur(r,i)}{if(t.shouldAttach(e.value)){const o=t.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Mh(t,a)),s}}const r=function Cpe(t){return new Nc(new hr(t.url),new hr(t.params),new hr(t.queryParams),new hr(t.fragment),new hr(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(o=>Mh(t,o));return new Ur(r,i)}}const jH="ngNavigationCancelingError";function $H(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Sc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HH(!1,ur.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function HH(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[jH]=!0,n.cancellationCode=e,n}function GH(t){return!!t&&t[jH]}let zH=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ia({type:t,selectors:[["ng-component"]],standalone:!0,features:[mu],decls:1,vars:0,template:function(r,i){1&r&&Rn(0,"router-outlet")},dependencies:[KS],encapsulation:2})}}return t})();function YS(t){const e=t.children&&t.children.map(YS),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==pe&&(n.component=zH),n}function gi(t){return t.outlet||pe}function Nh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class xpe{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),qS(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Mc(n);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Mc(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=Mc(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ipe(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ype(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,o=n?n.value:null;if(qS(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),qS(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=Nh(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class qH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class v_{constructor(e,n){this.component=e,this.route=n}}function Ope(t,e,n){const r=t._root;return xh(r,e?e._root:null,n,[r.value])}function xc(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Xq(t){return null!==mf(t)}(t)?e.get(t):t:r}function xh(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Mc(e);return t.children.forEach(s=>{(function Vpe(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function Fpe(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!ia(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ia(t.url,e.url)||!fi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!WS(t,e)||!fi(t.queryParams,e.queryParams);default:return!WS(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qH(r)):(o.data=s.data,o._resolvedData=s._resolvedData),xh(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new v_(a.outlet.component,s))}else s&&Oh(e,a,i),i.canActivateChecks.push(new qH(r)),xh(t,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Oh(a,n.getContext(s),i)),i}function Oh(t,e,n){const r=Mc(t),i=t.value;Object.entries(r).forEach(([o,s])=>{Oh(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new v_(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function kh(t){return"function"==typeof t}function WH(t){return t instanceof s_||"EmptyError"===t?.name}const I_=Symbol("INITIAL_VALUE");function Oc(){return hi(t=>SS(t.map(e=>e.pipe(na(1),function Pfe(...t){const e=o_(t);return en((n,r)=>{(e?RS(t,n,e):RS(t,n)).subscribe(r)})}(I_)))).pipe(De(e=>{for(const n of e)if(!0!==n){if(n===I_)return I_;if(!1===n||n instanceof bc)return n}return!0}),Ho(e=>e!==I_),na(1)))}function KH(t){return dy(gn(e=>{if(Sc(e))throw $H(0,e)}),De(e=>!0===e))}class JS{constructor(e){this.segmentGroup=e||null}}class XS extends Error{constructor(e){super(),this.urlTree=e}}function kc(t){return a_(new JS(t))}class nge{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ce(r);if(i.numberOfChildren>1||!i.children[pe])return a_(new L(4e3,!1));i=i.children[pe]}}applyRedirectCommands(e,n,r){const i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new XS(i);return i}applyRedirectCreateUrlTree(e,n,r,i){const o=this.createSegmentGroup(e,n.root,r,i);return new bc(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){const o=this.createSegments(e,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new je(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const ZS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rge(t,e,n,r,i){const o=e0(t,e,n);return o.matched?(r=function Ape(t,e){return t.providers&&!t._injector&&(t._injector=Cp(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Zpe(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?ce(i.map(s=>{const a=xc(s,t);return Go(function Hpe(t){return t&&kh(t.canMatch)}(a)?a.canMatch(e,n):Ii(t,()=>a(e,n)))})).pipe(Oc(),KH()):ce(!0)}(r,e,n).pipe(De(s=>!0===s?o:{...ZS}))):ce(o)}function e0(t,e,n){if("**"===e.path)return function ige(t){return{matched:!0,parameters:t.length>0?pH(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...ZS}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Lfe)(n,t,e);if(!i)return{...ZS};const o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function QH(t,e,n,r){return n.length>0&&function age(t,e,n){return n.some(r=>E_(t,e,r)&&gi(r)!==pe)}(t,n,r)?{segmentGroup:new je(e,sge(r,new je(n,t.children))),slicedSegments:[]}:0===n.length&&function uge(t,e,n){return n.some(r=>E_(t,e,r))}(t,n,r)?{segmentGroup:new je(t.segments,oge(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new je(t.segments,t.children),slicedSegments:n}}function oge(t,e,n,r){const i={};for(const o of n)if(E_(t,e,o)&&!r[gi(o)]){const s=new je([],{});i[gi(o)]=s}return{...r,...i}}function sge(t,e){const n={};n[pe]=e;for(const r of t)if(""===r.path&&gi(r)!==pe){const i=new je([],{});n[gi(r)]=i}return n}function E_(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class dge{}class pge{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new nge(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}recognize(){const e=QH(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(De(n=>{const r=new GS([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pe,this.rootComponentType,null,{}),i=new Ur(r,n),o=new FH("",i),s=function ipe(t,e,n=null,r=null){return bH(CH(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(Dc(r=>{if(r instanceof XS)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof JS?this.noMatchError(r):r}))}inheritParamsAndData(e,n){const r=e.value,i=HS(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(De(o=>o instanceof Ur?[o]:[]))}processChildren(e,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Zt(i).pipe(Th(o=>{const s=r.children[o],a=function Mpe(t,e){const n=t.filter(r=>gi(r)===e);return n.push(...t.filter(r=>gi(r)!==e)),n}(n,o);return this.processSegmentGroup(e,a,s,o)}),function xfe(t,e){return en(function Nfe(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Ut(s,d=>{const h=c++;u=a?t(u,d,h):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}(t,e,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),u_(null),function Ofe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Ho((i,o)=>t(i,o,r)):ts,MS(1),n?u_(e):hH(()=>new s_))}(),In(o=>{if(null===o)return kc(r);const s=YH(o);return function gge(t){t.sort((e,n)=>e.value.outlet===pe?-1:n.value.outlet===pe?1:e.value.outlet.localeCompare(n.value.outlet))}(s),ce(s)}))}processSegment(e,n,r,i,o,s){return Zt(n).pipe(Th(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Dc(u=>{if(u instanceof JS)return ce(null);throw u}))),ra(a=>!!a),Dc(a=>{if(WH(a))return function lge(t,e,n){return 0===e.length&&!t.children[n]}(r,i,o)?ce(new dge):kc(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return function cge(t,e,n,r){return!!(gi(t)===r||r!==pe&&E_(e,n,t))&&e0(e,t,n).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):kc(i):kc(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){const{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:d}=e0(n,i,o);if(!a)return kc(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(In(p=>this.processSegment(e,r,n,p.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){const s=rge(n,r,i,e);return"**"===r.path&&(n.children={}),s.pipe(hi(a=>a.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(hi(({routes:u})=>{const c=r._loadedInjector??e,{consumedSegments:d,remainingSegments:h,parameters:p}=a,m=new GS(d,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function _ge(t){return t.data||{}}(r),gi(r),r.component??r._loadedComponent??null,r,function yge(t){return t.resolve||{}}(r)),{segmentGroup:_,slicedSegments:I}=QH(n,d,h,u);if(0===I.length&&_.hasChildren())return this.processChildren(c,u,_).pipe(De(b=>null===b?null:new Ur(m,b)));if(0===u.length&&0===I.length)return ce(new Ur(m,[]));const E=gi(r)===o;return this.processSegment(c,u,_,I,E?pe:o,!0).pipe(De(b=>new Ur(m,b instanceof Ur?[b]:[])))})):kc(n)))}getChildConfig(e,n,r){return n.children?ce({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?ce({routes:n._loadedRoutes,injector:n._loadedInjector}):function Xpe(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?ce(!0):ce(i.map(s=>{const a=xc(s,t);return Go(function Upe(t){return t&&kh(t.canLoad)}(a)?a.canLoad(e,n):Ii(t,()=>a(e,n)))})).pipe(Oc(),KH())}(e,n,r).pipe(In(i=>i?this.configLoader.loadChildren(e,n).pipe(gn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function tge(t){return a_(HH(!1,ur.GuardRejected))}())):ce({routes:[],injector:e})}}function mge(t){const e=t.value.routeConfig;return e&&""===e.path}function YH(t){const e=[],n=new Set;for(const r of t){if(!mge(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=YH(r.children);e.push(new Ur(r.value,i))}return e.filter(r=>!n.has(r))}function JH(t){const e=t.children.map(n=>JH(n)).flat();return[t,...e]}function t0(t){return hi(e=>{const n=t(e);return n?Zt(n).pipe(De(()=>e)):ce(e)})}let XH=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===pe);return r}getResolvedTitleForRoute(n){return n.data[Dh]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(Dge),providedIn:"root"})}}return t})(),Dge=(()=>{class t extends XH{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(re(GZ))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Vc=new Y("",{providedIn:"root",factory:()=>({})}),Fc=new Y("");let n0=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(C1)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ce(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Go(n.loadComponent()).pipe(De(ZH),gn(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),NS(()=>{this.componentLoaders.delete(n)})),i=new dH(r,()=>new dr).pipe(PS());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Cge(t,e,n,r){return Go(t.loadChildren()).pipe(De(ZH),In(i=>i instanceof Nx||Array.isArray(i)?ce(i):Zt(e.compileModuleAsync(i))),De(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Fc,[],{optional:!0,self:!0}).flat()),{routes:s.map(YS),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(NS(()=>{this.childrenLoaders.delete(r)})),s=new dH(o,()=>new dr).pipe(PS());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ZH(t){return function bge(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let r0=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(Age),providedIn:"root"})}}return t})(),Age=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const eG=new Y(""),tG=new Y("");function Sge(t,e,n){const r=t.get(tG),i=t.get(gr);return t.get(Ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o;const s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),function Rge(t){return new Promise(e=>{yI(e,{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&Ii(t,()=>u({transition:a,from:e,to:n})),s})}let w_=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new dr,this.transitionAbortSubject=new dr,this.configLoader=j(n0),this.environmentInjector=j($n),this.urlSerializer=j(Ac),this.rootContexts=j(Ph),this.location=j(sd),this.inputBindingEnabled=null!==j(y_,{optional:!0}),this.titleStrategy=j(XH),this.options=j(Vc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(r0),this.createViewTransition=j(eG,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new mpe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new gpe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new hr({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rh,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ho(o=>0!==o.id),De(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),hi(o=>{let s=!1,a=!1;return ce(o).pipe(hi(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ur.SupersededByNewNavigation),di;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Pc(u.id,this.urlSerializer.serialize(u.rawUrl),h,m_.IgnoredSameUrlNavigation)),u.resolve(null),di}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ce(u).pipe(hi(h=>{const p=this.transitions?.getValue();return this.events.next(new g_(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?di:Promise.resolve(h)}),function vge(t,e,n,r,i,o){return In(s=>function hge(t,e,n,r,i,o,s="emptyOnly"){return new pge(t,e,n,r,i,s,o).recognize()}(t,e,n,r,s.extractedUrl,i,o).pipe(De(({state:a,tree:u})=>({...s,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),gn(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const p=new NH(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:h,extractedUrl:p,source:m,restoredState:_,extras:I}=u,E=new g_(h,this.urlSerializer.serialize(p),m,_);this.events.next(E);const b=VH(this.rootComponentType).snapshot;return this.currentTransition=o={...u,targetSnapshot:b,urlAfterRedirects:p,extras:{...I,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=p,ce(o)}{const h="";return this.events.next(new Pc(u.id,this.urlSerializer.serialize(u.extractedUrl),h,m_.IgnoredByUrlHandlingStrategy)),u.resolve(null),di}}),gn(u=>{const c=new dpe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),De(u=>(this.currentTransition=o={...u,guards:Ope(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},o)),function Gpe(t,e){return In(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?ce({...n,guardsResult:!0}):function zpe(t,e,n,r){return Zt(t).pipe(In(i=>function Jpe(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ce(o.map(a=>{const u=Nh(e)??i,c=xc(a,u);return Go(function $pe(t){return t&&kh(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):Ii(u,()=>c(t,e,n,r))).pipe(ra())})).pipe(Oc()):ce(!0)}(i.component,i.route,n,e,r)),ra(i=>!0!==i,!0))}(s,r,i,t).pipe(In(a=>a&&function Lpe(t){return"boolean"==typeof t}(a)?function qpe(t,e,n,r){return Zt(e).pipe(Th(i=>RS(function Kpe(t,e){return null!==t&&e&&e(new _pe(t)),ce(!0)}(i.route.parent,r),function Wpe(t,e){return null!==t&&e&&e(new vpe(t)),ce(!0)}(i.route,r),function Ype(t,e,n){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function kpe(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>lH(()=>ce(s.guards.map(u=>{const c=Nh(s.node)??n,d=xc(u,c);return Go(function jpe(t){return t&&kh(t.canActivateChild)}(d)?d.canActivateChild(r,t):Ii(c,()=>d(r,t))).pipe(ra())})).pipe(Oc())));return ce(o).pipe(Oc())}(t,i.path,n),function Qpe(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ce(!0);const i=r.map(o=>lH(()=>{const s=Nh(e)??n,a=xc(o,s);return Go(function Bpe(t){return t&&kh(t.canActivate)}(a)?a.canActivate(e,t):Ii(s,()=>a(e,t))).pipe(ra())}));return ce(i).pipe(Oc())}(t,i.route,n))),ra(i=>!0!==i,!0))}(r,o,t,e):ce(a)),De(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),gn(u=>{if(o.guardsResult=u.guardsResult,Sc(u.guardsResult))throw $H(0,u.guardsResult);const c=new hpe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(c)}),Ho(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",ur.GuardRejected),!1)),t0(u=>{if(u.guards.canActivateChecks.length)return ce(u).pipe(gn(c=>{const d=new fpe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),hi(c=>{let d=!1;return ce(c).pipe(function Ige(t,e){return In(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ce(n);const o=new Set(i.map(u=>u.route)),s=new Set;for(const u of o)if(!s.has(u))for(const c of JH(u))s.add(c);let a=0;return Zt(s).pipe(Th(u=>o.has(u)?function Ege(t,e,n,r){const i=t.routeConfig,o=t._resolve;return void 0!==i?.title&&!UH(i)&&(o[Dh]=i.title),function wge(t,e,n,r){const i=xS(t);if(0===i.length)return ce({});const o={};return Zt(i).pipe(In(s=>function Tge(t,e,n,r){const i=Nh(e)??r,o=xc(t,i);return Go(o.resolve?o.resolve(e,n):Ii(i,()=>o(e,n)))}(t[s],e,n,r).pipe(ra(),gn(a=>{o[s]=a}))),MS(1),function kfe(t){return De(()=>t)}(o),Dc(s=>WH(s)?di:a_(s)))}(o,t,e,r).pipe(De(s=>(t._resolvedData=s,t.data=HS(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=HS(u,u.parent,t).resolve,ce(void 0))),gn(()=>a++),MS(1),In(u=>a===s.size?ce(n):di))})}(this.paramsInheritanceStrategy,this.environmentInjector),gn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",ur.NoDataFromResolver)}}))}),gn(c=>{const d=new ppe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),t0(u=>{const c=d=>{const h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(gn(p=>{d.component=p}),De(()=>{})));for(const p of d.children)h.push(...c(p));return h};return SS(c(u.targetSnapshot.root)).pipe(u_(null),na(1))}),t0(()=>this.afterPreactivation()),hi(()=>{const{currentSnapshot:u,targetSnapshot:c}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,c.root);return d?Zt(d).pipe(De(()=>o)):ce(o)}),De(u=>{const c=function Tpe(t,e,n){const r=Mh(t,e._root,n?n._root:void 0);return new kH(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o={...u,targetRouterState:c},this.currentNavigation.targetRouterState=c,o}),gn(()=>{this.events.next(new US)}),((t,e,n,r)=>De(i=>(new xpe(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),na(1),gn({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ro(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),function Vfe(t){return en((e,n)=>{li(t).subscribe(Ut(n,()=>n.complete(),iy)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(gn(u=>{throw u}))),NS(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",ur.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Dc(u=>{if(a=!0,GH(u))this.events.next(new Rc(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),function bpe(t){return GH(t)&&Sc(t.url)}(u)?this.events.next(new BS(u.url)):o.resolve(!1);else{this.events.next(new __(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(u))}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return di}))}))}cancelNavigationTransition(n,r,i){const o=new Rc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Pge(t){return t!==Rh}let Mge=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(xge),providedIn:"root"})}}return t})();class Nge{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let xge=(()=>{class t extends Nge{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})()}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),nG=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:()=>j(Oge),providedIn:"root"})}}return t})(),Oge=(()=>{class t extends nG{constructor(){super(...arguments),this.location=j(sd),this.urlSerializer=j(Ac),this.options=j(Vc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(r0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=VH(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof g_)this.stateMemento=this.createStateMemento();else if(n instanceof Pc)this.rawUrlTree=r.initialUrl;else if(n instanceof NH){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else n instanceof US?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):n instanceof Rc&&(n.code===ur.GuardRejected||n.code===ur.NoDataFromResolver)?this.restoreHistory(r):n instanceof __?this.restoreHistory(r,!0):n instanceof ro&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&0===o&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})()}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Vh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Vh||{});function rG(t,e){t.events.pipe(Ho(n=>n instanceof ro||n instanceof Rc||n instanceof __||n instanceof Pc),De(n=>n instanceof ro||n instanceof Pc?Vh.COMPLETE:n instanceof Rc&&(n.code===ur.Redirect||n.code===ur.SupersededByNewNavigation)?Vh.REDIRECTING:Vh.FAILED),Ho(n=>n!==Vh.REDIRECTING),na(1)).subscribe(()=>{e()})}function kge(t){throw t}const Vge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cr=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=j(g1),this.stateManager=j(nG),this.options=j(Vc,{optional:!0})||{},this.pendingTasks=j(Qa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(w_),this.urlSerializer=j(Ac),this.location=j(sd),this.urlHandlingStrategy=j(r0),this._events=new dr,this.errorHandler=this.options.errorHandler||kge,this.navigated=!1,this.routeReuseStrategy=j(Mge),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(Fc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(y_,{optional:!0}),this.eventsSubscription=new bn,this.isNgZoneEnabled=j(Ie)instanceof Ie&&Ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Rc&&r.code!==ur.Redirect&&r.code!==ur.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ro)this.navigated=!0;else if(r instanceof BS){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pge(i.source)};this.scheduleNavigation(s,Rh,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function Uge(t){return!(t instanceof US||t instanceof BS)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Rh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(o.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(YS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let h,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}null!==d&&(d=this.removeEmptyProps(d));try{h=CH(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),h=this.currentUrlTree.root}return bH(h,n,d,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Sc(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Rh,null,r)}navigate(n,r={skipLocationChange:!1}){return function Lge(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new L(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Vge}:!1===r?{...Fge}:r,Sc(n))return mH(this.currentUrlTree,n,i);const o=this.parseUrl(n);return mH(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((h,p)=>{a=h,u=p});const d=this.pendingTasks.add();return rG(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();class iG{}let $ge=(()=>{class t{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Ho(n=>n instanceof ro),Th(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Cp(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Zt(i).pipe(wh())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ce(null);const o=i.pipe(In(s=>null===s?ce(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Zt([o,this.loader.loadComponent(r)]).pipe(wh()):o})}static{this.\u0275fac=function(r){return new(r||t)(re(cr),re(C1),re($n),re(iG),re(n0))}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const s0=new Y("");let oG=(()=>{class t{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=j($n),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof g_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ro?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Pc&&n.code===m_.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof xH&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){var i=this;this.zone.runOutsideAngular(v(function*(){yield new Promise(o=>{setTimeout(()=>{o()}),yI(()=>{o()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new xH(n,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function fN(){throw new Error("invalid")}()}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac})}}return t})();function sG(t){return t.routerState.root}function mi(t,e){return{\u0275kind:t,\u0275providers:e}}function aG(){const t=j(Ct);return e=>{const n=t.get(Eo);if(e!==n.components[0])return;const r=t.get(cr),i=t.get(uG);1===t.get(a0)&&r.initialNavigation(),t.get(cG,null,_e.Optional)?.setUpPreloading(),t.get(s0,null,_e.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const uG=new Y("",{factory:()=>new dr}),a0=new Y("",{providedIn:"root",factory:()=>1}),cG=new Y("");function Wge(t){return mi(0,[{provide:cG,useExisting:$ge},{provide:iG,useExisting:t}])}function Qge(t){return mi(9,[{provide:eG,useValue:Sge},{provide:tG,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const lG=new Y("ROUTER_FORROOT_GUARD"),Yge=[sd,{provide:Ac,useClass:OS},cr,Ph,{provide:Nc,useFactory:sG,deps:[cr]},n0,[]];let Jge=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Yge,[],{provide:Fc,multi:!0,useValue:n},{provide:lG,useFactory:tme,deps:[[cr,new ft,new Ef]]},{provide:Vc,useValue:r||{}},r?.useHash?{provide:Es,useClass:vJ}:{provide:Es,useClass:pV},{provide:s0,useFactory:()=>{const t=j($X),e=j(Ie),n=j(Vc),r=j(w_),i=j(Ac);return n.scrollOffset&&t.setOffset(n.scrollOffset),new oG(i,r,t,e,n)}},r?.preloadingStrategy?Wge(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?nme(r):[],r?.bindToComponentInputs?mi(8,[BH,{provide:y_,useExisting:BH}]).\u0275providers:[],r?.enableViewTransitions?Qge().\u0275providers:[],[{provide:dG,useFactory:aG},{provide:Wp,multi:!0,useExisting:dG}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Fc,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||t)(re(lG,8))}}static{this.\u0275mod=Ea({type:t})}static{this.\u0275inj=ns({})}}return t})();function tme(t){return"guarded"}function nme(t){return["disabled"===t.initialNavigation?mi(3,[{provide:qp,multi:!0,useFactory:()=>{const e=j(cr);return()=>{e.setUpLocationChangeListener()}}},{provide:a0,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?mi(2,[{provide:a0,useValue:0},{provide:qp,multi:!0,deps:[Ct],useFactory:e=>{const n=e.get(_J,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(cr),o=e.get(uG);rG(i,()=>{r(!0)}),e.get(w_).afterPreactivation=()=>(r(!0),o.closed?ce(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const dG=new Y("");let u0=(()=>{class t{constructor(){var n=this;this.firestore=j(Km),this.auth=j(Md),this.storage=j(e_),this.messaging=j(r_),this.router=j(cr),this.provider=new wre,this.LOADING_IMAGE_URL="https://www.google.com/images/spin-32.gif?a",this.user$=KL(this.auth),this.currentUser=this.auth.currentUser,this.addMessage=function(){var r=v(function*(i,o){if(!i&&!o)return void console.log("addMessage was called without a message",i,o);if(null===n.currentUser)return void console.log("addMessage requires a signed-in user");const s={name:n.currentUser.displayName||"Anonymous",profilePicUrl:n.currentUser.photoURL||"",timestamp:xce(),uid:n.currentUser.uid};i&&(s.text=i),o&&(s.imageUrl=o);try{return yield Ace(kj(n.firestore,"messages"),s)}catch(a){return void console.error("Error writing new message to Firebase Database",a)}});return function(i,o){return r.apply(this,arguments)}}(),this.saveMessagingDeviceToken=v(function*(){try{const r=yield nfe(n.messaging);if(r){console.log("Got FCM device token:",r);const i=Sce(n.firestore,"fcmTokens",r);yield Oce(i,{uid:n.auth.currentUser?.uid}),rfe(n.messaging,o=>{console.log("New foreground notification from Firebase Messaging!",o.notification)})}else n.requestNotificationsPermissions()}catch(r){console.error("Unable to get messaging token.",r)}}),this.loadMessages=()=>{const r=Nce(kj(this.firestore,"messages"),Mce("timestamp","desc"),Pce(12));return bce(r)},this.saveImageMessage=function(){var r=v(function*(i){try{const o=yield n.addMessage(null,n.LOADING_IMAGE_URL),a=yde(n.storage,`${n.auth.currentUser?.uid}/${i.name}`),u=yield vde(a,i),c=yield mde(a);o&&(yield kce(o,{imageUrl:c,storageUri:u.metadata.fullPath}))}catch(o){console.error("There was an error uploading a file to Cloud Storage:",o)}});return function(i){return r.apply(this,arguments)}}(),this.requestNotificationsPermissions=v(function*(){console.log("Requesting notifications permission..."),"granted"===(yield Notification.requestPermission())?(console.log("Notification permission granted."),yield n.saveMessagingDeviceToken()):console.log("Unable to get permission to notify.")}),this.userSubscription=this.user$.subscribe(r=>{this.currentUser=r})}login(){Eoe(this.auth,this.provider).then(()=>{this.router.navigate(["/","chat"])}).catch(n=>{console.error("Login error:",n)})}logout(){woe(this.auth).then(()=>{this.router.navigate(["/","login"]),console.log("signed out")}).catch(n=>{console.error("Sign out error:",n)})}saveTextMessage(n){console.log(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ime(t,e){if(1&t){const n=eE();xe(0,"div",5)(1,"div",6),Rn(2,"img",7),xe(3,"span",8),Or(4),et()(),xe(5,"div",9)(6,"div",10)(7,"button",11),Rn(8,"img",12),et()(),xe(9,"ul",13)(10,"li",14),Rn(11,"img",7),xe(12,"span",15),Or(13),et()(),xe(14,"li")(15,"a",16),nn("click",function(){return Ma(n),Na(vs().chatService.logout())}),Or(16," Sign out "),et()()()()()}if(2&t){const n=e;Gt(2),hu("src",null==n?null:n.photoURL,$a)("alt",null==n?null:n.displayName),Gt(2),Io(" ",null==n?null:n.displayName," "),Gt(7),hu("src",null==n?null:n.photoURL,$a)("alt",null==n?null:n.displayName),Gt(2),Io(" ",null==n?null:n.displayName," ")}}let ome=(()=>{class t{constructor(){this.chatService=j(u0),this.user$=this.chatService.user$}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ia({type:t,selectors:[["app-header"]],standalone:!0,features:[mu],decls:9,vars:3,consts:[[1,"bg-navy-400","px-2","lg:px-4","py-2.5","h-18"],[1,"flex","flex-wrap","justify-between","items-center","max-w-screen"],["href","/",1,"flex","items-center"],["src","../../../assets/FriendlyChatLogo.png","alt","FriendlyChat",1,"mr-3","h-16","sm:h-10","stop-image"],[1,"mr-3","self-center","text-2xl","whitespace-nowrap","font-light","text-white"],[1,"flex","flex-wrap","items-center","content-center","auth"],[1,"hidden","sm:flex","flex-wrap","items-center","content-center","text-white"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"text-white","text-xl","whitespace-nowrap","font-light","px-4","lg:px-5","py-2","lg:py-2.5"],[1,"dropdown","rounded-lg","px-4","py-2","hover:bg-navy-700","transition-colors"],[1,"flex","items-center"],[1,"text-gray-700","inline-flex","items-center","font-semibold"],["src","../../../assets/menu.svg","alt","Menu icon",1,"w-8","h-8"],[1,"dropdown-menu","absolute","hidden","bg-white","w-48","p-1","right-2","shadow-xl","rounded-lg"],[1,"bg-white","flex","flex-row","gap-2","items-center","px-4","py-4","rounded-lg"],[1,"text-navy-200","text-md","whitespace-nowrap"],["href","/",1,"bg-white","hover:bg-navy-20","rounded-md","mt-4","py-3","px-4","block","whitespace-no-wrap","text-navy-500","font-semibold",3,"click"]],template:function(r,i){if(1&r&&(xe(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),Rn(4,"img",3),xe(5,"span",4),Or(6," Friendly Chat "),et()(),Si(7,ime,17,6,"div",5),jp(8,"async"),et()()()),2&r){let o;Gt(7),fu(7,(o=$p(8,1,i.user$))?7:-1,o)}},dependencies:[FX,GE],styles:[".dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block}"]})}}return t})(),sme=(()=>{class t{constructor(){this.title="friendlychat"}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ia({type:t,selectors:[["app-root"]],standalone:!0,features:[mu],decls:4,vars:0,consts:[[1,"site-layout"],[1,"container"]],template:function(r,i){1&r&&(xe(0,"div",0),Rn(1,"app-header")(2,"div",1)(3,"router-outlet"),et())},dependencies:[ome,Jge,KS]})}}return t})();const ame_firebase={apiKey:"API_KEY",authDomain:"PROJECT_ID.firebaseapp.com",databaseURL:"https://PROJECT_ID.firebaseio.com",projectId:"PROJECT_ID",storageBucket:"PROJECT_ID.appspot.com",messagingSenderId:"SENDER_ID",appId:"APP_ID",measurementId:"G-MEASUREMENT_ID"},l0="functions";class hme{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){var e=this;return v(function*(){if(e.auth)try{const n=yield e.auth.getToken();return n?.accessToken}catch{return}})()}getMessagingToken(){var e=this;return v(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch{return}})()}getAppCheckToken(e){var n=this;return v(function*(){if(n.appCheck){const r=e?yield n.appCheck.getLimitedUseToken():yield n.appCheck.getToken();return r.error?null:r.token}return null})()}getContext(e){var n=this;return v(function*(){return{authToken:yield n.getAuthToken(),messagingToken:yield n.getMessagingToken(),appCheckToken:yield n.getAppCheckToken(e)}})()}}const d0="us-central1";class pme{constructor(e,n,r,i,o=d0,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new hme(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin+("/"===a.pathname?"":a.pathname),this.region=d0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}const gG="@firebase/functions";function Dme(t=Du(),e=d0){const r=ki(Fe(t),l0).getImmediate({identifier:e}),i=nw("functions");return i&&function Cme(t,e,n){!function gme(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}(Fe(t),e,n)}(r,...i),r}!function Tme(t,e){vr(new or(l0,(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),a=r.getProvider("messaging-internal"),u=r.getProvider("app-check-internal");return new pme(o,s,a,u,i,t)},"PUBLIC").setMultipleInstances(!0)),tt(gG,"0.11.8",e),tt(gG,"0.11.8","esm2017")}(fetch.bind(self));class p0{constructor(e){return e}}const _G="functions",g0=new Y("angularfire2.functions-instances");function Sme(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new p0(r)}}const Rme={provide:class bme{constructor(){return Cu(_G)}},deps:[[new ft,g0]]},Pme={provide:p0,useFactory:function Ame(t,e){const n=_d(_G,t,e);return n&&new p0(n)},deps:[[new ft,g0],Do]},Nme=ut(Dme,!0),m0=De(t=>!!t);let D_=(()=>{class t{router;auth;constructor(n,r){this.router=n,this.auth=r}canActivate=(n,r)=>{const i=n.data.authGuardPipe||(()=>m0);return KL(this.auth).pipe(na(1),i(n,r),De(o=>"boolean"==typeof o?o:Array.isArray(o)?this.router.createUrlTree(o):this.router.parseUrl(o)))};static \u0275fac=function(r){return new(r||t)(re(cr),re(Md))};static \u0275prov=Z({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),yG=(()=>{class t{constructor(){this.chatService=j(u0),this.user$=this.chatService.user$}login(){console.log("Login method is called")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ia({type:t,selectors:[["app-login-page"]],standalone:!0,features:[mu],decls:12,vars:0,consts:[[1,"min-h-[80vh]","h-full","w-full","py-10","flex","flex-wrap","flex-col-reverse","sm:flex-row","items-center","min-w-screen"],[1,"min-w-screen","sm:w-[50%]","h-full","items-center","m-auto"],["src","../../../assets/WithFirebase.png","alt","With Firebase logo",1,"w-[350px]","m-auto"],[1,"min-w-screen","sm:w-[50%]","flex","flex-col","gap-5","items-center","h-full","gap-5"],["src","../../../assets/FriendlyChatLogo.png","alt","Friendly Chat Logo",1,"w-[200px]"],[1,"text-navy-600","text-5xl","font-light","mt-5"],[1,"transition-all","w-[400px]","bg-white","shadow-md","flex","flex-wrap","items-center","rounded-lg","p-2","hover:shadow-xl","justify-between",3,"click"],["src","../../../assets/Google.png","alt","Google logo",1,"w-8","m-2"],[1,"text-slate-700","text-xl","flex-grow"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"div",1),Rn(2,"img",2),et(),xe(3,"div",3)(4,"div"),Rn(5,"img",4),xe(6,"span",5),Or(7,"Friendly Chat"),et()(),xe(8,"button",6),nn("click",function(){return i.chatService.login()}),Rn(9,"img",7),xe(10,"span",8),Or(11,"Sign in with Google"),et()()()())}})}}return t})(),vG=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)($(Ai),$(tr))}}static{this.\u0275dir=ae({type:t})}}return t})(),oa=(()=>{class t extends vG{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Kt(t)))(i||t)}})()}static{this.\u0275dir=ae({type:t,features:[Ve]})}}return t})();const _i=new Y(""),Lme={provide:_i,useExisting:ze(()=>C_),multi:!0},Bme=new Y("");let C_=(()=>{class t extends vG{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ume(){const t=To()?To().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)($(Ai),$(tr),$(Bme,8))}}static{this.\u0275dir=ae({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&nn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[at([Lme]),Ve]})}}return t})();const En=new Y(""),qo=new Y("");function PG(t){return null!=t}function MG(t){return nd(t)?Zt(t):t}function NG(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function xG(t,e){return e.map(n=>n(t))}function OG(t){return t.map(e=>function $me(t){return!t.validate}(e)?e:n=>e.validate(n))}function _0(t){return null!=t?function kG(t){if(!t)return null;const e=t.filter(PG);return 0==e.length?null:function(n){return NG(xG(n,e))}}(OG(t)):null}function y0(t){return null!=t?function VG(t){if(!t)return null;const e=t.filter(PG);return 0==e.length?null:function(n){return function Vme(...t){const e=oH(t),{args:n,keys:r}=sH(t),i=new yt(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let d=0;d<s;d++){let h=!1;li(n[d]).subscribe(Ut(o,p=>{h||(h=!0,c--),a[d]=p},()=>u--,void 0,()=>{(!u||!h)&&(c||o.next(r?uH(r,a):a),o.complete())}))}});return e?i.pipe(aH(e)):i}(xG(n,e).map(MG)).pipe(De(NG))}}(OG(t)):null}function FG(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function v0(t){return t?Array.isArray(t)?t:[t]:[]}function A_(t,e){return Array.isArray(t)?t.includes(e):t===e}function BG(t,e){const n=v0(e);return v0(t).forEach(i=>{A_(n,i)||n.push(i)}),n}function jG(t,e){return v0(e).filter(n=>!A_(t,n))}class $G{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=y0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Vn extends $G{get formDirective(){return null}get path(){return null}}class Wo extends $G{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class HG{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let GG=(()=>{class t extends HG{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)($(Wo,2))}}static{this.\u0275dir=ae({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&_s("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ve]})}}return t})();const Fh="VALID",R_="INVALID",Uc="PENDING",Lh="DISABLED";function P_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class D0{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fh}get invalid(){return this.status===R_}get pending(){return this.status==Uc}get disabled(){return this.status===Lh}get enabled(){return this.status!==Lh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BG(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BG(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jG(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jG(e,this._rawAsyncValidators))}hasValidator(e){return A_(this._rawValidators,e)}hasAsyncValidator(e){return A_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Uc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Lh,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Fh,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fh||this.status===Uc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lh:Fh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Uc,this._hasOwnPendingAsyncValidator=!0;const n=MG(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new vt,this.statusChanges=new vt}_calculateStatus(){return this._allControlsDisabled()?Lh:this.errors?R_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uc)?Uc:this._anyControlsHaveStatus(R_)?R_:Fh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){P_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Wme(t){return Array.isArray(t)?_0(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Kme(t){return Array.isArray(t)?y0(t):t||null}(this._rawAsyncValidators)}}const Bc=new Y("CallSetDisabledState",{providedIn:"root",factory:()=>M_}),M_="always";function Uh(t,e,n=M_){(function b0(t,e){const n=function LG(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(FG(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function UG(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(FG(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();O_(e._rawValidators,i),O_(e._rawAsyncValidators,i)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function Jme(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&KG(t,e)})}(t,e),function Zme(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Xme(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&KG(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Yme(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function O_(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function KG(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function JG(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function XG(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const ZG=class extends D0{constructor(e=null,n,r){super(function w0(t){return(P_(t)?t.validators:t)||null}(n),function T0(t,e){return(P_(e)?e.asyncValidators:t)||null}(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),P_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=XG(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JG(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JG(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){XG(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},a_e={provide:Wo,useExisting:ze(()=>M0)},nz=Promise.resolve();let M0=(()=>{class t extends Wo{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ZG,this._registered=!1,this.name="",this.update=new vt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function R0(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===C_?n=o:function n_e(t){return Object.getPrototypeOf(t.constructor)===oa}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function S0(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Uh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){nz.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&function Eu(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);nz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function N_(t,e){return[...e.path,t]}(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)($(Vn,9),$(En,10),$(qo,10),$(_i,10),$(rd,8),$(Bc,8))}}static{this.\u0275dir=ae({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ze.None,"disabled","isDisabled"],model:[Ze.None,"ngModel","model"],options:[Ze.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[at([a_e]),Ve,fr]})}}return t})(),N_e=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ea({type:t})}static{this.\u0275inj=ns({})}}return t})(),O_e=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Bc,useValue:n.callSetDisabledState??M_}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ea({type:t})}static{this.\u0275inj=ns({imports:[N_e]})}}return t})();function k_e(t,e){if(1&t&&(xe(0,"div"),Or(1),et()),2&t){const n=vs(2).$implicit;Gt(),Io(" ",n.text," ")}}function V_e(t,e){if(1&t&&(xe(0,"div",18),Rn(1,"img",22),et()),2&t){const n=vs(2).$implicit;Gt(),hu("src",n.imageUrl,$a)}}function F_e(t,e){if(1&t&&(xe(0,"div",21)(1,"div"),Or(2),et(),xe(3,"div",19)(4,"span",20),Or(5," \u2728 ai generated "),et()()()),2&t){const n=vs(2).$implicit;Gt(2),Io(" ",n.response," ")}}function L_e(t,e){if(1&t&&(xe(0,"div",14),Rn(1,"img",15),xe(2,"div",16)(3,"div",17),Si(4,k_e,2,1,"div")(5,V_e,2,1,"div",18),xe(6,"div",19)(7,"span",20),Or(8),et()()(),Si(9,F_e,6,1,"div",21),et()()),2&t){const n=e,r=vs().$implicit;_s("flex-row-reverse",n.uid===r.uid),Gt(),hu("src",r.profilePicUrl,$a)("alt",r.name),Gt(),_s("flex-row-reverse",n.uid===r.uid),Gt(),_s("bg-amber-200",n.uid===r.uid)("bg-white",n.uid!==r.uid),Gt(),fu(4,r.text&&r.text.length>0?4:-1),Gt(),fu(5,r.imageUrl&&r.imageUrl.length>0?5:-1),Gt(3),Io(" ",r.timestamp.toDate().toLocaleTimeString()," "),Gt(),fu(9,r.response&&r.response.length>0?9:-1)}}function U_e(t,e){if(1&t&&(xe(0,"div")(1,"div",12),Si(2,L_e,10,14,"div",13),jp(3,"async"),et()()),2&t){let n;const r=vs();Gt(2),fu(2,(n=$p(3,1,r.user$))?2:-1,n)}}const Ez=()=>{return t=["chat"],dy(m0,De(e=>e&&t||!0));var t},$_e=[{path:"",component:yG,canActivate:[D_],data:{authGuardPipe:Ez}},{path:"login",component:yG,canActivate:[D_],data:{authGuardPipe:Ez}},{path:"chat",component:(()=>{class t{constructor(){this.chatService=j(u0),this.messages$=this.chatService.loadMessages(),this.user$=this.chatService.user$,this.text=""}sendTextMessage(){this.chatService.saveTextMessage(this.text),this.text=""}uploadImage(n){const r=n.target;if(r.files&&r.files.length>0){const i=r.files[0];console.log("Selected file:",i),this.chatService.saveImageMessage(i)}else console.error("No file selected")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ia({type:t,selectors:[["app-chat-page"]],standalone:!0,features:[mu],decls:15,vars:3,consts:[["fileUpload",""],[1,"min-h-screen","h-full","w-full","bg-navy-30"],[1,"w-3/4","bg-navy-10","min-h-screen","h-full","mx-auto","flex","flex-col","flex-grow","pb-56","overflow-auto"],[1,"bg-navy-10","w-full","shadow-[0_35px_60px_-15px_rgba(0,0,0,1)]","bottom-0","fixed"],[1,"flex-wrap","flex","w-5/6","mx-auto"],["type","file",1,"file-input","hidden",3,"change"],[1,"file-upload","w-16","h-16","rounded-full","bg-amber-800","my-3"],["color","primary",1,"upload-btn",3,"click"],["src","../../../assets/add.svg","alt","Upload image",1,"w-16","h-16"],["placeholder","Write your thoughts here...",1,"w-4/5","mx-auto","h-16","rounded-3xl","my-auto","overflow-auto","text-gray-900","dark:placeholder-gray-400","p-4",3,"ngModelChange","ngModel"],[1,"w-16","h-16","rounded-full","bg-amber-800","my-3",3,"click"],["src","../../../assets/send.svg","alt","Send message",1,"w-16","h-16"],[1,"flex","flex-col","flex-grow","p-4","gap-3"],[1,"flex","flex-nowrap","gap-4",3,"flex-row-reverse"],[1,"flex","flex-nowrap","gap-4"],[1,"w-10","h-10","rounded-full",3,"src","alt"],[1,"flex","flex-wrap","gap-1","text-neutral-800"],[1,"p-4","rounded-lg","max-w-xl","flex","flex-col","justify-between","gap-1"],[1,"flex","justify-center"],[1,"flex","flex-nowrap","justify-end"],[1,"text-neutral-500","text-sm"],[1,"transition-all","opacity-30","hover:opacity-100","hover:border-2","hover:border-navy-200","hover:py-6","gap-1","p-4","rounded-lg","max-w-xl","flex","flex-col","justify-between"],["alt","image",1,"max-w-[50vw]","max-h-[30vh]","rounded-md",3,"src"]],template:function(r,i){if(1&r){const o=eE();xe(0,"div",1)(1,"div",2),function PO(t,e,n,r,i,o,s,a,u,c,d,h,p){Yr("NgControlFlow");const m=void 0!==u,_=V(),I=a?s.bind(_[pt][qe]):s,E=new h7(m,I);_[de+t]=E,Si(t+1,e,n,r,i,o),m&&Si(t+2,u,c,d,h,p)}(2,U_e,4,3,"div",null,RO),jp(4,"async"),et(),xe(5,"div",3)(6,"div",4)(7,"input",5,0),nn("change",function(a){return Ma(o),Na(i.uploadImage(a))}),et(),xe(9,"div",6)(10,"button",7),nn("click",function(){return Ma(o),Na(function bk(t){return Ra(function yW(){return se.lFrame.contextLView}(),de+t)}(8).click())}),Rn(11,"img",8),et()(),xe(12,"textarea",9),sE("ngModelChange",function(a){return Ma(o),function qk(t,e){const n=mx(t);return n&&t.set(e),n}(i.text,a)||(i.text=a),Na(a)}),et(),xe(13,"button",10),nn("click",function(){return Ma(o),Na(i.sendTextMessage())}),Rn(14,"img",11),et()()()()}2&r&&(Gt(2),function MO(t){const e=ge(null),n=fn();try{const r=V(),i=r[H],o=r[n];if(void 0===o.liveCollection){const a=n+1,u=YI(r,a),c=JI(i,a);o.liveCollection=new f7(u,r,c)}else o.liveCollection.reset();const s=o.liveCollection;if(function c7(t,e,n){let r,i,o=0,s=t.length-1;if(Array.isArray(e)){let a=e.length-1;for(;o<=s&&o<=a;){const u=t.at(o),c=e[o],d=KI(o,u,o,c,n);if(0!==d){d<0&&t.updateValue(o,c),o++;continue}const h=t.at(s),p=e[a],m=KI(s,h,a,p,n);if(0!==m){m<0&&t.updateValue(s,p),s--,a--;continue}const _=n(o,u),I=n(s,h),E=n(o,c);if(Object.is(E,I)){const b=n(a,p);Object.is(b,_)?(t.swap(o,s),t.updateValue(s,p),a--,s--):t.move(s,o),t.updateValue(o,c),o++}else if(r??=new SO,i??=AO(t,o,s,n),QI(t,r,o,E))t.updateValue(o,c),o++,s++;else if(i.has(E))r.set(_,t.detach(o)),s--;else{const b=t.create(o,e[o]);t.attach(o,b),o++,s++}}for(;o<=a;)bO(t,r,n,o,e[o]),o++}else if(null!=e){const a=e[Symbol.iterator]();let u=a.next();for(;!u.done&&o<=s;){const c=t.at(o),d=u.value,h=KI(o,c,o,d,n);if(0!==h)h<0&&t.updateValue(o,d),o++,u=a.next();else{r??=new SO,i??=AO(t,o,s,n);const p=n(o,d);if(QI(t,r,o,p))t.updateValue(o,d),o++,s++,u=a.next();else if(i.has(p)){const m=n(o,c);r.set(m,t.detach(o)),s--}else t.attach(o,t.create(o,d)),o++,s++,u=a.next()}}for(;!u.done;)bO(t,r,n,t.length,u.value),u=a.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(a=>{t.destroy(a)})}(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){const a=Rr(),u=0===s.length;if(bt(r,a,u)){const c=n+2,d=YI(r,c);if(u){const h=JI(i,c),p=Wa(d,h.tView.ssrId);Al(d,bl(r,h,void 0,{dehydratedView:p}),0,qa(h,p))}else sI(d,0)}}}finally{ge(e)}}($p(4,1,i.messages$)),Gt(10),oE("ngModel",i.text))},dependencies:[GE,O_e,C_,GG,M0]})}}return t})(),canActivate:[D_],data:{authGuardPipe:()=>{return t=["login"],dy(m0,De(e=>e||t));var t}}}];(function FZ(t,e){return WY({rootComponent:t,...QV(e)})})(sme,{providers:[function Kte(t,...e){return Cr([zte,qte,{provide:Iw,useFactory:Wte(t),multi:!0,deps:[Ie,Ct,Au,...e]}])}(()=>Qte(ame_firebase)),function Cce(t,...e){return tt("angularfire",bs.full,"fst"),Cr([Dce,Tce,{provide:sA,useFactory:wce(t),multi:!0,deps:[Ie,Ct,Au,Ru,[new ft,Wg],[new ft,Sg],...e]}])}(()=>Rce()),function voe(t,...e){return tt("angularfire",bs.full,"auth"),Cr([yoe,_oe,{provide:kD,useFactory:moe(t),multi:!0,deps:[Ie,Ct,Au,Ru,[new ft,Sg],...e]}])}(()=>Ioe()),function Mme(t,...e){return tt("angularfire",bs.full,"fn"),Cr([Pme,Rme,{provide:g0,useFactory:Sme(t),multi:!0,deps:[Ie,Ct,Au,Ru,[new ft,Wg],[new ft,Sg],...e]}])}(()=>Nme()),function gde(t,...e){return tt("angularfire",bs.full,"gcs"),Cr([pde,fde,{provide:vA,useFactory:hde(t),multi:!0,deps:[Ie,Ct,Au,Ru,[new ft,Wg],[new ft,Sg],...e]}])}(()=>_de()),function efe(t,...e){return tt("angularfire",bs.full,"fcm"),Cr([Zhe,Xhe,{provide:qp,useValue:i_.async,multi:!0},{provide:bS,useFactory:Jhe(t),multi:!0,deps:[Ie,Ct,Au,Ru,...e]}])}(()=>tfe()),function Hge(t,...e){return Cr([{provide:Fc,multi:!0,useValue:t},[],{provide:Nc,useFactory:sG,deps:[cr]},{provide:Wp,multi:!0,useFactory:aG},e.map(n=>n.\u0275providers)])}($_e)]}).catch(t=>console.error(t))}},zc=>{zc(zc.s=391)}]);